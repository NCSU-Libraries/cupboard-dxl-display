(this.webpackJsonpcuboard=this.webpackJsonpcuboard||[]).push([[0],{104:function(e,t,a){},124:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},149:function(e){e.exports=JSON.parse('{"title":"NEWFILLEDLAYOUT","author":"Webb Hinton","added":"2021-11-30T05:00:00.000Z","id":"NEWFILLEDLAYOUT_11/30/2021 14:00:20","sourceLayout":{"layout":{"lg":[{"i":"https://codepen.io/rcyou/embed/QEObEk?height=265&theme-id=light&default-tab=css,result","x":2,"y":2,"w":1,"h":1,"static":false},{"i":"https://sketchfab.com/models/e55956fee6444011b574bad021a03eae/embed?autostart=1","x":3,"y":0,"w":1,"h":1,"minW":1},{"i":"https://www.lib.ncsu.edu/huntlibrary","x":3,"y":1,"w":1,"h":1,"minW":1}],"md":[{"i":"https://codepen.io/rcyou/embed/QEObEk?height=265&theme-id=light&default-tab=css,result","x":2,"y":2,"w":1,"h":1,"static":false},{"i":"https://sketchfab.com/models/e55956fee6444011b574bad021a03eae/embed?autostart=1","x":3,"y":0,"w":1,"h":1,"minW":1},{"i":"https://www.lib.ncsu.edu/huntlibrary","x":3,"y":1,"w":1,"h":1,"minW":1}],"sm":[{"i":"https://codepen.io/rcyou/embed/QEObEk?height=265&theme-id=light&default-tab=css,result","x":2,"y":2,"w":1,"h":1,"static":false},{"i":"https://sketchfab.com/models/e55956fee6444011b574bad021a03eae/embed?autostart=1","x":3,"y":0,"w":1,"h":1,"minW":1},{"i":"https://www.lib.ncsu.edu/huntlibrary","x":3,"y":1,"w":1,"h":1,"minW":1}],"xs":[{"i":"https://codepen.io/rcyou/embed/QEObEk?height=265&theme-id=light&default-tab=css,result","x":2,"y":2,"w":1,"h":1,"static":false},{"i":"https://sketchfab.com/models/e55956fee6444011b574bad021a03eae/embed?autostart=1","x":3,"y":0,"w":1,"h":1,"minW":1},{"i":"https://www.lib.ncsu.edu/huntlibrary","x":3,"y":1,"w":1,"h":1,"minW":1}],"xxs":[{"i":"https://codepen.io/rcyou/embed/QEObEk?height=265&theme-id=light&default-tab=css,result","x":2,"y":2,"w":1,"h":1,"static":false},{"i":"https://sketchfab.com/models/e55956fee6444011b574bad021a03eae/embed?autostart=1","x":3,"y":0,"w":1,"h":1,"minW":1},{"i":"https://www.lib.ncsu.edu/huntlibrary","x":3,"y":1,"w":1,"h":1,"minW":1}]},"layoutSettings":{"cardSettings":[],"gridSettings":{"defaultBackgroundColor":"red"}},"widgets":[{"id":"clock","contentType":"widget","isActive":false},{"id":"clock","contentType":"widget","isActive":false}]},"layout":{"lg":[{"w":1,"h":3,"x":0,"y":2,"i":"https://codepen.io/rcyou/embed/QEObEk?height=265&theme-id=light&default-tab=css,result","moved":false,"static":false},{"w":1,"h":3,"x":1,"y":2,"i":"https://sketchfab.com/models/e55956fee6444011b574bad021a03eae/embed?autostart=1","minW":1,"moved":false,"static":false},{"w":1,"h":4,"x":3,"y":1,"i":"https://plotly.com/python/","moved":false,"static":false},{"w":1,"h":2,"x":2,"y":3,"i":"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg","moved":false,"static":false},{"w":1,"h":3,"x":2,"y":0,"i":"https://imvr.lib.ncsu.edu/play/58","moved":false,"static":false},{"w":2,"h":2,"x":0,"y":0,"i":"clock","moved":false,"static":false},{"x":3,"y":0,"w":1,"h":1,"i":"https://matplotlib.org/stable/gallery/index.html"}],"md":[{"w":1,"h":3,"x":0,"y":2,"i":"https://codepen.io/rcyou/embed/QEObEk?height=265&theme-id=light&default-tab=css,result","moved":false,"static":false},{"w":1,"h":3,"x":1,"y":2,"i":"https://sketchfab.com/models/e55956fee6444011b574bad021a03eae/embed?autostart=1","minW":1,"moved":false,"static":false},{"w":1,"h":4,"x":3,"y":1,"i":"https://plotly.com/python/","moved":false,"static":false},{"w":1,"h":2,"x":2,"y":3,"i":"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg","moved":false,"static":false},{"w":1,"h":3,"x":2,"y":0,"i":"https://imvr.lib.ncsu.edu/play/58","moved":false,"static":false},{"w":2,"h":2,"x":0,"y":0,"i":"clock","moved":false,"static":false},{"x":3,"y":0,"w":1,"h":1,"i":"https://matplotlib.org/stable/gallery/index.html"}],"sm":[{"w":1,"h":3,"x":0,"y":2,"i":"https://codepen.io/rcyou/embed/QEObEk?height=265&theme-id=light&default-tab=css,result","moved":false,"static":false},{"w":1,"h":3,"x":1,"y":2,"i":"https://sketchfab.com/models/e55956fee6444011b574bad021a03eae/embed?autostart=1","minW":1,"moved":false,"static":false},{"w":1,"h":4,"x":3,"y":1,"i":"https://plotly.com/python/","moved":false,"static":false},{"w":1,"h":2,"x":2,"y":3,"i":"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg","moved":false,"static":false},{"w":1,"h":3,"x":2,"y":0,"i":"https://imvr.lib.ncsu.edu/play/58","moved":false,"static":false},{"w":2,"h":2,"x":0,"y":0,"i":"clock","moved":false,"static":false},{"x":3,"y":0,"w":1,"h":1,"i":"https://matplotlib.org/stable/gallery/index.html"}],"xs":[{"w":1,"h":3,"x":0,"y":2,"i":"https://codepen.io/rcyou/embed/QEObEk?height=265&theme-id=light&default-tab=css,result","moved":false,"static":false},{"w":1,"h":3,"x":1,"y":2,"i":"https://sketchfab.com/models/e55956fee6444011b574bad021a03eae/embed?autostart=1","minW":1,"moved":false,"static":false},{"w":1,"h":4,"x":3,"y":1,"i":"https://plotly.com/python/","moved":false,"static":false},{"w":1,"h":2,"x":2,"y":3,"i":"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg","moved":false,"static":false},{"w":1,"h":3,"x":2,"y":0,"i":"https://imvr.lib.ncsu.edu/play/58","moved":false,"static":false},{"w":2,"h":2,"x":0,"y":0,"i":"clock","moved":false,"static":false},{"x":3,"y":0,"w":1,"h":1,"i":"https://matplotlib.org/stable/gallery/index.html"}],"xxs":[{"w":1,"h":3,"x":0,"y":2,"i":"https://codepen.io/rcyou/embed/QEObEk?height=265&theme-id=light&default-tab=css,result","moved":false,"static":false},{"w":1,"h":3,"x":1,"y":2,"i":"https://sketchfab.com/models/e55956fee6444011b574bad021a03eae/embed?autostart=1","minW":1,"moved":false,"static":false},{"w":1,"h":4,"x":3,"y":1,"i":"https://plotly.com/python/","moved":false,"static":false},{"w":1,"h":2,"x":2,"y":3,"i":"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg","moved":false,"static":false},{"w":1,"h":3,"x":2,"y":0,"i":"https://imvr.lib.ncsu.edu/play/58","moved":false,"static":false},{"w":2,"h":2,"x":0,"y":0,"i":"clock","moved":false,"static":false},{"x":3,"y":0,"w":1,"h":1,"i":"https://matplotlib.org/stable/gallery/index.html"}]},"layoutWidgets":[{"id":"clock","contentType":"widget","isActive":false}]}')},160:function(e,t,a){},161:function(e,t,a){},167:function(e,t,a){},169:function(e,t,a){},180:function(e,t,a){},198:function(e,t,a){},199:function(e,t,a){},267:function(e,t,a){},268:function(e,t,a){},276:function(e,t,a){},277:function(e,t,a){},278:function(e,t,a){},299:function(e,t,a){},300:function(e,t,a){},301:function(e,t,a){},302:function(e,t,a){},317:function(e,t,a){"use strict";a.r(t);var n,o,r,i,c,l,s=a(14),u=a(0),d=a.n(u),f=a(20),h=a.n(f),m=a(17),v=(a(160),a(161),a(151)),g=a(100),p=a(55);!function(e){e.DISPLAY="DISPLAY",e.EDIT="EDIT",e.CYCLE="CYCLE"}(n||(n={})),function(e){e.GRID="GRID",e.PREVIEW="PREVIEW",e.FULL_SCREEN="FULL_SCREEN"}(o||(o={})),function(e){e.CARD_TABLE_DATA="CARD_TABLE_DATA",e.DISPLAY_CARD="DISPLAY_CARD"}(r||(r={})),function(e){e.ACTIVE="ACTIVE",e.STATIC="STATIC",e.FIXED="FIXED",e.IMAGE="IMAGE"}(i||(i={})),function(e){e.PLACEHOLDER="PLACEHOLDER",e.CLOCK="CLOCK",e.IFRAME="IFRAME",e.CARD_ROW="CARD_ROW",e.LAYOUT="LAYOUT",e.WIDGET="WIDGET"}(c||(c={})),function(e){e.LAYOUT_TABLE="LAYOUT_TABLE",e.CARD_TABLE="CARD_TABLE",e.CARD_GRID="CARD_GRID",e.WIDGETS_TABLE="WIDGETS_TABLE"}(l||(l={}));var y=a(7),b=a(18),E=Object(s.e)(),w=E.useStoreActions,S=(E.useStoreDispatch,E.useStoreState);var O=function(){var e=w((function(e){return e.layoutsModel})),t=e.setCardScale,a=e.setCardBackgroundColor,n=e.setCardContentFit,o=w((function(e){return e.appModel})).setEditingCard,r=S((function(e){return e.appModel})).editingCard,i=S((function(e){return e.layoutsModel})),c=i.cardScale,l=i.cardBackgroundColor,s=i.cardContentFit;return{setEditingCard:o,editingCard:r,setCardScale:t,setCardBackgroundColor:a,clearEditingCard:function(){o(void 0)},cardScale:c,cardBackgroundColor:l,cardContentFit:s,setCardContentFit:n}},x=function(){var e=w((function(e){return e.appSettingsModel.setRotationSpeed})),t=w((function(e){return e.appSettingsModel.setShowQrCodes})),a=w((function(e){return e.appSettingsModel.setEnableIframeInteractions})),n=w((function(e){return e.appSettingsModel.setEnableIframeAudio})),o=w((function(e){return e.appSettingsModel.setRotateLayouts})),r=S((function(e){return e.appSettingsModel.rotationSpeed})),i=S((function(e){return e.appSettingsModel.enableIframeAudio})),c=S((function(e){return e.appSettingsModel.rotateLayouts}));return{rotationSpeed:r,enableQrCodes:S((function(e){return e.appSettingsModel.enableQrCodes})),enableIframeInteractions:S((function(e){return e.appSettingsModel.enableIframeInteractions})),rotateLayouts:c,enableIframeAudio:i,setRotationSpeed:e,setShowQrCodes:t,setBlockIframeInteractions:a,setRotateLayouts:o,setMuteIframeAudio:n}},C=function(){var e=w((function(e){return e.googleSheetsModel.fetchTopLevelSheet})),t=S((function(e){return e.googleSheetsModel.urlSheet})),a=S((function(e){return e.googleSheetsModel.parentSheetUrl})),n=S((function(e){return e.googleSheetsModel.cardSheetUrl})),o=S((function(e){return e.googleSheetsModel.layoutSheetUrl})),r=w((function(e){return e.googleSheetsModel.setUrlSheet}));return{fetchTopLevelSheet:e,parentSheetUrl:a,cardSheetUrl:n,layoutSheetUrl:o,formUrl:S((function(e){return e.googleSheetsModel.formUrl})),setUrlSheet:r,refreshSheets:w((function(e){return e.googleSheetsModel.refreshSheets})),urlQueryLink:t}},j=function(){var e=S((function(e){return e.appModel.appErrors})),t=S((function(e){return e.layoutsModel.layoutErrors})),a=S((function(e){return e.googleSheetsModel.googleSheetsErrors}));return{appErrors:e,layoutErrors:t,googleSheetsErrors:a,allErrors:[].concat(Object(m.a)(e),Object(m.a)(t),Object(m.a)(a))}},L=function(){var e=w((function(e){return e.appModel.toggleAppMode})),t=S((function(e){return e.appModel.rotationSpeed})),a=S((function(e){return e.appModel.editingCard})),n=S((function(e){return e.appModel.rotateLayouts})),o=S((function(e){return e.googleSheetsModel.sheetsAreLoaded})),r=w((function(e){return e.appModel.setRotationSpeed})),i=w((function(e){return e.layoutsModel.transitionLayout})),c=w((function(e){return e.appModel.setRotateLayouts})),l=w((function(e){return e.appModel.addAppError})),s=w((function(e){return e.appModel.setEditingCard}));return{appMode:S((function(e){return e.appModel.appMode})),rotationSpeed:t,setRotationSpeed:r,editingCard:a,toggleAppMode:e,rotateLayouts:n,setRotateLayouts:c,addAppError:l,sheetsAreLoaded:o,transitionLayout:i,setEditingCard:s}};var k=function(){var e=S((function(e){return e.appModel.activeCards})),t=S((function(e){return e.appModel.activeWidgets})),a=S((function(e){return e.layoutsModel.externalLayouts})),n=w((function(e){return e.layoutsModel.swapCardContent})),o=w((function(e){return e.layoutsModel.deleteCard})),r=w((function(e){return e.layoutsModel.addCard})),i=w((function(e){return e.layoutsModel.setBufferLayout})),c=S((function(e){return e.layoutsModel.activeLayout})),l=w((function(e){return e.layoutsModel.setNextLayout}));return{activeCards:e,activeWidgets:t,setBufferLayout:i,activeLayout:c,deleteCard:o,addCard:r,swapCard:n,setActiveLayout:w((function(e){return e.layoutsModel.setActiveLayout})),useNextLayout:l,clearCards:w((function(e){return e.layoutsModel.clearCards})),resetLayout:w((function(e){return e.layoutsModel.resetLayout})),externalLayouts:a}};function A(e,t,a){var n=Object(u.useRef)();Object(u.useEffect)((function(){var o=(null===a||void 0===a?void 0:a.current)||window;if(o&&o.addEventListener){n.current!==t&&(n.current=t);var r=function(e){(null===n||void 0===n?void 0:n.current)&&n.current(e)};return o.addEventListener(e,r),function(){o.removeEventListener(e,r)}}}),[e,a,t])}function I(){var e=Object(u.useState)({width:0,height:0}),t=Object(y.a)(e,2),a=t[0],n=t[1],o=function(){n({width:window.innerWidth,height:window.innerHeight})};return A("resize",o),Object(u.useLayoutEffect)((function(){o()}),[]),a}var D=function(e){var t=e.split("[")[1];return{x:Number.parseInt(t.charAt(0)),y:Number.parseInt(t.charAt(3))}},T=function(e){var t=e.children,a=k(),n=a.addCard,o=a.swapCard,r=a.setActiveLayout,i=S((function(e){return e.layoutsModel.externalLayouts}));return d.a.createElement(p.a,{onDragEnd:function(e){var t,a;if((null===(t=e.destination)||void 0===t?void 0:t.droppableId)!=(null===(a=e.source)||void 0===a?void 0:a.droppableId)){var c=e.source,s=e.destination,u=e.draggableId;if(s)switch(c.droppableId){case l.CARD_TABLE:if(s.droppableId)if(s.droppableId.startsWith("empty")){var d=D(s.droppableId);n({sourceId:u,targetPosition:d})}else o({sourceId:u,targetId:s.droppableId});break;case l.WIDGETS_TABLE:var f=D(s.droppableId);n({sourceId:u,targetPosition:f});break;case l.LAYOUT_TABLE:var h=i.filter((function(e){return e.id===u}))[0];r(h);break;default:console.log("got unkown drag source")}}}},t)},R={idleTime:1e7,defaultIframeScale:.5,defaultEmbedScale:1,defaultLayoutName:"Data Vis Types Chart 1",widgetIds:["clock","group label","info"],gridRows:6,gridCols:4,showModeSwitchButton:!1,useStaticLayout:!1,gridBottomPadding:50,rotationDuration:1e5,noUrlTimeout:10,backupParentSheetUrl:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/cupboard-dxl-display",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PUBLIC_UR,"/backupSheets/BACKUP_PARENT_SHEET")},M=a(356),_=function(e){var t,a=e.children,o=Object(M.a)(R.idleTime,!1),r=x(),i=r.rotationSpeed,c=r.rotateLayouts,l=L(),s=l.appMode,d=l.toggleAppMode,f=l.transitionLayout,h=function(e,t){var a=Object(u.useRef)(e),n=Object(u.useRef)();return Object(u.useLayoutEffect)((function(){a.current=e}),[e]),Object(u.useEffect)((function(){if(t||0===t){var e=setInterval((function(){return a.current()}),t);return n.current=e,function(){return clearInterval(e)}}}),[t]),{reset:Object(u.useCallback)((function(){n.current&&t&&(clearInterval(n.current),n.current=setInterval(a.current,t))}),[t]),stop:Object(u.useCallback)((function(){n.current&&clearInterval(n.current)}),[])}}((function(){s===n.DISPLAY&&c&&f(1)}),i).reset;return t=function(){h()},A("click",(function(e){t(e)})),Object(u.useEffect)((function(){s===n.EDIT&&d()}),[o]),a},N=(a(167),a(25)),U=a.n(N),P=a(32),W={uniforms:{time:{value:0}},vertexShader:"\n    vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n    vec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n    vec3 permute(vec3 x) { return mod289(((x*34.0)+1.0)*x); }\n  \n    float snoise(vec2 v) {\n        const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                            0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                            -0.577350269189626,  // -1.0 + 2.0 * C.x\n                            0.024390243902439); // 1.0 / 41.0\n        vec2 i  = floor(v + dot(v, C.yy) );\n        vec2 x0 = v -   i + dot(i, C.xx);\n        vec2 i1;\n        i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n        vec4 x12 = x0.xyxy + C.xxzz;\n        x12.xy -= i1;\n        i = mod289(i); // Avoid truncation effects in permutation\n        vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n            + i.x + vec3(0.0, i1.x, 1.0 ));\n  \n        vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n        m = m*m ;\n        m = m*m ;\n        vec3 x = 2.0 * fract(p * C.www) - 1.0;\n        vec3 h = abs(x) - 0.5;\n        vec3 ox = floor(x + 0.5);\n        vec3 a0 = x - ox;\n        m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n        vec3 g;\n        g.x  = a0.x  * x0.x  + h.x  * x0.y;\n        g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n        return 130.0 * dot(m, g);\n    }\n  \n  \n    \n  \n    uniform float u_time;\n    uniform vec2 u_randomisePosition;\n  \n    varying float vDistortion;\n    varying float xDistortion;\n    varying vec2 vUv;\n  \n    void main() {\n        vUv = uv;\n        vDistortion = snoise(vUv.xx * 3. - u_randomisePosition * 0.15);\n        xDistortion = snoise(vUv.yy * 1. - u_randomisePosition * 0.05);\n        vec3 pos = position;\n        pos.z += (vDistortion * 35.);\n        pos.x += (xDistortion * 25.);\n  \n        gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n    }\n    ",fragmentShader:"\n    vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n    vec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n    vec3 permute(vec3 x) { return mod289(((x*34.0)+1.0)*x); }\n  \n    float snoise(vec2 v) {\n        const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                            0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                            -0.577350269189626,  // -1.0 + 2.0 * C.x\n                            0.024390243902439); // 1.0 / 41.0\n        vec2 i  = floor(v + dot(v, C.yy) );\n        vec2 x0 = v -   i + dot(i, C.xx);\n        vec2 i1;\n        i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n        vec4 x12 = x0.xyxy + C.xxzz;\n        x12.xy -= i1;\n        i = mod289(i); // Avoid truncation effects in permutation\n        vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n            + i.x + vec3(0.0, i1.x, 1.0 ));\n  \n        vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n        m = m*m ;\n        m = m*m ;\n        vec3 x = 2.0 * fract(p * C.www) - 1.0;\n        vec3 h = abs(x) - 0.5;\n        vec3 ox = floor(x + 0.5);\n        vec3 a0 = x - ox;\n        m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n        vec3 g;\n        g.x  = a0.x  * x0.x  + h.x  * x0.y;\n        g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n        return 130.0 * dot(m, g);\n    }\n  \n  \n  \n  \n  \n    vec3 rgb(float r, float g, float b) {\n      return vec3(r / 255., g / 255., b / 255.);\n  }\n  \n  vec3 rgb(float c) {\n      return vec3(c / 255., c / 255., c / 255.);\n  }\n  \n  uniform vec3 u_bg;\n  uniform vec3 u_bgMain;\n  uniform vec3 u_color1;\n  uniform vec3 u_color2;\n  uniform float u_time;\n  \n  varying vec2 vUv;\n  varying float vDistortion;\n  \n  void main() {\n      vec3 bg = rgb(u_bg.r, u_bg.g, u_bg.b);\n      vec3 c1 = rgb(u_color1.r, u_color1.g, u_color1.b);\n      vec3 c2 = rgb(u_color2.r, u_color2.g, u_color2.b);\n      vec3 bgMain = rgb(u_bgMain.r, u_bgMain.g, u_bgMain.b);\n  \n      float noise1 = snoise(vUv + u_time * 0.08);\n      float noise2 = snoise(vUv * 2. + u_time * 0.1);\n  \n      vec3 color = bg;\n      color = mix(color, c1, noise1 * 0.6);\n      color = mix(color, c2, noise2 * .4);\n  \n      color = mix(color, mix(c1, c2, vUv.x), vDistortion);\n  \n      float border = smoothstep(0.1, 0.6, vUv.x);\n  \n      color = mix(color, bgMain, 1. -border);\n  \n      gl_FragColor = vec4(color, 1.0);\n  }\n    "},z=a(334),B=a(357),G=a(13);function V(e){if(e){var t=new Date(e),a=""+(t.getMonth()+1),n=""+t.getDate(),o=t.getFullYear().toString().slice(2);return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[a,n,o].join(".")}return"faulty date"}function F(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function Y(e,t){return Math.random()*(t-e)+e}var H=new G.Vector2(1,2);function J(e,t,a){return new G.Vector3(e,t,a)}var K={pink:J(182,9,76),brightPink:J(241,3,66),darkPurple:J(42,8,56),orange:J(244,93,31),darkgrey:J(50,50,50),lightgrey:J(150,150,150),red:J(204,0,0)},Q={u_bg:{type:"v3",value:K.lightgrey},u_bgMain:{type:"v3",value:K.lightgrey},u_color1:{type:"v3",value:K.lightgrey},u_color2:{type:"v3",value:K.lightgrey},u_time:{type:"f",value:0},u_randomisePosition:{type:"v2",value:H}},q=function(e){var t=e.position,a=Object(u.useRef)(),n=0,o=0,r=F(0,32),i=F(0,32),c=!1;return Object(P.b)((function(e){e.clock;a.current.uniforms.u_randomisePosition.value=new G.Vector2(o,o),a.current.uniforms.u_color1.value=new G.Vector3(function(e,t,a){return Math.floor(192+64*Math.cos((e*e-t*t)/300+a))}(r,i,n/2),function(e,t,a){return Math.floor(192+64*Math.sin((e*e*Math.cos(a/4)+t*t*Math.sin(a/3))/300))}(r,i,n/2),function(e,t,a){return Math.floor(192+64*Math.sin(5*Math.sin(a/9)+((e-100)*(e-100)+(t-100)*(t-100))/1100))}(r,i,n/2)),a.current.uniforms.u_time.value=n,n%.1===0&&(!1===c?(r-=1)<=0&&(c=!0):(r+=1)>=32&&(c=!1)),o+=.01,n+=.01})),d.a.createElement("mesh",{position:t,rotation:[G.MathUtils.degToRad(0),G.MathUtils.degToRad(0),G.MathUtils.degToRad(90)]},d.a.createElement("planeGeometry",{attach:"geometry",args:[400,window.innerWidth/2,45,45]}),d.a.createElement("shaderMaterial",{attach:"material",vertexShader:W.vertexShader,fragmentShader:W.fragmentShader,uniforms:Q,ref:a}))},X=function(){var e=Object(u.useRef)();return d.a.createElement(P.a,{gl:{antialias:!1,alpha:!1}},d.a.createElement(z.a,{ref:e,position:[0,0,0],fov:75,aspect:window.innerWidth/window.innerHeight,near:.1,far:1e3}),d.a.createElement(q,{position:[0,0,-100],faceResolution:100}),d.a.createElement(B.a,null))},$=function(){var e=L().appMode,t=Object(u.useState)({backgroundColor:"gray"}),a=Object(y.a)(t,2),o=a[0],r=a[1];Object(u.useEffect)((function(){var t={position:"absolute",height:"100vh",width:"100vw",top:0,left:0,backgroundColor:e===n.EDIT?"#2d2d2d":"gray",transition:"background-color 0.5s ease"};r(t)}),[e]);var i=U()("background-container",{"background-container-display-mode":e==n.DISPLAY,"background-container-edit-mode":e==n.EDIT});return h.a.createPortal(d.a.createElement("div",{className:i,style:o},e===n.EDIT?d.a.createElement("div",{style:{position:"absolute",height:"100vh",width:"100vw",top:0,left:0,backgroundColor:"lightgrey",transition:"background-color 0.5s ease"}}):d.a.createElement("div",{className:"background-container"},d.a.createElement("div",{className:"shader-container"},d.a.createElement(X,null)),d.a.createElement("div",{className:"particle-container"}))),document.querySelector("#background"))},Z=d.a.memo($),ee=(a(104),a(169),a(351)),te=a(68),ae=(a(180),a(139)),ne=a.n(ae),oe=function(e){var t,a=e.onLoad,n=e.onError,o=e.card,r=e.cardSettings,i=(e.cardView,x().enableIframeInteractions),c=null!==(t=null===r||void 0===r?void 0:r.scale)&&void 0!==t?t:1,l=o.src;return d.a.createElement("iframe",{onError:function(e){n(e,o)},onLoad:function(e){a(e,o)},src:l,style:{transform:"scale(".concat(c,")"),pointerEvents:i?"all":"none",width:"".concat(1/c*100,"%"),height:"".concat(1/c*100,"%"),transformOrigin:"top left"}})},re=function(e){var t,a,n=e.onLoad,r=e.onError,i=e.card,c=e.cardSettings,l=e.cardView,s=i.src;return d.a.createElement("img",{onError:function(e){r(e,i)},onLoad:function(e){n(e,i)},src:s,style:{transform:"scale(".concat(null!==(t=null===c||void 0===c?void 0:c.scale)&&void 0!==t?t:1,")"),width:"100%",height:"100%",objectFit:null!==(a=null===c||void 0===c?void 0:c.contentFit)&&void 0!==a?a:"cover",objectPosition:l===o.PREVIEW?"contain":"center"}})},ie=function(e){var t=e.card,a=(e.scale,e.cardView),n=e.onError,o=e.onLoad,r=(e.objectFit,e.cardSettings),i=Object(u.useState)(!1),c=Object(y.a)(i,2),l=c[0],s=c[1],f=Object(u.useState)(!0),h=Object(y.a)(f,2),m=h[0],v=(h[1],Object(u.useState)(!1)),g=Object(y.a)(v,2),p=(g[0],g[1]),b=U()("iframe-container",{"iframe-container-hidden":!m});Object(u.useEffect)((function(){}),[a]);t.src;var E=t.contentType;return d.a.createElement("div",{className:b,onDoubleClick:function(){s(!l)}},"video"===E?d.a.createElement(le,{onReady:function(e){p(!0)},src:t.src}):"image"===E?d.a.createElement(re,{card:t,cardSettings:r,cardView:a,onError:n,onLoad:o}):d.a.createElement(oe,{card:t,cardSettings:r,cardView:a,onError:n,onLoad:o}))},ce=d.a.memo(ie),le=function(e){var t=e.src,a=e.onReady;return d.a.createElement("div",{className:"player-wrapper"},d.a.createElement(ne.a,{className:"react-player",controls:!0,height:"100%",muted:!0,onReady:a,playing:!0,url:t,width:"100%"}))},se=a(28),ue=(a(198),a(199),a(335)),de=function(){return d.a.createElement("div",{className:"pulsar"},d.a.createElement(ue.a,{size:150}))},fe=["children","className","cardType"],he=function(e){var t=e.children,a=e.className,n=(e.cardType,Object(se.a)(e,fe));return d.a.createElement(p.c,Object.assign({},n,{type:"DEFAULT"}),(function(e,n){return d.a.createElement("div",Object.assign({},e.innerRef,{className:n.isDraggingOver?"droppable-hovered "+a:"droppable "+a,ref:e.innerRef}),d.a.createElement("div",{className:n.isDraggingOver?"droppable-overlay droppable-overlay-visible":"droppable-overlay droppable-overlay-hidden"},d.a.createElement(de,null)),t,e.placeholder)}))},me=(a(124),function(){var e=Object(u.useState)(new Date),t=Object(y.a)(e,2),a=t[0],n=t[1];return Object(u.useEffect)((function(){var e=setInterval((function(){n(new Date)}),1e3);return function(){clearInterval(e)}})),d.a.createElement("div",{style:{height:"100%",padding:".25em",overflow:"hidden",width:"100%",fontWeight:600,color:"white",boxSizing:"border-box"}},d.a.createElement("div",{style:{color:"white",fontSize:"9vmin"}},"Data Experience Lab"),d.a.createElement("div",{style:{color:"white",fontSize:"9vmin"}},a.toLocaleTimeString("en-IT",{hour12:!0,timeStyle:"short"})))}),ve=a(338),ge=(a(125),a(336)),pe=a(337),ye=(a(267),function(e){var t=e.children,a=e.active,n=e.containerClassName,o=e.onClose,r=e.backdropOpacity;return d.a.createElement(ee.a.div,{animate:{y:0},className:"modal-container",style:{display:a?"flex":"none",width:"100vw",height:"100vh",justifyContent:"center",alignItems:"center"}},d.a.createElement(be,{backdropOpacity:null!==r&&void 0!==r?r:0,onClose:o}),d.a.createElement("div",{className:n,style:{zIndex:1e3}},t))}),be=function(e){var t=e.onClose,a=e.backdropOpacity;return d.a.createElement("div",{className:"pop-up-background",onMouseUp:t,style:{opacity:a,zIndex:200}})},Ee=(a(268),function(e){var t,a=e.children,n=e.className,o=e.padding,r=e.flexDirection,i={padding:null!==o&&void 0!==o?o:"0em",flexDirection:null!==r&&void 0!==r?r:"column"};return d.a.createElement("div",{className:null!==(t="panel "+n)&&void 0!==t?t:"",style:i},a)}),we=function(e){var t=e.active,a=e.onClose;return Object(u.useEffect)((function(){console.log(t)}),[t]),h.a.createPortal(d.a.createElement(ye,{active:t,backdropOpacity:0,onClose:a},d.a.createElement(ee.a.div,{animate:t?"visible":"hidden",style:{width:"30vw",height:"80vh",backgroundColor:"white",borderRadius:10,padding:"1em"},variants:{hidden:{y:100,opacity:0},visible:{opacity:1,y:0,transition:{duration:.5}}}},d.a.createElement(Ee,null,d.a.createElement(ge.a,null,"Connect Labtop"),d.a.createElement("hr",null),d.a.createElement(pe.a,null,"Connect your labtop to use this screen as a display."),d.a.createElement("img",{className:"how-to-image",src:"/cupboard-dxl-display/labtopdiagram.png"}),d.a.createElement(ge.a,null,"Explore Content"),d.a.createElement("hr",null),d.a.createElement(pe.a,null,"Click on a card to explore data related content."),d.a.createElement("img",{className:"how-to-image",src:"/cupboard-dxl-display/masonary.png"})))),document.querySelector("#popup-container"))},Se=a(76),Oe=function(e){var t=e.onClick,a=e.text,n=e.appearance,o=e.className,r=e.iconBefore,i=e.width,c=e.height,l=e.style,s=e.containerClass,u=e.fontSize,f=e.intent;return d.a.createElement("div",{className:s,onMouseUp:t,style:{width:i,height:"100%"}},d.a.createElement(Se.a,{appearance:null!==n&&void 0!==n?n:"default",className:o,cursor:"pointer",fontSize:u,height:null!==c&&void 0!==c?c:void 0,iconBefore:null!==r&&void 0!==r?r:void 0,intent:null!==f&&void 0!==f?f:"none",style:l,width:null!==i&&void 0!==i?i:void 0},a))},xe=function(){var e=Object(u.useState)(new Date),t=Object(y.a)(e,2),a=(t[0],t[1]),n=function(e){var t=Object(u.useState)(e),a=Object(y.a)(t,2),n=a[0],o=a[1];return[n,function(){return o(!n)}]}(!1),o=Object(y.a)(n,2),r=o[0],i=o[1];Object(u.useEffect)((function(){var e=setInterval((function(){a(new Date)}),1e3);return function(){clearInterval(e)}}));L().appMode;return d.a.createElement("div",{id:"how-to-use-button-widget",style:{height:"100%",width:"100%",fontSize:"9vmin",fontWeight:600,color:"white",boxSizing:"border-box",backgroundColor:"blue"}},d.a.createElement(we,{active:r,onClose:i}),d.a.createElement(Oe,{appearance:"primary",className:"how-to-use-button",fontSize:"xx-large",height:"100%",iconBefore:d.a.createElement(ve.a,null),onClick:i,text:"Learn how to use this display",width:"100%"}))},Ce=function(e){var t=e.widget,a=e.scale,n=e.colWidth,o=e.rowHeight;e.cardSettings;return d.a.createElement("div",{className:"card-display",style:{width:n?t.w*n:"100%",height:o?t.h*o:"100%",transform:"scale(".concat(a,")"),transformOrigin:"top left",borderRadius:".5em",overflow:"hidden"}},function(e){var t=d.a.createElement("div",null);switch(e){case"clock":t=d.a.createElement(me,null);break;case"info":t=d.a.createElement(xe,null);break;default:t=d.a.createElement("div",null)}return t}(t.id))},je=(a(126),a(143),function(e){var t,a=e.children,n=e.card,o=e.cardSettings,r=O().editingCard;return d.a.createElement("div",{className:"card-backdrop",style:{overflow:"hidden",borderRadius:"0.5em",width:"100%",height:"100%",backgroundColor:null!==(t=null===o||void 0===o?void 0:o.backgroundColor)&&void 0!==t?t:"",boxShadow:"0 8px 32px 0 rgba(49, 49, 49, 0.37)",border:n.id===(null===r||void 0===r?void 0:r.id)?"3px solid white":"1px solid rgba(255, 255, 255, 0.294)"}},a)}),Le=(a(276),function(e){var t=e.data,a=(e.className,Object(u.useState)(!1)),n=Object(y.a)(a,2);n[0],n[1];return d.a.createElement("div",{className:"card-footer"},d.a.createElement("h2",{style:{}},t.title),d.a.createElement("p",null,"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&apos standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book"," "))}),ke=function(e){var t=e.children,a=e.animation,o=e.card,r=(e.backgroundColor,{active:{opacity:1,transition:{delay:Y(.4,.5),duration:.5}},preview:{opacity:1,transition:{duration:.2}},none:{opacity:1,x:0,y:0},error:{backgroundColor:"red"},loaded:{opacity:1,transition:{delay:Y(.4,.5),duration:.5},x:0},out:{y:Y(-50,-75),opacity:0,transition:{delay:Y(.1,.5),duration:.5}}}),i=L().appMode;return d.a.createElement(ee.a.div,{animate:a,initial:"widget"===(null===o||void 0===o?void 0:o.contentType)?"loaded":"",layoutId:"viewcard",style:{opacity:i===n.DISPLAY?0:1,y:0},variants:r},t)},Ae=(a(277),a(339)),Ie=function(e){var t=e.onClick;e.action;return d.a.createElement("div",{className:"delete-button-container",onClick:t,onMouseUp:t,onTouchEnd:function(e){}},d.a.createElement("div",{style:{display:"flex"}},d.a.createElement(Ae.a,{size:30})))},De=(a(278),a(340)),Te=function(e){var t=e.onClick;return d.a.createElement("div",{onMouseUp:t,style:{position:"absolute",bottom:"40%",left:0,width:40,height:40,borderRadius:"50%",overflow:"hidden",boxShadow:"var(--shadow)",zIndex:100,background:"white",justifyContent:"center",alignItems:"center",display:"flex",transform:"translate(-50%, 0px)"}},d.a.createElement("div",{style:{display:"flex"}},d.a.createElement(De.a,{size:30})))},Re=function(e){var t=e.cardType,a=e.children,r=e.cardId,i=e.data,c=e.onClick,l=e.cardSettings,f=(e.useAnimation,L()),h=f.appMode,m=f.addAppError,v=f.setEditingCard,g=k().deleteCard,p=Object(u.useState)(o.GRID),b=Object(y.a)(p,2),E=b[0],w=b[1],x=Object(u.useState)(!1),C=Object(y.a)(x,2),j=(C[0],C[1]),A=Object(u.useState)(!1),I=Object(y.a)(A,2),D=(I[0],I[1]),T=Object(u.useState)("widget"===(null===i||void 0===i?void 0:i.contentType)?"loaded":""),R=Object(y.a)(T,2),M=R[0],_=R[1],N=O().setCardScale,P=S((function(e){return e.layoutsModel.animationCounter}));Object(u.useEffect)((function(){h===n.DISPLAY&&_("out"),"widget"===(null===i||void 0===i?void 0:i.contentType)&&_("loaded")}),[P]);var W,z,B=Object(s.h)((function(){var e;return{cardView:o.GRID,setCardView:Object(s.b)((function(e,t){e.cardView=t})),scale:null!==(e=null===l||void 0===l?void 0:l.scale)&&void 0!==e?e:1,setScale:Object(s.b)((function(e,t){e.scale+=t,i&&N({cardId:null===i||void 0===i?void 0:i.id,scale:e.scale})})),cardBackgroundColor:"",setBackgroundColor:Object(s.b)((function(e,t){e.cardBackgroundColor=t})),setShowMenu:Object(s.b)((function(e,t){e.showMenu=t})),toggleMenu:Object(s.b)((function(e){e.showMenu=!e.showMenu})),showMenu:!1,cardType:t,handleCardPress:Object(s.f)((function(e,t,a){var c,l=a.getState,s=document.querySelector("#root");if((s.style.pointerEvents="all")&&(s.style.pointerEvents="none"),setTimeout((function(){s.style.pointerEvents="all"}),1e3),h===n.DISPLAY&&void 0!=r)switch(l().cardView){case o.GRID:break;case o.PREVIEW:e.setCardView(o.GRID),document.getElementById(null!==(c=null===i||void 0===i?void 0:i.id)&&void 0!==c?c:"view_card").style.zIndex="0"}}))}}),[h],(function(e){return{devTools:!1}})),G=Object(y.a)(B,2),V=G[0],F=G[1],Y=U()("card-modal-backdrop",{"card-modal-backdrop-active":E===o.PREVIEW||E===o.FULL_SCREEN,"card-modal-backdrop-inactive":E===o.GRID}),H=U()("card-child-container",{"card-child-container-preview":V.cardView===o.PREVIEW,"card-child-container-fullscreen":V.cardView===o.FULL_SCREEN,"card-child-container-grid":V.cardView===o.GRID}),J=function(e){var t=e.keyCode,a=e.action,n=e.disabled;d.a.useEffect((function(){return n||o(),function(){r()}}));var o=function(){document.addEventListener("keydown",i)},r=function(){document.removeEventListener("keydown",i)},i=function(e){e.keyCode===t&&(e.preventDefault(),a(e))};return{enable:o,disable:r}}({keyCode:27,action:function(){E!==o.FULL_SCREEN&&E!==o.PREVIEW||w(o.GRID)},disabled:!1}),K=(J.enable,J.disable,function(){if(h==n.EDIT&&i)return d.a.createElement(d.a.Fragment,null,d.a.createElement(Ie,{action:function(){g(i.id)},onClick:function(){g(i.id)}}),"widget"!==i.contentType&&d.a.createElement(Te,{onClick:function(e){"widget"!==i.contentType&&v(i)}}))}),Q=function(){if(E===o.PREVIEW&&i&&"widget"!==i.contentType)return d.a.createElement(Le,{className:"",data:i})},q=Object(u.useRef)(null);W=q,z=function(e){e.preventDefault(),V.cardView==o.PREVIEW&&F.setCardView(o.GRID)},Object(u.useEffect)((function(){var e=function(e){var t=null===W||void 0===W?void 0:W.current;t&&!t.contains(e.target)&&z(e)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),function(){document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[W,z]);return Object(u.useEffect)((function(){V.cardView,o.PREVIEW,V.cardView,o.GRID}),[V.cardView]),Object(u.useEffect)((function(){console.log(M)}),[M]),d.a.createElement(d.a.Fragment,null,i&&d.a.createElement(ke,{animation:M,backgroundColor:V.cardBackgroundColor,card:i},a&&d.a.createElement("div",{className:Y},d.a.createElement("div",{className:H,onMouseUp:function(){F.handleCardPress(),c&&c()},ref:q},"widget"!==(null===i||void 0===i?void 0:i.contentType)?[K(),Q()]:[K()],d.a.createElement(je,{card:i,cardSettings:l},a(V.scale,V.cardView,(function(e,t){var a=t.title,n=t.src;m({errorType:"failed to load content",description:"description",source:"Card: ".concat(a),link:n}),j(!0)}),(function(e,t){h===n.DISPLAY&&_("loaded"),D(!0)}),null!==l&&void 0!==l?l:{id:"not found",scale:1}))),function(){if(E===o.FULL_SCREEN)return d.a.createElement(Me,{onClick:function(){w(o.GRID)}})}())))},Me=function(e){var t=e.onClick;return d.a.createElement("div",{className:"return-button-container"},d.a.createElement(Oe,{onClick:t,text:"Return",width:300}))};var _e=d.a.memo(Re),Ne=function(e){var t=e.gridSettings,a=Object(te.WidthProvider)(te.Responsive),n=function(e,t){for(var a=[],n=0;n<e;n++)for(var o=0;o<t;o++)a.push({x:o,y:n});var r=a.map((function(e){return{x:e.x,y:e.y,w:1,h:1,i:"empty_card_[".concat(e.x,", ").concat(e.y,"]"),minW:1,maxW:1,minH:1,maxH:1,static:!1,isDraggable:!1,isResizable:!1,resizeHandles:[]}}));return{lg:r,md:r,sm:r,xs:r,xxs:r}}(R.gridRows,R.gridCols),o=n.lg.map((function(e){return e.i}));return d.a.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:0}},d.a.createElement(a,Object.assign({},t,{className:"card-layout",isDraggable:!1,isResizable:!1,layouts:n,preventCollision:!0,resizeHandles:[]}),o.map((function(e,t){return d.a.createElement("div",{key:e},d.a.createElement(he,{cardType:c.PLACEHOLDER,className:"droppable-guide",droppableId:e,key:t},d.a.createElement(_e,{cardId:e,cardType:c.PLACEHOLDER,key:e,useAnimation:!1})))}))))},Ue=d.a.memo(Ne);var Pe=function(e){e.appMode;var t=e.layout,a=e.cardSettings,n=(e.width,e.height),o=e.margin,r=e.onLayoutChange,i=e.cards,l=e.widgets,s=e.cols,f=(e.rows,e.isDraggable),h=e.isResizable,v=t;Object(u.useEffect)((function(){console.log(null===v||void 0===v?void 0:v.id)}),[null===v||void 0===v?void 0:v.id]),console.log(v);var g=Object(te.WidthProvider)(te.Responsive),p={breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:s,md:s,sm:s,xs:s,xxs:s},rowHeight:n/R.gridRows,margin:o,preventCollision:!0,compactType:null};return console.log(l),d.a.createElement("div",null,d.a.createElement(ee.a.div,{animate:{opacity:1,y:0,transition:{delay:1}},className:"card-grid-container",initial:{opacity:0,y:50}},d.a.createElement(g,Object.assign({},p,{className:"card-layout",isDraggable:null!==f&&void 0!==f&&f,isResizable:null!==h&&void 0!==h&&h,layouts:null!==t&&void 0!==t?t:{lg:[]},onDragStart:function(e,t,a,n,o,r){r.style.border="2px solid cyan",r.style.border="4px solid cyan"},onLayoutChange:r,preventCollision:!0,resizeHandles:["se"],verticalCompact:!0}),[].concat(Object(m.a)(i),Object(m.a)(l)).map((function(e,t){return d.a.createElement(ee.a.div,{className:"card-container",exit:{y:-100},id:"".concat(e.id,"_grid_container"),key:e.id,style:{width:"100%"}},d.a.createElement(he,{cardType:c.IFRAME,className:"droppable-card",droppableId:e.id,key:t},d.a.createElement(_e,{cardId:t.toString(),cardSettings:a.find((function(t){return t.id===e.id})),cardType:c.IFRAME,data:e,useAnimation:"widget"!==e.contentType},"widget"!==e.contentType?function(t,a,n,o,r){var i=e;return d.a.createElement(ce,{card:i,cardSettings:r,cardView:a,onError:n,onLoad:o,scale:t})}:function(t,a,n,o,r){return d.a.createElement(Ce,{cardSettings:r,scale:1,widget:e})})))})))),d.a.createElement(Ue,{gridSettings:p}))},We=(a(97),a(347)),ze=a(348),Be=a(71),Ge=a.n(Be),Ve=(a(279),a(41)),Fe=a(341),Ye=a(8),He=function(e){return d.a.createElement("div",Object.assign({},e,{style:Object(Ye.a)(Object(Ye.a)({},e.style||{}),{},{display:"flex",flexDirection:"column"})}))},Je=function(e){return d.a.createElement("div",Object.assign({},e,{style:Object(Ye.a)(Object(Ye.a)({},e.style||{}),{},{display:"flex"})}))},Ke=function(e){var t,a;return d.a.createElement("div",Object.assign({},e,{style:Object(Ye.a)(Object(Ye.a)({},e.style||{}),{},{width:null!==(t=null===e||void 0===e||null===(a=e.style)||void 0===a?void 0:a.width)&&void 0!==t?t:"inherit",padding:".5em"})}),e.children)},Qe=function(e){var t=e.children,a=e.onChange,n=e.value,o=Object(u.useState)(n),r=Object(y.a)(o,2),i=r[0],c=r[1];return d.a.createElement(Je,{style:{margin:".5em",justifyContent:"space-between",width:"50%"}},d.a.createElement(qe,null,t),d.a.createElement("div",{style:{paddingLeft:".5em"}},d.a.createElement(Fe.a,{checked:i,defaultChecked:!1,onChange:function(e){console.log(e.target.value),a(e.target.checked),c(e.target.checked)},style:{margin:"auto"}})))},qe=function(e){var t=e.children;return d.a.createElement("div",{style:{color:"white"}},t)},Xe=function(){var e=x(),t=(e.setRotationSpeed,e.setBlockIframeInteractions),a=(e.setShowQrCodes,e.enableIframeInteractions),n=e.setRotateLayouts,o=e.setMuteIframeAudio,r=e.enableIframeAudio,i=e.rotateLayouts;return d.a.createElement(Ke,null,d.a.createElement(ge.a,{size:600,style:{color:"white"}},"General"),d.a.createElement("div",{style:{margin:".5em"}},d.a.createElement(He,null,d.a.createElement(Qe,{onChange:function(e){return n(e)},value:i},"RotateLayouts"),d.a.createElement(Qe,{onChange:function(e){return t(e)},value:a},"Enable IFrame Interactions"),d.a.createElement(Qe,{onChange:function(e){return o(e)},value:r},"Enable IFrame Audio"))),d.a.createElement($e,null))},$e=function(){var e=C(),t=e.cardSheetUrl,a=e.layoutSheetUrl,n=e.formUrl,o=[e.parentSheetUrl,t,a,n],r=["Parent Sheet","Content","Layouts","Google Form"];return d.a.createElement(He,null,d.a.createElement(ge.a,{size:600,style:{color:"white"}},"Google Sheets"),d.a.createElement(He,{style:{padding:".5em",backgroundColor:"#1f1f1f",overflow:"hidden"}},o.map((function(e,t){return d.a.createElement(Ze,{link:null!==e&&void 0!==e?e:"not provided",title:r[t]})}))))},Ze=function(e){var t=e.title,a=e.link;return d.a.createElement(Je,{style:{padding:".5em",backgroundColor:"#1f1f1f",overflow:"hidden",justifyContent:"space-between"}},d.a.createElement(ge.a,{style:{color:"white"}},t+":  "),d.a.createElement("a",{href:a,rel:"noreferrer",style:{color:"white",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"80%"},target:"_blank"},a))},et=(a(79),a(354)),tt=a(352),at=a(343),nt=a(344),ot=a(144),rt=a.n(ot),it=a(145),ct=a(146),lt=a.n(ct),st=["dndType","className","children","dragAll","card"],ut=function(e){e.dndType;var t=e.className,a=e.children,n=e.dragAll,o=(e.card,Object(se.a)(e,st));if(!d.a.isValidElement(a))return d.a.createElement("div",null);!function(){var e=Object(u.useRef)(document.createElement("div")).current;Object(u.useEffect)((function(){if(e)return e.style.pointerEvents="none",e.style.position="absolute",e.style.height="100%",e.style.width="100%",e.style.top="0",document.body.append(e),function(){e.remove()}}),[e])}();return d.a.createElement(p.b,o,(function(e,o){var r=n?e.dragHandleProps:{};return o.isDragging&&e&&e.draggableProps&&e.draggableProps.style&&(e.draggableProps.style.left=e.draggableProps.style.offsetLeft,e.draggableProps.style.top=e.draggableProps.style.offsetTop),d.a.createElement(d.a.Fragment,null,d.a.createElement("tr",Object.assign({className:t,ref:e.innerRef},e.draggableProps,r),d.a.cloneElement(a,{provided:e})),d.a.createElement("tr",{style:{display:o.isDragging?"table-row":"none",backgroundColor:o.isDragging?"green":"none"}},d.a.cloneElement(a,{provided:e})))}))};ut.defaultProps={dragAll:!0};var dt,ft,ht=d.a.memo(ut),mt=function(e){return{display:e?"flex":"none"}},vt=function(e){var t=e.height,a=void 0===t?80:t,n=e.width,o=void 0===n?80:n,r=e.color,i=void 0===r?"green":r,c=e.ariaLabel,l=void 0===c?"circles-loading":c,s=e.wrapperStyle,u=e.wrapperClass,f=e.visible,h=void 0===f||f;return d.a.createElement("div",{className:u,"data-testid":"circles-loading",style:Object(Ye.a)(Object(Ye.a)({},mt(h)),s)},d.a.createElement("svg",{"aria-label":l,"data-testid":"circles-svg",fill:i,height:a,viewBox:"0 0 135 135",width:o,xmlns:"http://www.w3.org/2000/svg"},d.a.createElement("path",{d:"M67.447 58c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10zm9.448 9.447c0 5.523 4.477 10 10 10 5.522 0 10-4.477 10-10s-4.478-10-10-10c-5.523 0-10 4.477-10 10zm-9.448 9.448c-5.523 0-10 4.477-10 10 0 5.522 4.477 10 10 10s10-4.478 10-10c0-5.523-4.477-10-10-10zM58 67.447c0-5.523-4.477-10-10-10s-10 4.477-10 10 4.477 10 10 10 10-4.477 10-10z"},d.a.createElement("animateTransform",{attributeName:"transform",dur:"2.5s",from:"0 67 67",repeatCount:"indefinite",to:"-360 67 67",type:"rotate"})),d.a.createElement("path",{d:"M28.19 40.31c6.627 0 12-5.374 12-12 0-6.628-5.373-12-12-12-6.628 0-12 5.372-12 12 0 6.626 5.372 12 12 12zm30.72-19.825c4.686 4.687 12.284 4.687 16.97 0 4.686-4.686 4.686-12.284 0-16.97-4.686-4.687-12.284-4.687-16.97 0-4.687 4.686-4.687 12.284 0 16.97zm35.74 7.705c0 6.627 5.37 12 12 12 6.626 0 12-5.373 12-12 0-6.628-5.374-12-12-12-6.63 0-12 5.372-12 12zm19.822 30.72c-4.686 4.686-4.686 12.284 0 16.97 4.687 4.686 12.285 4.686 16.97 0 4.687-4.686 4.687-12.284 0-16.97-4.685-4.687-12.283-4.687-16.97 0zm-7.704 35.74c-6.627 0-12 5.37-12 12 0 6.626 5.373 12 12 12s12-5.374 12-12c0-6.63-5.373-12-12-12zm-30.72 19.822c-4.686-4.686-12.284-4.686-16.97 0-4.686 4.687-4.686 12.285 0 16.97 4.686 4.687 12.284 4.687 16.97 0 4.687-4.685 4.687-12.283 0-16.97zm-35.74-7.704c0-6.627-5.372-12-12-12-6.626 0-12 5.373-12 12s5.374 12 12 12c6.628 0 12-5.373 12-12zm-19.823-30.72c4.687-4.686 4.687-12.284 0-16.97-4.686-4.686-12.284-4.686-16.97 0-4.687 4.686-4.687 12.284 0 16.97 4.686 4.687 12.284 4.687 16.97 0z"},d.a.createElement("animateTransform",{attributeName:"transform",dur:"8s",from:"0 67 67",repeatCount:"indefinite",to:"360 67 67",type:"rotate"}))))},gt=a(353),pt=function(e){var t=e.x,a=e.y,n=e.children,o=e.visible,r=e.width,i=e.height,c=I();return Object(f.createPortal)(d.a.createElement(gt.a,null,o&&d.a.createElement(ee.a.div,{animate:{opacity:1,transition:{delay:.1,duration:.2,ease:"circIn"}},exit:{opacity:0},style:{backgroundColor:"white",boxShadow:"0 8px 32px 0 rgba(49, 49, 49, 0.37)",width:null!==r&&void 0!==r?r:.4*c.width,height:null!==i&&void 0!==i?i:.4*c.height,position:"absolute",x:t,y:a,transformBox:"view-box",transformOrigin:"top left",borderRadius:".5em",overflow:"hidden"}},n)),document.querySelector("#popup-container"))},yt=d.a.memo(pt),bt=function(e){var t=e.headerTitle,a=e.setFilter,n=e.setFilterDirection,o=e.className,r=e.activeFilter,i=Object(u.useState)(!0),c=Object(y.a)(i,2),l=c[0],s=c[1],f=t===r;return d.a.createElement("th",{className:null!==o&&void 0!==o?o:"editor-panel-table-header",onClick:function(){a(t),s(!l),n(l)}},t.split(" ").map((function(e){return function(e){var t,a=/^[a-z]{0,1}|\s\w/gi;return null===(t=(e=e.toLowerCase()).match(a))||void 0===t||t.forEach((function(t){e=e.replace(t,t.toUpperCase())})),e}(e)})).join(" "),f&&l?"\u25b2":f&&!l?"\u25bc":"")},Et=function(e){var t=e.card,a=t.src,n=t.id,r=t.title,i=n+"_icon",c=Object(u.useState)([0,0]),l=Object(y.a)(c,2),s=l[0],f=l[1],h=Object(u.useState)(!1),m=Object(y.a)(h,2),v=m[0],g=m[1],p=Object(u.useState)(!1),b=Object(y.a)(p,2),E=(b[0],b[1]),w=Object(u.useState)(),S=Object(y.a)(w,2),O=S[0],x=S[1];return d.a.createElement("div",{onMouseEnter:function(e){x(setTimeout((function(){var t,a=e.pageY,n=(null===(t=document.getElementById(i))||void 0===t?void 0:t.parentElement).getBoundingClientRect().x;f([n+100,a]),g(!0)}),250))},onMouseLeave:function(e){O&&(clearTimeout(O),g(!1))},style:{display:"flex"}},d.a.createElement("div",{id:i,style:{display:"flex",width:20}},d.a.createElement(lt.a,{className:t.isActive?"row-favicon-active":"row-favicon-inactive",fallbackImage:"".concat("/cupboard-dxl-display","/question_mark.svg"),src:"image"===t.contentType?a:"https://s2.googleusercontent.com/s2/favicons?domain_url=".concat(t.src),style:{width:"100%",maxWidth:20}})),d.a.createElement(yt,{visible:v,x:s[0],y:s[1]},d.a.createElement(ce,{card:t,cardView:o.GRID,objectFit:"contain",onError:function(e){},onLoad:function(e){E(!0)},scale:1})),d.a.createElement("div",{style:{marginTop:"auto",marginBottom:"auto",textAlign:"left",paddingLeft:"1em"}},r))},wt=function(){var e=S((function(e){return e.appModel.availableCards})),t=k(),a=t.clearCards,n=t.resetLayout,o=C().refreshSheets,r=Object(u.useState)(),i=Object(y.a)(r,2),s=i[0],f=i[1],h=Object(u.useState)(!0),v=Object(y.a)(h,2),g=v[0],p=v[1],b=Object(u.useState)(e),E=Object(y.a)(b,2),w=E[0],O=E[1],x=Object(u.useState)(""),j=Object(y.a)(x,2),L=j[0],A=j[1],I=Object(u.useState)(e),D=Object(y.a)(I,2),T=D[0],R=D[1];Object(u.useEffect)((function(){if(0<L.length){var e=rt.a.go(L,w.map((function(e){return e.title}))).map((function(e){return e.target})),t=w.filter((function(t){return e.includes(t.title)}));R(t)}else R(w)}),[L,w]),Object(u.useEffect)((function(){var t=s,a=Object(m.a)(e).sort((function(e,a){var n=e[t],o=a[t];if(n&&o){if(n<o)return-1;if(o<n)return 1}return 0}));!g&&a.reverse(),O(a)}),[s,e,g]);return d.a.createElement("div",{className:"contents-tab-container"},d.a.createElement(Je,{style:{padding:"0.5em"}},d.a.createElement(et.a,{onChange:function(e){return A(e.currentTarget.value)},placeholder:"search title",width:"90%"}),d.a.createElement(Je,{style:{width:"100%",justifyContent:"space-around"}},d.a.createElement("div",{style:{height:"100%",width:"10%"}},d.a.createElement(tt.a,{content:"Reload content"},d.a.createElement(at.a,{height:"100%",icon:d.a.createElement(nt.a,null),onClick:function(e){o()},width:"20%"}))),d.a.createElement(Oe,{appearance:"default",intent:"danger",onClick:function(e){n()},text:"Reset Layout"}),d.a.createElement(Oe,{appearance:"minimal",intent:"danger",onClick:function(e){a()},text:"Clear All"}))),d.a.createElement(he,{cardType:c.CLOCK,className:"table-container",droppableId:l.CARD_TABLE,isDropDisabled:!0},d.a.createElement("table",{className:"contents-tab-table"},d.a.createElement("tbody",{onClick:function(e){}},d.a.createElement("tr",null,["title","author","added"].map((function(e,t){return d.a.createElement(bt,{activeFilter:s,className:"contents-table-header",headerTitle:e,key:t,setFilter:f,setFilterDirection:p})}))))),d.a.createElement(it.Scrollbars,{autoHeight:!0,autoHeightMax:319,autoHeightMin:100},d.a.createElement("table",{style:{padding:"2em"}},d.a.createElement("tbody",null,T.map((function(e,t){var a=e.added,n=e.id,o=e.author,r=(e.interaction,e.isActive);return d.a.createElement(ht,{card:e,className:r?"content-row-active":"content-row-inactive",dndType:c.CARD_ROW,draggableId:n,index:t,isDragDisabled:r,key:t.toString()},d.a.createElement(d.a.Fragment,null,d.a.createElement("td",null,d.a.createElement(Et,{card:e})),d.a.createElement("td",null,o),d.a.createElement("td",null,V(a))))})))))))},St=function(e){var t=e.error,a=t.errorType,n=t.link,o=t.source;return d.a.createElement("div",{style:{display:"flex",padding:"1vmin",flexDirection:"column",width:"100%",marginRight:"10vmin",backgroundColor:"#421717",borderBottom:"1px solid white",boxSizing:"border-box"}},d.a.createElement("div",{style:{color:"#D14343",textTransform:"uppercase",fontWeight:"bold"}},"\u26a0 ".concat(a)),d.a.createElement("div",null,o),d.a.createElement("div",null,d.a.createElement("a",{href:n,rel:"noreferrer",style:{color:"lightblue"},target:"_blank"},n)))},Ot=function(){var e=j(),t=e.appErrors,a=e.layoutErrors,n=e.googleSheetsErrors,o=function(){var e=Object(u.useState)(null),t=Object(y.a)(e,2),a=t[0],n=t[1],o=Object(u.useState)({width:0,height:0}),r=Object(y.a)(o,2),i=r[0],c=r[1],l=Object(u.useCallback)((function(){c({width:(null===a||void 0===a?void 0:a.offsetWidth)||0,height:(null===a||void 0===a?void 0:a.offsetHeight)||0})}),[null===a||void 0===a?void 0:a.offsetHeight,null===a||void 0===a?void 0:a.offsetWidth]);return A("resize",l),Object(u.useLayoutEffect)((function(){l()}),[null===a||void 0===a?void 0:a.offsetHeight,null===a||void 0===a?void 0:a.offsetWidth]),[n,i]}(),r=Object(y.a)(o,2),i=r[0];r[1].height;return d.a.createElement("div",{className:"table-container",style:{height:400,width:500,overflowY:"scroll"}},d.a.createElement("div",{ref:i,style:{width:"100%"}},[].concat(Object(m.a)(t),Object(m.a)(a),Object(m.a)(n)).map((function(e,t){return d.a.createElement(St,{error:e,key:t})}))))},xt=function(){return d.a.createElement("div",{style:{height:"100%",pointerEvents:"all"}},d.a.createElement(Ot,null))},Ct=(a(299),a(300),function(e){var t=e.active,a=C().formUrl;return d.a.createElement("div",{style:{width:500,height:"100%",overflow:"hidden",position:"relative"}},d.a.createElement(ee.a.div,{animate:t?{opacity:0}:{},style:{position:"absolute",width:"100%",height:"100%",backgroundColor:"red",zIndex:1,top:0,left:0,opacity:.5,display:"flex",alignItems:"center",pointerEvents:t?"none":"all"}},d.a.createElement("div",{style:{width:"50%",margin:"auto",fontWeight:"bold",border:"1px solid white",padding:"1em",backgroundColor:"white",opacity:1}},"Press the Copy Layout Button before Submitting New Layout")),d.a.createElement("iframe",{frameBorder:0,marginHeight:0,marginWidth:0,src:a,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}}))}),jt=function(e){var t=e.visible,a=e.onCloseComplete,n=C(),o=n.layoutSheetUrl,r=(n.formUrl,k().activeLayout),i=Object(u.useState)(t),c=Object(y.a)(i,2),l=c[0],s=(c[1],Object(u.useState)(!1)),f=Object(y.a)(s,2),m=f[0],v=(f[1],Object(u.useState)("")),g=Object(y.a)(v,2),p=(g[0],g[1],S((function(e){return JSON.stringify(e.layoutsModel.activeLayout)})));S((function(e){var t;return JSON.stringify(null===(t=e.layoutsModel.activeLayout)||void 0===t?void 0:t.layout.lg)}));return Object(u.useEffect)((function(){}),[p,r]),h.a.createPortal(d.a.createElement(ye,{active:l,backdropOpacity:.5,containerClassName:"google-form-popup",onClose:function(){}},d.a.createElement("div",{className:"google-form-popup-inner-container"},d.a.createElement(Ie,{action:function(){},onClick:a}),d.a.createElement(He,null,d.a.createElement("div",{style:{borderBottom:"1px solid white",padding:"1vmin"}},d.a.createElement(ge.a,{color:"white",size:900},"Add a new layout"),d.a.createElement(ge.a,{color:"white",size:400},"The layout will be stored in "," ",d.a.createElement("a",{href:o,rel:"noreferrer",style:{color:"lightblue"},target:"_blank"},o))),d.a.createElement(Je,{style:{height:"50vh",padding:"4vmin",justifyContent:"space-between"}},d.a.createElement("div",{style:{width:"min-content"}}),d.a.createElement(Ct,{active:m}))))),document.querySelector("#google-form-popup"))},Lt=a(355),kt=function(){var e=S((function(e){return e.layoutsModel.externalLayouts})),t=S((function(e){return e.layoutsModel.activeLayout})),a=k().setActiveLayout;return d.a.createElement("div",null,d.a.createElement(he,{cardType:c.CLOCK,className:"table-container",droppableId:l.LAYOUT_TABLE,isDropDisabled:!1},d.a.createElement("table",null,d.a.createElement("tbody",null,d.a.createElement("tr",null,d.a.createElement("th",null,"Title"),d.a.createElement("th",null,"Date Added"),d.a.createElement("th",null,"Author")))),d.a.createElement("table",null,d.a.createElement("tbody",null,e.map((function(e,n){var o=e.id,r=(e.title,e.author),i=e.added;return d.a.createElement("tr",{key:n,onClick:function(t){return a(e)}},d.a.createElement("td",{key:n,style:{display:"flex",justifyContent:"center"}},o===(null===t||void 0===t?void 0:t.id)&&d.a.createElement(Lt.a,{color:"success"}),d.a.createElement(At,{layout:e})),d.a.createElement("td",null,V(i)),d.a.createElement("td",null,r))}))))))},At=function(e){var t=e.layout,a=Object(u.useState)(!1),o=Object(y.a)(a,2),r=o[0],i=o[1],c=Object(u.useState)([0,0]),l=Object(y.a)(c,2),s=l[0],f=l[1],h=t.title,m=I(),v=m.width,g=m.height,p=L().appMode,b=t.sources(),E=t.widgets(),w=S((function(e){return e.appModel.availableCards.filter((function(e){return b.includes(e.src)}))})),O=S((function(e){return e.appModel.availableWidgets.filter((function(e){return E.includes(e.id)}))}));return d.a.createElement("div",null,d.a.createElement("div",{onMouseEnter:function(e){var t=e.pageX,a=e.pageY;f([t,a]),i(!0)},onMouseLeave:function(e){i(!1)},style:{textDecoration:r?"underline":""}},h),p===n.EDIT&&r&&d.a.createElement(yt,{height:.5*g,visible:r,width:.5*v,x:s[0],y:s[1]},d.a.createElement("div",{style:{transform:"scale(".concat(.5,")"),transformOrigin:"inherit",height:g,width:v}},d.a.createElement(Pe,{appMode:n.DISPLAY,cardSettings:t.layoutSettings.cardSettings,cards:w,cols:R.gridCols,height:g,layout:t.layout,margin:[20,20],onLayoutChange:function(e){},rows:R.gridRows,widgets:O,width:v}))))},It=function(){var e=S((function(e){return e.layoutsModel.bufferLayout})),t=k().activeLayout,a=C().refreshSheets,n=Object(u.useState)(!1),o=Object(y.a)(n,2),r=o[0],i=o[1],c=Object(u.useState)(JSON.stringify(t)),l=Object(y.a)(c,2),s=(l[0],l[1]);return Object(u.useEffect)((function(){s(JSON.stringify(e))}),[t,e]),d.a.createElement("div",null,d.a.createElement(Ke,{style:{display:"flex",width:"100%",justifyContent:"flex-start"}},d.a.createElement(Oe,{appearance:"primary",iconBefore:d.a.createElement(ue.a,null),intent:"success",onClick:function(e){i(!0)},text:"Add New Layout",width:"55%"}),d.a.createElement("div",{style:{height:"auto",width:"10%"}},d.a.createElement(at.a,{height:"100%",icon:d.a.createElement(nt.a,null),onClick:function(e){a()},width:"20%"}))),r&&d.a.createElement(jt,{onCloseComplete:function(){a(),i(!1)},visible:r}),d.a.createElement("div",null,d.a.createElement(kt,null)))},Dt=(a(301),function(e){e.dndType;var t=e.className,a=e.children,n=(e.dragAll,e.draggableId),o=e.index,r=e.height,i=e.id,c=S((function(e){return e.layoutsModel.activeLayout})),l=null===c||void 0===c?void 0:c.layout.lg.map((function(e){return e.i})).includes(n);Object(u.useEffect)((function(){l=null===c||void 0===c?void 0:c.layout.lg.map((function(e){return e.i})).includes(n)}),[c]);return d.a.isValidElement(a)?d.a.createElement("div",{style:{display:"block",height:null!==r&&void 0!==r?r:""}},d.a.createElement(p.b,{draggableId:n,index:o},(function(e,n){return console.log(l),n.isDragging&&e&&e.draggableProps&&e.draggableProps.style&&(e.draggableProps.style.left=e.draggableProps.style.offsetLeft,e.draggableProps.style.top=e.draggableProps.style.offsetTop),d.a.createElement("div",Object.assign({className:t,id:i,ref:e.innerRef},e.draggableProps,e.dragHandleProps),d.a.cloneElement(a,{provided:e}))}))):d.a.createElement("div",null)}),Tt=function(){var e=k(),t=e.activeLayout,a=e.activeWidgets,n=S((function(e){return e.appModel.availableWidgets})),o=Object(u.useState)(n),r=Object(y.a)(o,2),i=r[0],s=r[1];return Object(u.useEffect)((function(){s(n.filter((function(e){return!(null===t||void 0===t?void 0:t.widgets().includes(e.id))})))}),[n,t,a.length]),d.a.createElement(Ke,null,d.a.createElement("div",{style:{backgroundColor:"#1f1f1f",borderRadius:".5em",overflow:"hidden",padding:"1em"}},0===i.length?d.a.createElement("div",null,"All Widgets in Use"):d.a.createElement(he,{cardType:c.CLOCK,className:"widgets-container",droppableId:l.WIDGETS_TABLE,isDropDisabled:!1},d.a.createElement(Rt,null,(function(e,a,n){return i.filter((function(e){return!(null===t||void 0===t?void 0:t.widgets().includes(e.id))})).map((function(t,o){return d.a.createElement(Dt,{className:"draggable-widget",dndType:c.WIDGET,draggableId:t.id,height:e*t.h*n,id:"widgets-tab-draggable-".concat(t.id),index:o,isDragDisabled:!1,key:o},d.a.createElement(Ce,{colWidth:a,rowHeight:n,scale:e,widget:t}))}))})))))},Rt=function(e){var t=e.children,a=Object(u.useRef)(),n=Object(u.useState)(1),o=Object(y.a)(n,2),r=o[0],i=o[1],c=I(),l=c.width,s=c.height,f=l/R.gridCols,h=s/R.gridRows;return Object(u.useEffect)((function(){a.current=document.querySelector("#editor-panel"),console.log(a.current.getBoundingClientRect().width),i(a.current.getBoundingClientRect().width/l)}),[l]),d.a.createElement("div",null,t(1.5*r,f,h))},Mt=function(){return d.a.createElement(Ve.d,null,d.a.createElement(Ve.b,null,d.a.createElement(Ve.a,null,"Content"),d.a.createElement(Ve.a,null,"Widgets"),d.a.createElement(Ve.a,null,"Layouts"),d.a.createElement(Ve.a,null,"App Settings"),d.a.createElement(Ve.a,null,"Issues ",d.a.createElement(_t,null))),d.a.createElement(Ve.c,null,d.a.createElement(wt,null)),d.a.createElement(Ve.c,null,d.a.createElement(Tt,null)),d.a.createElement(Ve.c,null,d.a.createElement(It,null)),d.a.createElement(Ve.c,null,d.a.createElement(Xe,null)),d.a.createElement(Ve.c,null,d.a.createElement(xt,null)))},_t=function(){var e=j().allErrors;return d.a.createElement("div",{style:{backgroundColor:e.length>0?"#D14343":"#52BD95",opacity:.5,borderRadius:"50%",width:20,height:20,aspectRatio:"1/1",fontSize:"70%",display:"flex",justifyContent:"center",alignItems:"center",marginLeft:"1em"}},50<e.length?"50+":e.length)},Nt=(a(302),a(345)),Ut=a(346),Pt=a(150),Wt=function(e){var t=e.title,a=e.children;return d.a.createElement(ge.a,{className:"menu-input-row",size:800,style:{display:"flex",color:"white",padding:".25em",alignItems:"center"}},t,a)},zt=function(e){var t=e.setScale,a=e.scale,n=Object(u.useState)(a),o=Object(y.a)(n,2),r=o[0],i=o[1];return Object(u.useEffect)((function(){t(r)}),[r]),d.a.createElement(Je,null,d.a.createElement(at.a,{icon:d.a.createElement(Nt.a,{size:30}),onClick:function(){i(r-.1)},style:{width:"30%",height:"100%"}}),d.a.createElement("input",{defaultValue:.5,onChange:function(e){},style:{width:30},type:"text",value:a.toString().slice(0,3)}),d.a.createElement(at.a,{icon:d.a.createElement(Ut.a,{size:30}),onClick:function(){i(r+.1)},style:{width:"30%",height:"100%"}}))},Bt=function(e){var t,a=e.card,n=O(),o=n.setCardScale,r=n.setCardBackgroundColor,i=n.cardBackgroundColor,c=n.clearEditingCard,l=n.setCardContentFit,s=n.cardContentFit,f=k().activeLayout,h=Object(u.useState)(null===f||void 0===f?void 0:f.getCardSettings(a.id)),m=Object(y.a)(h,2),v=m[0],g=(m[1],Object(u.useState)(null===f||void 0===f?void 0:f.getCardSettings(a.id))),p=Object(y.a)(g,2),b=p[0],E=p[1];return Object(u.useEffect)((function(){E(null===f||void 0===f?void 0:f.getCardSettings(a.id)),console.log(b)}),[a.id]),d.a.createElement(ee.a.div,{style:{top:"6%",height:"95%",width:"inherit",pointerEvents:"all",position:"absolute",zIndex:1e3,backgroundColor:"#2d2d2d",boxSizing:"border-box"}},d.a.createElement(Ke,{style:{width:"auto"}},d.a.createElement(He,null,d.a.createElement(Wt,{title:"Background Color:"},d.a.createElement("input",{className:"nodrag",defaultValue:"rbga(0,0,0,0)",onChange:function(e){r({cardId:a.id,color:e.target.value})},type:"color",value:i})),d.a.createElement(Wt,{title:"Scale: "},d.a.createElement(zt,{scale:null!==(t=null===v||void 0===v?void 0:v.scale)&&void 0!==t?t:0,setScale:function(e){o({cardId:a.id,scale:e})}})),d.a.createElement(Wt,{title:"Object Fit: "},d.a.createElement(Pt.a,{className:"basic-single",classNamePrefix:"select",defaultValue:s,onChange:function(e){console.log(e),l({cardId:a.id,contentFit:e.value})},style:{option:{color:"black"}},options:["contain","fill","cover","scale-down","none"].map((function(e){return{value:e,label:e}}))})),d.a.createElement(Je,{style:{padding:"2vmin"}}),d.a.createElement(Oe,{width:"100%",height:60,text:"Exit Card Editor",onClick:function(e){c()}}))))},Gt=function(){var e=L(),t=e.appMode,a=e.editingCard,o=Object(u.useState)(!1),r=Object(y.a)(o,2),i=r[0],c=r[1],l=U()("editor-panel",{"editor-panel-full":!i,hidden:t===n.DISPLAY,"editor-panel-minimized":i}),s=U()("editor",{"editor-visible":t===n.EDIT});return h.a.createPortal(d.a.createElement(Ge.a,{bounds:{left:0,top:0,right:window.innerWidth-50,bottom:window.innerHeight-50},defaultClassName:l,defaultPosition:{x:100,y:100},handle:".editor-panel-handle"},d.a.createElement("div",{className:s,id:"editor-panel"},d.a.createElement(Ft,null,d.a.createElement(Yt,{icon:d.a.createElement(We.a,null),onMouseUp:function(){c(!1)}}),d.a.createElement(Yt,{icon:d.a.createElement(ze.a,null),onMouseUp:function(){c(!0)}})),a&&d.a.createElement(Bt,{card:a}),d.a.createElement(Mt,null))),document.querySelector("#editor-panel-container"))},Vt=d.a.memo(Gt),Ft=function(e){var t=e.children;return d.a.createElement("div",{className:"editor-panel-handle panel-header"},t)},Yt=function(e){var t=e.icon,a=e.onMouseUp;return d.a.createElement("div",{className:"window-button",onMouseUp:a},t)},Ht=a(349),Jt=function(){var e=w((function(e){return e.appModel.toggleAppMode})),t=Object(Ht.a)((function(){e()})),a={position:"absolute",width:50,height:50,border:R.showModeSwitchButton?"1px solid red":"none",bottom:0,left:0,opacity:0};return h.a.createPortal(d.a.createElement(ee.a.div,{style:Object(Ye.a)(Object(Ye.a)({},a),{},{backgroundColor:"white"}),whileTap:{backgroundColor:"green",opacity:1}},d.a.createElement("div",Object.assign({style:a},t)),","),document.querySelector("#mode-change-button"))},Kt=function(e){var t=e.children;e.padding;return d.a.createElement("div",{style:{width:"100vw",height:"100vh"}},t)},Qt=a(320),qt=a(350),Xt=function(e){var t=e.seconds,a=e.onEnd,n=Object(u.useState)(t),o=Object(y.a)(n,2),r=o[0],i=o[1];return Object(u.useEffect)((function(){if(0==r&&a(),r){var e=setInterval((function(){i(r-1)}),1e3);return function(){return clearInterval(e)}}}),[r]),d.a.createElement("div",null,d.a.createElement("h1",null,r))},$t=d.a.createContext({setVisible:function(e){},sheetsAreLoaded:!1}),Zt=function(){var e=L().sheetsAreLoaded,t=C(),a=t.urlQueryLink;t.fetchTopLevelSheet;console.log(e);var n=Object(u.useState)(!0),o=Object(y.a)(n,2),r=o[0],i=o[1];Object(u.useEffect)((function(){e&&i(!1)}),[e]);return d.a.createElement($t.Provider,{value:{setVisible:i,sheetsAreLoaded:e}},d.a.createElement(gt.a,null,r&&d.a.createElement(ee.a.div,{animate:"in",exit:"out",style:{width:"40%",height:"50%",minHeight:"fit-content",display:"flex",flexDirection:"column",textAlign:"center",position:"absolute",justifyContent:"center",zIndex:100,left:"50%",x:"-50%",top:"50%",borderRadius:"10px",backdropFilter:"blur(10px)",border:" 1px solid rgba(255, 255, 255, 0.294)",boxShadow:"0 8px 32px 0 rgba(49, 49, 49, 0.37)",padding:"1em",opacity:0},variants:{in:{opacity:[0,1],y:["-30%","-50%"]},out:{y:"-60%",opacity:0}}},!e&&a&&d.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},d.a.createElement(ge.a,{size:900},"Loading Content from Google Sheets"),d.a.createElement(Qt.a,{size:100})),!a&&d.a.createElement(ea,null))))},ea=function(){var e=Object(u.useContext)($t).setVisible,t=C().fetchTopLevelSheet;return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},d.a.createElement(qt.a,{size:100})),d.a.createElement(ge.a,{size:900}),d.a.createElement(ge.a,{size:900},"No Google Sheet Provided via URL! ",d.a.createElement("br",null),d.a.createElement("br",null),"Switching to backup sheet in ","".concat(R.noUrlTimeout),"s.",d.a.createElement(Xt,{onEnd:function(){e(!1),t(R.backupParentSheetUrl)},seconds:R.noUrlTimeout}),"Visit"," ",d.a.createElement("a",{href:"https://github.com/NCSU-Libraries/cupboard-dxl-display/wiki",rel:"noreferrer",target:"_blank"},"Cupboard Wiki")," ","for more information on setting up your Google Sheets for Cupboard."))},ta=function(){var e,t=C(),a=t.fetchTopLevelSheet,o=t.setUrlSheet,r=k(),i=r.activeLayout,c=r.setBufferLayout,l=r.activeCards,s=r.activeWidgets,f=(C().urlQueryLink,L()),h=f.appMode,g=f.sheetsAreLoaded,p=function(){var e=Object(b.c)().search;return d.a.useMemo((function(){return new URLSearchParams(e)}),[e])}();e=function(){o(p.get("url"));var e=p.get("url");e&&a(e)},Object(u.useEffect)(e,[]);var y=I(),E=y.width,w=y.height;return d.a.createElement(d.a.Fragment,null,d.a.createElement(Z,null),d.a.createElement(Jt,null),d.a.createElement(Zt,null),g&&d.a.createElement(_,null,d.a.createElement(T,null,d.a.createElement(vt,{visible:g}),d.a.createElement(Vt,null),d.a.createElement(Kt,null,d.a.createElement(v.a,null,i&&g&&d.a.createElement(Pe,{appMode:h,cardSettings:i.layoutSettings.cardSettings,cards:Object(m.a)(l),cols:R.gridCols,height:w,isDraggable:h===n.EDIT,isResizable:h===n.EDIT,layout:i.layout,margin:[20,20],onLayoutChange:function(e){var t={lg:e,md:e,sm:e,xs:e,xxs:e};h===n.EDIT&&i.setGridLayout(t),c(t)},rows:R.gridRows,widgets:Object(m.a)(s),width:E}))))))},aa=function(){return d.a.createElement(g.a,null,d.a.createElement(ta,null))},na=a(22),oa=a.n(na),ra=a(24),ia=a(31),ca=a(1),la=a(3);!function(e){e.CROSS_ORIGIN="CROSS_ORIGIN"}(dt||(dt={})),function(e){e.MALFORMED_URL="MALFORMED_URL"}(ft||(ft={}));var sa=function(){function e(t){Object(ca.a)(this,e),this.url=void 0,this.errors=void 0,this.warnings=void 0,this.errors=[],this.warnings=[],this.url=t}return Object(la.a)(e,[{key:"validate",value:function(e){var t;console.log(this.errors);var a=function(e){var t=[];new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)||t.push(ft.MALFORMED_URL);return t}(this.url);(t=this.warnings).push.apply(t,Object(m.a)(a)),console.log(a)}},{key:"isValid",value:function(){return 0===this.errors.length}},{key:"errorMessages",value:function(){var e=this,t=[];return this.errors.map((function(a){if(a===dt.CROSS_ORIGIN)t.push("Blocked a frame with origin ".concat(e.url,"; from accessing a cross-origin frame."));else console.log("error did not match an error enum")})),t}}]),e}();var ua=function(){function e(t,a){var n;Object(ca.a)(this,e),this.id=void 0,this.src=void 0,this.title=void 0,this.added=void 0,this.backgroundColor=void 0,this.scale=void 0,this.author=void 0,this.interaction=void 0,this.contentType=void 0,this.metaData=void 0,this.validator=void 0,this.isActive=void 0,this.failed=void 0,this.id="row_".concat(a,"_").concat(t.title),this.src=t.src,this.title=t.title,this.added=new Date(t.added),this.author=t.author,this.interaction=i[t.interaction],this.contentType=function(e){return"string"===typeof e&&/[./](gif|jpg|jpeg|tiff|png)$/i.test(e)}(n=this.src)?"image":function(e){return"string"===typeof e&&/[./](mp4|webm|mov)$/i.test(e)}(n)?"video":function(e){return"string"===typeof e&&e.includes("embed")}(n)?"embed":function(e){return"string"===typeof e&&e.includes("https")}(n)?"website":"widget","widget"===this.contentType&&t.widgetType?(this.metaData={widgetType:t.widgetType},this.id=t.widgetType):(this.metaData={src:t.src,title:t.title,added:new Date(t.added),sourceId:t.src,author:t.author},this.id=t.src),this.isActive=!1,this.validator=new sa(this.src),this.failed=!1}return Object(la.a)(e,[{key:"setActive",value:function(e){this.isActive=e}},{key:"fail",value:function(){console.log(this.validator.errors),this.failed=!0}}]),e}();var da=function(){function e(t){Object(ca.a)(this,e),this.id=void 0,this.contentType=void 0,this.w=void 0,this.h=void 0,this.isActive=void 0,this.id=t.id,this.w=t.w,this.h=t.h,this.isActive=!1,this.contentType="widget"}return Object(la.a)(e,[{key:"setActive",value:function(e){this.isActive=e}}]),e}(),fa={clock:{id:"clock",w:2,h:2},info:{id:"info",w:1,h:1}},ha={isLoaded:!1,availableCards:[],availableWidgets:Object.values(fa).map((function(e){return new da(e)})),activeWidgets:[],activeCards:[],appErrors:[],rotateLayouts:!0,rotationSpeed:R.rotationDuration,appMode:n.DISPLAY,editingCard:void 0,manageViewModeChange:Object(s.f)((function(e,t){switch(e.setAppMode(t),t){case n.EDIT:case n.DISPLAY:case n.CYCLE:}})),toggleAppMode:Object(s.f)((function(e,t,a){switch((0,a.getState)().appMode){case n.EDIT:e.setEditingCard(void 0),e.setAppMode(n.DISPLAY);break;case n.DISPLAY:e.setAppMode(n.EDIT);case n.CYCLE:}})),setAvailableCards:Object(s.b)((function(e,t){e.availableCards=t})),setActiveCards:Object(s.b)((function(e,t){e.activeCards=t})),setActiveWidgets:Object(s.b)((function(e,t){e.activeWidgets=t})),setAppMode:Object(s.b)((function(e,t){e.appMode=t})),setRotationSpeed:Object(s.b)((function(e,t){e.rotationSpeed=t})),setRotateLayouts:Object(s.b)((function(e,t){e.rotateLayouts=t})),setEditingCard:Object(s.b)((function(e,t){e.editingCard=t})),addAppError:Object(s.b)((function(e,t){var a=e.appErrors.map((function(e){return JSON.stringify(e)})),n=JSON.stringify(t);a.includes(n)||e.appErrors.push(t)})),onCardSheetLoadSuccess:Object(s.g)((function(e,t){return t.googleSheetsModel.setAppGoogleSheetData}),function(){var e=Object(ia.a)(oa.a.mark((function e(t,a,n){var o;return oa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=n.getState,a.payload.getSheetRows("CARDS").then((function(e){var a,n=e.map((function(e){return{src:e.src,title:e.title,added:e.added,sourceid:e.sourceid,author:e.author,interaction:e.interaction}})),r=o().availableCards,i=Object(ra.a)(n.entries());try{for(i.s();!(a=i.n()).done;){var c=Object(y.a)(a.value,2),l=c[0],s=c[1];o().availableCards.map((function(e){return e.src})).includes(s.src)||r.push(new ua(s,l))}}catch(u){i.e(u)}finally{i.f()}t.setAvailableCards(r)}));case 2:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()),onSetActiveLayout:Object(s.g)((function(e,t){return t.layoutsModel.setActiveLayout}),function(){var e=Object(ia.a)(oa.a.mark((function e(t,a,n){var o,r,i,c,l,s;return oa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=n.getState,r=new Set(a.payload.sources()),i=o(),c=i.availableWidgets,t.setActiveWidgets(c.filter((function(e){return a.payload.widgets().includes(e.id)}))),l=o().availableCards.map((function(e){return r.has(e.id)?e.setActive(!0):e.setActive(!1),e})),s=o().availableCards.filter((function(e){return r.has(e.id)})),t.setAvailableCards(l),t.setActiveCards(s);case 8:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()),onSwapCardContent:Object(s.g)((function(e,t){return t.layoutsModel.swapCardContent}),function(){var e=Object(ia.a)(oa.a.mark((function e(t,a,n){var o,r;return oa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=n.getState,(r=o().activeCards.map((function(e){return e.id===a.payload.targetId?o().availableCards.find((function(e){return e.id===a.payload.sourceId})):e})))&&t.setActiveCards(r);case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}())},ma=ha,va={rotationSpeed:R.rotationDuration,enableQrCodes:!0,enableIframeInteractions:!1,rotateLayouts:!0,enableIframeAudio:!1,setRotationSpeed:Object(s.b)((function(e,t){e.rotationSpeed=t})),setShowQrCodes:Object(s.b)((function(e,t){e.enableQrCodes=t})),setEnableIframeInteractions:Object(s.b)((function(e,t){e.enableIframeInteractions=t})),setRotateLayouts:Object(s.b)((function(e,t){e.rotateLayouts=t})),setEnableIframeAudio:Object(s.b)((function(e,t){e.enableIframeAudio=t}))},ga=a(148),pa=a.n(ga),ya=function(){function e(t,a){Object(ca.a)(this,e),this.title=void 0,this.sheetId=void 0,this.sheets=void 0,this.title=t,this.sheetId=a,this.sheets=new Map}return Object(la.a)(e,[{key:"getSheetRows",value:function(e){var t=this;return new Promise((function(a,n){var o=t.sheets.get(e);o?a(o.map((function(e){return e}))):n("sheet with title ".concat(e," did not exist"))}))}},{key:"addSheet",value:function(e,t){this.sheets.set(e,t)}}]),e}(),ba={layoutDataGoogleSheet:null,cardDataGoogleSheet:null,parentGoogleSheet:void 0,urlSheet:null,parentSheetUrl:void 0,formUrl:void 0,layoutSheetUrl:void 0,cardSheetUrl:void 0,googleSheetsErrors:[],sheetsAreLoaded:Object(s.c)([function(e){return[e.layoutDataGoogleSheet,e.cardDataGoogleSheet,e.parentGoogleSheet]}],(function(e){return e.every((function(e){return null!==e}))})),fetchTopLevelSheet:Object(s.f)((function(e,t){try{Sa("TOP_LEVEL",t).then((function(a){var n=a.rows[0];e.setFormUrl(n.googleForm),e.setLayoutsSheetUrl(n.layoutsSheet),e.setCardSheetUrl(n.cardsSheet),e.setParentSheetUrl(t),e.fetchSheet([{name:"LAYOUTS",url:wa(n.layoutsSheet)},{name:"CARDS",url:wa(n.cardsSheet)}])})).catch((function(t){e.setLayoutsSheetUrl(wa("".concat("/cupboard-dxl-display","/LAYOUTS_BACKUP.csv"))),e.setCardSheetUrl(wa("".concat("/cupboard-dxl-display","/CARDS_BACKUP.csv"))),e.fetchSheet([{name:"LAYOUTS",url:"".concat("/cupboard-dxl-display","/LAYOUTS_BACKUP.csv")},{name:"CARDS",url:"".concat("/cupboard-dxl-display","/CARDS_BACKUP.csv")}])}))}catch(o){var a,n;console.log("DOING BACKUP"),e.addGoogleSheetError({errorType:"failed to fetch master google sheet",description:"failed to get the mater google sheet, reverting to local svg",source:null!==(a=Object({NODE_ENV:"production",PUBLIC_URL:"/cupboard-dxl-display",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SHEET_URL)&&void 0!==a?a:"NA",link:null!==(n=Object({NODE_ENV:"production",PUBLIC_URL:"/cupboard-dxl-display",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SHEET_URL)&&void 0!==n?n:"NA"})}})),fetchSheet:Object(s.f)(function(){var e=Object(ia.a)(oa.a.mark((function e(t,a,n){var o,r,i,c;return oa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=n.getState,r=a.map((function(e){return Sa(e.name,e.url)})),i=o(),c=i.cardSheetUrl,console.log(r),c?Promise.allSettled(r).then((function(e){var a,n=new ya("DSC App",c),o=[],r=Object(ra.a)(e.entries());try{for(r.s();!(a=r.n()).done;){var i=Object(y.a)(a.value,2),l=(i[0],i[1]);"fulfilled"==l.status&&(o.push(l),n.addSheet(l.value.sheetTitle,l.value.rows)),l.status}}catch(s){r.e(s)}finally{r.f()}t.setAppGoogleSheetData(n),n.getSheetRows("CARDS").then((function(e){t.setCardDataGoogleSheet(e)})),n.getSheetRows("LAYOUTS").then((function(e){t.setLayoutDataGoogleSheet(e)}))})):t.addGoogleSheetError({errorType:"no url for cards provided",description:"",source:"",link:""});case 5:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()),fetchAppGoogleSheet:Object(s.f)(function(){var e=Object(ia.a)(oa.a.mark((function e(t,a,n){var o,r,i;return oa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=n.getState,r=Sa("CARDS",o().cardSheetUrl),i=Sa("LAYOUTS",o().layoutSheetUrl),Promise.allSettled([r,i]).then((function(e){var a=o().cardSheetUrl;if(a){var n,r=new ya("DSC App",a),i=[],c=Object(ra.a)(e.entries());try{for(c.s();!(n=c.n()).done;){var l=Object(y.a)(n.value,2),s=(l[0],l[1]);"fulfilled"==s.status&&(i.push(s),r.addSheet(s.value.sheetTitle,s.value.rows)),"rejected"==s.status&&t.addGoogleSheetError({errorType:"failed to fetch layout or card sheet",description:"could not retrieve google sheet",source:"LAYOUTS/CARD",link:"NA"})}}catch(u){c.e(u)}finally{c.f()}t.setAppGoogleSheetData(r),r.getSheetRows("CARDS").then((function(e){t.setCardDataGoogleSheet(e)})),r.getSheetRows("LAYOUTS").then((function(e){t.setLayoutDataGoogleSheet(e)}))}}));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()),refreshSheets:Object(s.f)(function(){var e=Object(ia.a)(oa.a.mark((function e(t,a,n){var o,r,i;return oa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=n.getState,r=o(),(i=r.parentSheetUrl)&&t.fetchTopLevelSheet(i);case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()),setAppGoogleSheetData:Object(s.b)((function(e,t){e.parentGoogleSheet=t})),setCardDataGoogleSheet:Object(s.b)((function(e,t){e.cardDataGoogleSheet=t})),setLayoutDataGoogleSheet:Object(s.b)((function(e,t){e.layoutDataGoogleSheet=t})),setParentSheetUrl:Object(s.b)((function(e,t){e.parentSheetUrl=t})),setFormUrl:Object(s.b)((function(e,t){e.formUrl=t})),setCardSheetUrl:Object(s.b)((function(e,t){e.cardSheetUrl=t})),setLayoutsSheetUrl:Object(s.b)((function(e,t){e.layoutSheetUrl=t})),setUrlSheet:Object(s.b)((function(e,t){e.urlSheet=t})),addGoogleSheetError:Object(s.b)((function(e,t){var a=e.googleSheetsErrors.map((function(e){return JSON.stringify(e)})),n=JSON.stringify(t);a.includes(n)||e.googleSheetsErrors.push(t)}))},Ea=ba;function wa(e){var t=e.split("/")[5],a=e.split("gid=")[1];return"https://docs.google.com/spreadsheets/d/".concat(t,"/export?format=csv&gid=").concat(a)}function Sa(e,t){var a;return new Promise((function(n,o){try{pa.a.parse(t,{download:!0,header:!0,delimiter:",",dynamicTyping:!0,complete:function(t){a=t.data,console.log(a),n({rows:a,sheetTitle:e})}})}catch(r){o("failed to get sheet")}}))}var Oa={layout:{lg:[{w:2,h:1,x:0,y:0,i:"clock",moved:!1,static:!0},{w:2,h:2,x:2,y:0,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/DuBois_Racism.png",moved:!1,static:!1},{w:1,h:2,x:0,y:1,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg",moved:!1,static:!1}],md:[{w:2,h:1,x:0,y:0,i:"clock",moved:!1,static:!0},{w:2,h:2,x:2,y:0,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/DuBois_Racism.png",moved:!1,static:!1},{w:1,h:2,x:0,y:1,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg",moved:!1,static:!1}],sm:[{w:2,h:1,x:0,y:0,i:"clock",moved:!1,static:!0},{w:2,h:2,x:2,y:0,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/DuBois_Racism.png",moved:!1,static:!1},{w:1,h:2,x:0,y:1,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg",moved:!1,static:!1}],xs:[{w:2,h:1,x:0,y:0,i:"clock",moved:!1,static:!0},{w:2,h:2,x:2,y:0,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/DuBois_Racism.png",moved:!1,static:!1},{w:1,h:2,x:0,y:1,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg",moved:!1,static:!1}],xxs:[{w:2,h:1,x:0,y:0,i:"clock",moved:!1,static:!0},{w:2,h:2,x:2,y:0,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/DuBois_Racism.png",moved:!1,static:!1},{w:1,h:2,x:0,y:1,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg",moved:!1,static:!1}]},layoutSettings:{gridSettings:{defaultBackgroundColor:"red"},cardSettings:[]},widgets:[]},xa={scale:1,backgroundColor:void 0,objectPosition:"center"},Ca={defaultBackgroundColor:"red"},ja=function(){function e(t){Object(ca.a)(this,e),this.title=void 0,this.author=void 0,this.added=void 0,this.id=void 0,this.sourceLayout=void 0,this.layoutSettings=void 0,this.layout=void 0,this.layoutWidgets=void 0;var a=function(e){var t=JSON.parse(e.layout);return t.layout?t:Oa}(t),n=a.layout;this.id=t.title+"_"+t.timestamp,this.title=t.title,this.author=t.author,this.added=new Date(t.timestamp.split(" ")[0]),this.sourceLayout=JSON.parse(t.layout).layout,this.layoutSettings=JSON.parse(t.layout).layoutSettings?JSON.parse(t.layout).layoutSettings:{cardSettings:n.lg.map((function(e){return Object(Ye.a)({id:e.i},xa)})),gridSettings:Ca},this.layoutWidgets=JSON.parse(t.layout).layoutWidgets?JSON.parse(t.layout).layoutWidgets:[],this.layout=n}return Object(la.a)(e,[{key:"swapCard",value:function(e){for(var t=0,a=Object.entries(this.layout);t<a.length;t++){var n,o=Object(y.a)(a[t],2),r=o[0],i=o[1],c=Object(ra.a)(i.entries());try{for(c.s();!(n=c.n()).done;){var l=Object(y.a)(n.value,2),s=l[0];l[1].i==e.targetId&&(i[s].i=e.sourceId)}}catch(u){c.e(u)}finally{c.f()}this.layout[r]=i}}},{key:"removeCard",value:function(e){for(var t=0,a=Object.entries(this.layout);t<a.length;t++){var n,o=Object(y.a)(a[t],2),r=o[0],i=o[1],c=Object(ra.a)(i.entries());try{for(c.s();!(n=c.n()).done;){var l=Object(y.a)(n.value,2);l[0],l[1];this.layout[r]=i.filter((function(t){return t.i!==e}))}}catch(s){c.e(s)}finally{c.f()}}}},{key:"clearCards",value:function(){for(var e=0,t=Object.entries(this.layout);e<t.length;e++){var a,n=Object(y.a)(t[e],2),o=n[0],r=n[1],i=Object(ra.a)(r.entries());try{for(i.s();!(a=i.n()).done;){var c=Object(y.a)(a.value,2);c[0],c[1];this.layout[o]=[]}}catch(l){i.e(l)}finally{i.f()}}}},{key:"addCard",value:function(e,t){if(!this.sources().includes(e.id)){for(var a=0,n=Object.entries(this.layout);a<n.length;a++){var o=Object(y.a)(n[a],2),r=o[0],i=(o[1],{x:t.x,y:t.y,w:1,h:1,i:e.id});this.layout[r].push(i)}this.layoutSettings.cardSettings.map((function(e){return e.id})).includes(e.id)||this.layoutSettings.cardSettings.push({id:e.id,scale:1,backgroundColor:void 0,objectPosition:"center"})}}},{key:"addWidget",value:function(e,t){this.layoutWidgets.push(e);for(var a=0,n=Object.entries(this.layout);a<n.length;a++){var o=Object(y.a)(n[a],2),r=o[0],i=(o[1],{x:t.x,y:t.y,w:1,h:1,i:e.id});this.layout[r].push(i)}}},{key:"resetLayout",value:function(){this.layout=JSON.parse(JSON.stringify(this.sourceLayout))}},{key:"setGridLayout",value:function(e){for(var t=0,a=Object.entries(this.layout);t<a.length;t++){var n,o=Object(y.a)(a[t],2),r=o[0],i=o[1],c=Object(ra.a)(i.entries());try{for(c.s();!(n=c.n()).done;){var l=Object(y.a)(n.value,2);l[0],l[1];this.layout[r]=e[r]}}catch(s){c.e(s)}finally{c.f()}}}},{key:"sources",value:function(){return this.layout.lg.map((function(e){return e.i}))}},{key:"widgets",value:function(){return this.layout.lg.filter((function(e){return Object.keys(fa).includes(e.i)})).map((function(e){return e.i}))}},{key:"getCardSettings",value:function(e){return this.layoutSettings.cardSettings.filter((function(t){return t.id===e}))[0]}},{key:"setCardScale",value:function(e,t){this.sources().includes(e)&&(this.layoutSettings.cardSettings.filter((function(t){return t.id===e}))[0].scale=t)}},{key:"setCardBackgroundColor",value:function(e,t){this.sources().includes(e)&&(this.layoutSettings.cardSettings.filter((function(t){return t.id===e}))[0].backgroundColor=t)}},{key:"setCardContentFit",value:function(e,t){this.sources().includes(e)&&(this.layoutSettings.cardSettings.filter((function(t){return t.id===e}))[0].contentFit=t)}},{key:"layoutToString",value:function(){var e={layout:this.layout.lg,layoutSettings:this.layoutSettings};return JSON.stringify(e)}}]),e}();var La={appModel:ma,appSettingsModel:va,layoutsModel:{activeLayout:void 0,externalLayouts:[],layoutErrors:[],cardScale:void 0,cardBackgroundColor:void 0,cardContentFit:void 0,bufferLayout:a(149),layoutsString:Object(s.c)([function(e){return e.bufferLayout}],(function(e){return JSON.stringify(e)})),onSetAppGoogleSheetData:Object(s.g)((function(e,t){return t.googleSheetsModel.setAppGoogleSheetData}),(function(e,t,a){var n=a.getState;t.payload.getSheetRows("LAYOUTS").then((function(t){var a=n().externalLayouts,o=new Set(a.map((function(e){return e.id})));console.log(t);var r,i=Object(ra.a)(t);try{for(i.s();!(r=i.n()).done;){var c=r.value;try{var l=new ja(c);console.log(l),o.has(l.id)||a.push(l)}catch(f){var s,u;console.log("FAILED TO MAKE LAYOUT DATA"),e.addLayoutError({errorType:"failed to read layout row",description:"failed to read layout row ".concat(null!==(s=c.title)&&void 0!==s?s:"NO TITLE PROVIDED"),source:null!==(u=c.title)&&void 0!==u?u:"NO TITLE PROVIDED",link:"none"})}}}catch(h){i.e(h)}finally{i.f()}if(R.useStaticLayout);else{var d=a[0];d&&(e.setActiveLayout(d),e.setBufferLayout(d.layout))}e.setExternalLayouts(a)}))})),addLayoutError:Object(s.b)((function(e,t){var a=e.layoutErrors.map((function(e){return JSON.stringify(e)})),n=JSON.stringify(t);a.includes(n)||e.layoutErrors.push(t)})),onToggleViewMode:Object(s.g)((function(e,t){return t.appModel.manageViewModeChange}),(function(e,t,a){var n=a.getState,o=(a.getStoreState,n()),r=o.activeLayout;o.bufferLayout;if(r){var i=n().bufferLayout;r.layout=i,r.setGridLayout(i),e.setActiveLayout(r)}})),setActiveLayout:Object(s.b)((function(e,t){e.activeLayout=t,e.bufferLayout=JSON.parse(JSON.stringify(t.layout))})),setNextLayout:Object(s.f)((function(e,t,a){var n=(0,a.getState)(),o=n.externalLayouts,r=n.activeLayout;if(r){var i=o.map((function(e){return e.id})).indexOf(null===r||void 0===r?void 0:r.id),c=o[(i+1)%o.length];e.setActiveLayout(c)}})),setExternalLayouts:Object(s.b)((function(e,t){e.externalLayouts=t})),swapCardContent:Object(s.f)((function(e,t,a){var n=a.getState,o=n().activeLayout;if(o){var r=n().bufferLayout;o.layout=r,o.swapCard(t),e.setActiveLayout(o)}})),deleteCard:Object(s.f)((function(e,t,a){var n=a.getState,o=n().activeLayout;if(o){var r=n().bufferLayout;o.layout=r,o.removeCard(t),e.setActiveLayout(o)}})),clearCards:Object(s.f)((function(e,t,a){var n=(0,a.getState)().activeLayout;n&&(n.clearCards(),e.setBufferLayout(n.layout),e.setActiveLayout(n))})),addCard:Object(s.f)((function(e,t,a){var n=a.getState,o=(0,a.getStoreState)().appModel,r=o.availableCards,i=o.availableWidgets,c=t.sourceId,l=t.targetPosition,s=[].concat(Object(m.a)(r),Object(m.a)(i)).find((function(e){return e.id==c})),u=n().activeLayout;if(u&&s){var d=n().bufferLayout;u.setGridLayout(d),null===u||void 0===u||u.addCard(s,l),e.setActiveLayout(u)}})),resetLayout:Object(s.f)((function(e,t,a){var n=a.getState;if(n().activeLayout){var o=n().activeLayout;null===o||void 0===o||o.resetLayout(),o&&e.setActiveLayout(o)}})),setBufferLayout:Object(s.b)((function(e,t){e.bufferLayout=JSON.parse(JSON.stringify(t))})),setCardSettings:Object(s.b)((function(e,t){var a;console.log(t);var n=null===(a=e.activeLayout)||void 0===a?void 0:a.sourceLayout.layoutSettings.cardSettings;console.log(n)})),setCardScale:Object(s.b)((function(e,t){var a,n,o=t.cardId,r=t.scale;console.log(r);null===(a=e.activeLayout)||void 0===a||a.layoutSettings.cardSettings;null===(n=e.activeLayout)||void 0===n||n.setCardScale(o,r),e.cardScale=r})),setCardBackgroundColor:Object(s.b)((function(e,t){var a,n=t.cardId,o=t.color;console.log(o),null===(a=e.activeLayout)||void 0===a||a.setCardBackgroundColor(n,o),e.cardBackgroundColor=o})),setCardContentFit:Object(s.b)((function(e,t){var a,n=t.cardId,o=t.contentFit;console.log(o),null===(a=e.activeLayout)||void 0===a||a.setCardContentFit(n,o),e.cardContentFit=o})),updateLayout:Object(s.b)((function(e,t){var a=e.activeLayout;a&&(a.swapCard(t),e.activeLayout=a)})),animationCounter:0,setAnimationCounter:Object(s.b)((function(e,t){e.animationCounter+=1})),transitionLayout:Object(s.f)((function(e,t,a){var n=a.getState;e.setAnimationCounter(n().animationCounter+1),setTimeout((function(){e.setNextLayout()}),1e3)}))},googleSheetsModel:Ea},ka=Object(s.d)(La,{name:"Cuboard App Store"});h.a.render(d.a.createElement(s.a,{store:ka},d.a.createElement(aa,null)),document.querySelector("#root"))},79:function(e,t,a){},97:function(e,t,a){}},[[317,1,2]]]);
//# sourceMappingURL=main.1438acc8.chunk.js.map