(this.webpackJsonpcuboard=this.webpackJsonpcuboard||[]).push([[0],{105:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){},210:function(e,t,n){},246:function(e,t,n){},247:function(e,t,n){},249:function(e,t,n){},250:function(e,t,n){},258:function(e,t,n){},259:function(e,t,n){},260:function(e,t,n){},261:function(e,t,n){},262:function(e,t,n){},283:function(e,t,n){},284:function(e,t,n){},285:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=(n(124),n(125),n(11)),i=n(14),c=Object(i.e)(),l=c.useStoreActions,s=(c.useStoreDispatch,c.useStoreState);function u(e,t){Object(a.useEffect)((function(){var n=function(n){var a=null===e||void 0===e?void 0:e.current;a&&!a.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}var d,m,f,v,g,p,h=n(19),y=(n(80),n(126),n(48));!function(e){e.DISPLAY="DISPLAY",e.EDIT="EDIT",e.CYCLE="CYCLE"}(d||(d={})),function(e){e.GRID="GRID",e.PREVIEW="PREVIEW",e.FULL_SCREEN="FULL_SCREEN"}(m||(m={})),function(e){e.CARD_TABLE_DATA="CARD_TABLE_DATA",e.DISPLAY_CARD="DISPLAY_CARD"}(f||(f={})),function(e){e.ACTIVE="ACTIVE",e.STATIC="STATIC",e.FIXED="FIXED",e.IMAGE="IMAGE"}(v||(v={})),function(e){e.PLACEHOLDER="PLACEHOLDER",e.CLOCK="CLOCK",e.IFRAME="IFRAME",e.CARD_ROW="CARD_ROW",e.LAYOUT="LAYOUT",e.WIDGET="WIDGET"}(g||(g={})),function(e){e.LAYOUT_TABLE="LAYOUT_TABLE",e.CARD_TABLE="CARD_TABLE",e.CARD_GRID="CARD_GRID",e.WIDGETS_TABLE="WIDGETS_TABLE"}(p||(p={}));var b={idleTime:1e7,sheetLink:"https://docs.google.com/spreadsheets/d/1BR1AQ5Zmt_o_0dOm9AvDht0G3Q6RXQUhX71Vi4H7tTU/edit#gid=0",defaultIframeScale:.5,defaultEmbedScale:1,defaultLayoutName:"NewStaticLayout2",formLink:"https://forms.gle/nc3UQFtFUtSaF5mu6",widgetIds:["clock","group label","info"],gridRows:6,gridCols:4,showModeSwitchButton:!1,useStaticLayout:!1},E=(n(89),n(295)),w=n(296),S=n(297),C=n(21),x=n.n(C),O=n(311),L=function(e){var t=e.onClick,n=e.text,a=e.appearance,r=e.className,i=e.iconBefore,c=e.width,l=e.height,s=e.style,u=e.containerClass,d=e.fontSize,m=e.intent;return o.a.createElement("div",{className:u,onMouseUp:t,style:{width:c}},o.a.createElement(O.a,{appearance:null!==a&&void 0!==a?a:"default",className:r,cursor:"pointer",fontSize:d,height:null!==l&&void 0!==l?l:void 0,iconBefore:null!==i&&void 0!==i?i:void 0,intent:null!==m&&void 0!==m?m:"none",style:s,width:null!==c&&void 0!==c?c:void 0},n))},D=(n(208),function(e){var t=e.children,n=e.active,a=e.containerClassName,r=e.onClose,i=e.backdropOpacity;return o.a.createElement("div",{className:"modal-container",style:{display:n?"flex":"none"}},o.a.createElement(A,{onClose:r,backdropOpacity:null!==i&&void 0!==i?i:0}),o.a.createElement("div",{className:a},t))}),A=function(e){var t=e.onClose;e.backdropOpacity;return o.a.createElement("div",{onMouseUp:t,style:{opacity:.7,zIndex:200},className:"pop-up-background"})},j=(n(209),function(e){var t,n=e.children,a=e.className,r=e.padding,i=e.flexDirection,c={padding:null!==r&&void 0!==r?r:"0em",flexDirection:null!==i&&void 0!==i?i:"column"};return o.a.createElement("div",{style:c,className:null!==(t="panel "+a)&&void 0!==t?t:""},n)}),I=function(){var e=function(e){var t=Object(a.useState)(e),n=Object(r.a)(t,2),o=n[0],i=n[1];return[o,function(){return i(!o)}]}(!1),t=Object(r.a)(e,2),n=t[0],i=t[1],c=s((function(e){return e.appModel.appMode}));return x.a.createPortal(o.a.createElement(o.a.Fragment,null,c===d.DISPLAY?o.a.createElement("div",{style:{pointerEvents:"all"}},o.a.createElement(T,{onClose:i,active:n}),o.a.createElement(L,{fontSize:"xx-large",height:"4vh",width:"35vw",iconBefore:o.a.createElement(E.a,null),onClick:i,appearance:"primary",text:"Learn how to use this display",className:"how-to-use-button"})):o.a.createElement(o.a.Fragment,null)),document.querySelector("#how-to-use-button"))},T=function(e){var t=e.active,n=e.onClose;return o.a.createElement(D,{active:t,containerClassName:"how-to-use-popup",onClose:n,backdropOpacity:0},o.a.createElement(j,{padding:"1em"},o.a.createElement(w.a,null,"Connect Labtop"),o.a.createElement("hr",null),o.a.createElement(S.a,null,"Connect your labtop to use this screen as a display."),o.a.createElement("img",{className:"how-to-image",src:"/cupboard-dxl-display/labtopdiagram.png"}),o.a.createElement(w.a,null,"Explore Content"),o.a.createElement("hr",null),o.a.createElement(S.a,null,"Click on a card to explore data related content."),o.a.createElement("img",{className:"how-to-image",src:"/cupboard-dxl-display/masonary.png"})))},R=n(1),k=n(2),M=n(3),N=n(4),_=(n(210),n(20)),G=n.n(_),P=n(109),U=n.n(P),W=n(110),F=n.n(W),V=function(e){var t=e.card,n=e.scale,i=Object(a.useState)(!1),c=Object(r.a)(i,2),l=c[0],s=c[1],u=Object(a.useState)(!0),d=Object(r.a)(u,2),m=d[0],f=(d[1],Object(a.useState)(!1)),v=Object(r.a)(f,2),g=v[0],p=v[1],h=G()("iframe-view-overlay",{"iframe-view-overlay-hidden":g,"iframe-view-overlay-loading":!g}),y=G()("iframe-container",{"iframe-container-hidden":!m}),b={border:"none",transform:"scale(".concat(n,")"),width:"".concat(1/n*100,"%"),height:"".concat(1/n*100,"%"),transformOrigin:"top left"},E=t.src,w=t.contentType;return o.a.createElement("div",{onDoubleClick:function(){s(!l)},className:y},o.a.createElement("div",{className:h},o.a.createElement(U.a,{type:"Grid",color:"white",height:80,width:80})),"video"===w?o.a.createElement(z,{src:t.src,onReady:function(e){p(!0)}}):"image"===w?o.a.createElement("img",{style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:"center"},src:E,onLoad:function(e){p(!0)}}):o.a.createElement("iframe",{onLoad:function(e){p(!0)},src:E,style:l?{width:"100%",height:"100%",border:"5px blue"}:b}))},B=o.a.memo(V),z=function(e){var t=e.src,n=e.onReady;return o.a.createElement("div",{className:"player-wrapper"},o.a.createElement(F.a,{className:"react-player",url:t,width:"100%",height:"100%",onReady:n,controls:!0,playing:!0,muted:!0}))},Y=(o.a.PureComponent,n(15)),H=n(39),K=(n(246),n(247),n(298)),J=function(){return o.a.createElement("div",{className:"pulsar"},o.a.createElement(K.a,{size:200}))},q=["children","className","cardType"],Q=function(e){var t=e.children,n=e.className,a=(e.cardType,Object(Y.a)(e,q));return o.a.createElement(H.c,Object.assign({},a,{type:"DEFAULT"}),(function(e,a){return o.a.createElement("div",Object.assign({},e.innerRef,{ref:e.innerRef,className:a.isDraggingOver?"droppable-hovered "+n:"droppable "+n}),o.a.createElement("div",{className:a.isDraggingOver?"droppable-overlay droppable-overlay-visible":"droppable-overlay droppable-overlay-hidden"},o.a.createElement(J,null)),t,e.placeholder)}))},X=(n(249),function(){var e=Object(a.useState)(new Date),t=Object(r.a)(e,2),n=t[0],i=t[1];return Object(a.useEffect)((function(){var e=setInterval((function(){i(new Date)}),1e3);return function(){clearInterval(e)}})),o.a.createElement("div",{style:{height:"100%",padding:".25em",width:"100%",fontSize:"4vw",fontWeight:600,color:"white",boxSizing:"border-box"}},o.a.createElement("div",null,"Data Experience Lab"),o.a.createElement("div",null,n.toLocaleTimeString("en-IT",{hour12:!0,timeStyle:"short"})))}),$=(n(250),n(309)),Z=n(112),ee=n.n(Z),te=(n(258),function(e){var t=e.data,n=(e.className,Object(a.useState)(!1)),i=Object(r.a)(n,2);i[0],i[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"card-footer"},o.a.createElement("h2",{style:{}},t.title),o.a.createElement("p",null,"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&apos standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book"," ")))}),ne=(n(259),n(299)),ae=function(e){var t=e.onClick;e.action;return o.a.createElement("div",{className:"delete-button-container",onMouseUp:t,onClick:t,onTouchEnd:function(e){}},o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(ne.a,{size:30})))},oe=(n(260),n(300)),re=function(e){var t=e.onClick;Object(a.useRef)();return o.a.createElement("div",{className:"settings-button-container",onMouseUp:t},o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(oe.a,{size:15})))},ie=(n(261),n(301)),ce=n(302),le=function(e){var t=e.title,n=e.children;return o.a.createElement("div",{className:"menu-input-row"},t,n)},se=function(e){var t=e.setScale,n=e.scale;return o.a.createElement("div",{className:"scale-controls-grid"},o.a.createElement(L,{containerClass:"scale-controls-left",height:20,iconBefore:o.a.createElement(ie.a,{size:30}),onClick:function(){t(-.1)},width:20}),o.a.createElement("input",{onChange:function(e){t(parseInt(e.target.value))},style:{width:30},defaultValue:.5,type:"text",value:n.toString().slice(0,3)}),o.a.createElement(L,{containerClass:"scale-controls-right",height:20,iconBefore:o.a.createElement(ce.a,{size:30}),onClick:function(){t(.1)},width:20}))},ue=function(e){var t=e.isShown,n=e.setScale,r=e.setBackgroundColor,i=e.setShowMenu,c=e.scale,l=Object(a.useRef)(null),s=u(l,(function(){i(!1)})),d={display:t?"flex":"none"};return o.a.createElement("div",Object.assign({className:"menu-container",ref:l,style:d},s),o.a.createElement(le,{title:"Background Color:"},o.a.createElement("input",{className:"nodrag",defaultValue:"rbga(0,0,0,0)",onChange:function(e){r(e.target.value)},type:"color"})),o.a.createElement(le,{title:"Scale: "},o.a.createElement(se,{scale:c,setScale:n})))},de=function(e){var t=e.cardType,n=e.children,c=(e.activeKey,e.cardId),f=e.data,v=e.onClick,p=Object(a.useRef)(null),h=s((function(e){return e.appModel.appMode})),y=Object(a.useState)(m.GRID),E=Object(r.a)(y,2),w=E[0],S=E[1],C=l((function(e){return e.layoutsModel.deleteCard})),x=Object(i.i)((function(){return{cardView:m.GRID,setCardView:Object(i.b)((function(e,t){e.cardView=t})),scale:"embed"===(null===f||void 0===f?void 0:f.contentType)?b.defaultEmbedScale:b.defaultIframeScale,setScale:Object(i.b)((function(e,t){e.scale+=t})),cardBackgroundColor:"",setBackgroundColor:Object(i.b)((function(e,t){e.cardBackgroundColor=t})),transform:Object(i.c)([function(e){return e.cardView}],(function(e){if(e==m.PREVIEW){var t,n=null===(t=p.current)||void 0===t?void 0:t.getBoundingClientRect();if(fe(p,1),n)return me(n)}return e===m.GRID&&fe(p,0),"translate(".concat(0,"px, ",0,"px)")})),setShowMenu:Object(i.b)((function(e,t){e.showMenu=t})),toggleMenu:Object(i.b)((function(e){e.showMenu=!e.showMenu})),showMenu:!1,cardType:t,cardClass:Object(i.c)([function(e){return e.cardView}],(function(e){return G()("card",{"card-edit":h===d.EDIT,"card-display":h===d.DISPLAY&&e==m.GRID,"card-preview":e===m.PREVIEW,"card-fullscreen":e===m.FULL_SCREEN,"card-empty":h===d.EDIT&&!n,"card-empty-hidden":!n&&h==d.DISPLAY,"card-locked":L.cardType===g.CLOCK&&h===d.EDIT})})),cardInfoClass:Object(i.c)((function(e){return G()("info",{"info-hidden":h===d.EDIT,"info-display":h===d.DISPLAY,"info-preview":e.cardView===m.PREVIEW})})),handleCardPress:Object(i.g)((function(e,t,n){var a=n.getState;if(console.log(a().cardClass),h===d.DISPLAY&&void 0!=c)switch(a().cardView){case m.GRID:"widget"!==(null===f||void 0===f?void 0:f.contentType)&&(e.setCardView(m.PREVIEW),console.log("SETTING CARD VIEW TO PREVIEW"));break;case m.PREVIEW:e.setCardView(m.GRID)}}))}}),[h],(function(e){return{devTools:!1}})),O=Object(r.a)(x,2),L=O[0],D=O[1],A={scale:L.scale,setScale:D.setScale,setBackgroundColor:D.setBackgroundColor,setShowMenu:D.setShowMenu},j=G()("card-modal-backdrop",{"card-modal-backdrop-active":w===m.PREVIEW||w===m.FULL_SCREEN,"card-modal-backdrop-inactive":w===m.GRID}),I=G()("card-child-container",{"card-child-container-preview":L.cardView===m.PREVIEW,"card-child-container-fullscreen":L.cardView===m.FULL_SCREEN,"card-child-container-grid":L.cardView===m.GRID}),T=function(e){var t=e.keyCode,n=e.action,a=e.disabled;o.a.useEffect((function(){return a||r(),function(){i()}}));var r=function(){document.addEventListener("keydown",c)},i=function(){document.removeEventListener("keydown",c)},c=function(e){e.keyCode===t&&(e.preventDefault(),n(e))};return{enable:r,disable:i}}({keyCode:27,action:function(){w!==m.FULL_SCREEN&&w!==m.PREVIEW||S(m.GRID)},disabled:!1}),R=(T.enable,T.disable,function(){if(h==d.EDIT&&f)return o.a.createElement(o.a.Fragment,null,o.a.createElement(ae,{onClick:function(){console.log("got delete button click"),C(f.id)},action:function(){C(f.id)}}),o.a.createElement(re,{onClick:function(e){D.toggleMenu()}}))}),k=function(){if(w===m.PREVIEW&&f&&"widget"!==f.contentType)return o.a.createElement(te,{className:L.cardInfoClass,data:f})},M=Object(a.useRef)(null);u(M,(function(e){e.preventDefault(),console.log("clicked outside"),L.cardView==m.PREVIEW&&D.setCardView(m.GRID)}));var N={width:"fit-content",position:"absolute",bottom:0,zIndex:1,right:0,transform:"translate(50%, 50%)"};return o.a.createElement("div",{className:L.cardClass,ref:p,style:{willChange:"transform",height:"100%",transform:L.transform,backgroundColor:L.cardBackgroundColor}},n?o.a.createElement("div",{className:j},o.a.createElement("div",{className:I,onMouseUp:function(){D.handleCardPress(),v&&v()},ref:M},function(){if(L.cardView===m.PREVIEW&&"widget"!==(null===f||void 0===f?void 0:f.contentType)){var e,t=f;return o.a.createElement("div",{style:N},o.a.createElement(ee.a,{size:128,value:null!==(e=null===t||void 0===t?void 0:t.src)&&void 0!==e?e:""}))}}(),"widget"!==(null===f||void 0===f?void 0:f.contentType)?[R(),k()]:[R()],n(L.scale),o.a.createElement(ue,Object.assign({},A,{isShown:L.showMenu}))),function(){if(w===m.FULL_SCREEN)return o.a.createElement(ve,{onClick:function(){S(m.GRID)}})}()):o.a.createElement(o.a.Fragment,null))},me=function(e){var t=window.innerWidth,n=window.innerHeight,a=t/2-60*(window.innerWidth/100)/2,o=n/2-40*(window.innerWidth/100)/2,r=e.x,i=e.y,c=a-r,l=o-i;return a<r&&(c=r-a,c*=-1),o<i&&(l=i-o,l*=-1),"translate(".concat(c,"px, ").concat(l,"px)")},fe=function(e,t){if(e){var n,a,o=null===(n=e.current)||void 0===n||null===(a=n.parentElement)||void 0===a?void 0:a.parentElement;o&&(o.style.zIndex=t.toString())}},ve=function(e){var t=e.onClick;return o.a.createElement("div",{className:"return-button-container"},o.a.createElement(L,{onClick:t,text:"Return",width:300}))};var ge=o.a.memo(de),pe=function(e){var t=e.gridSettings,n=Object(y.WidthProvider)(y.Responsive),a=function(e,t){for(var n=[],a=0;a<e;a++)for(var o=0;o<t;o++)n.push({x:o,y:a});var r=n.map((function(e){return{x:e.x,y:e.y,w:1,h:1,i:"empty_card_[".concat(e.x,", ").concat(e.y,"]"),minW:1,maxW:1,minH:1,maxH:1,static:!1,isDraggable:!1,isResizable:!1,resizeHandles:[]}}));return{lg:r,md:r,sm:r,xs:r,xxs:r}}(b.gridRows,b.gridCols),r=a.lg.map((function(e){return e.i}));return o.a.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:0}},o.a.createElement(n,Object.assign({},t,{className:"card-layout",layouts:a,resizeHandles:[],preventCollision:!0,isDraggable:!1,isResizable:!1}),r.map((function(e,t){return o.a.createElement("div",{key:e},o.a.createElement(Q,{key:t,droppableId:e,cardType:g.PLACEHOLDER,className:"droppable-guide"},o.a.createElement(ge,{key:e,cardId:e,cardType:g.PLACEHOLDER})))}))))},he=o.a.memo(pe);var ye=function(){var e=s((function(e){return e.appModel.appMode})),t=l((function(e){return e.layoutsModel.setBufferLayout})),n=s((function(e){return e.layoutsModel.activeLayout})),i=Object(a.useState)({x:window.innerWidth,y:window.innerHeight}),c=Object(r.a)(i,2),u=c[0],m=(c[1],Object(a.useMemo)((function(){return e===d.EDIT}),[e])),f=s((function(e){return e.appModel.activeCards})),v=s((function(e){return e.appModel.activeWidgets})),p=Object(a.useState)(null===n||void 0===n?void 0:n.layout),E=Object(r.a)(p,2),w=E[0],S=E[1],C=Object(a.useRef)(null),x=Object(a.useRef)(""),O=Object(y.WidthProvider)(y.Responsive);Object(a.useEffect)((function(){console.log(window.innerHeight/b.gridRows),S(null===n||void 0===n?void 0:n.layout),null!==n&&void 0!==n&&n.layout&&(C.current=null===n||void 0===n?void 0:n.layout)}),[f,n,v]);var L={breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:b.gridCols,md:b.gridCols,sm:b.gridCols,xs:b.gridCols,xxs:b.gridCols},rowHeight:u.y/b.gridRows,margin:[20,20],preventCollision:!0,compactType:null};return o.a.createElement("div",null,o.a.createElement("div",{className:"card-grid-container"},o.a.createElement(O,Object.assign({},L,{className:"card-layout",isDraggable:m,isResizable:m,layouts:w,onDragStart:function(e,t,n,a,o,r){r.style.border="2px solid cyan",r.style.border="4px solid cyan"},onLayoutChange:function(e){console.log("CHANGED THE LAYOUT");var n={lg:e,md:e,sm:e,xs:e,xxs:e};C.current=n,t(n)},preventCollision:!0,resizeHandles:["se"],verticalCompact:!0}),[].concat(Object(h.a)(f),Object(h.a)(v)).map((function(e,t){return o.a.createElement("div",{className:"card-container",draggable:!0,key:e.id},o.a.createElement(Q,{cardType:g.IFRAME,className:"droppable-card",droppableId:e.id,key:t},o.a.createElement(ge,{activeKey:x,cardId:t.toString(),cardType:g.IFRAME,data:e,key:t.toString(),onClick:function(){x.current=t.toString()}},"widget"!==e.contentType?function(t){var n=e;return o.a.createElement(B,{card:n,scale:t})}:function(t){return function(e){var t=void 0;switch(e.id){case"clock":t=o.a.createElement(ge,{cardType:g.CLOCK,onClick:function(){console.log("clock clicked")}},(function(e){return o.a.createElement(X,null)}));break;case"info":t=o.a.createElement(ge,{cardType:g.CLOCK},(function(e){return o.a.createElement(I,null)}))}return console.log(t),t}(e)})))})))),o.a.createElement(he,{gridSettings:L}))},be=o.a.memo(ye),Ee=(n(262),n(25)),we={uniforms:{time:{value:0}},vertexShader:"\n    vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n    vec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n    vec3 permute(vec3 x) { return mod289(((x*34.0)+1.0)*x); }\n  \n    float snoise(vec2 v) {\n        const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                            0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                            -0.577350269189626,  // -1.0 + 2.0 * C.x\n                            0.024390243902439); // 1.0 / 41.0\n        vec2 i  = floor(v + dot(v, C.yy) );\n        vec2 x0 = v -   i + dot(i, C.xx);\n        vec2 i1;\n        i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n        vec4 x12 = x0.xyxy + C.xxzz;\n        x12.xy -= i1;\n        i = mod289(i); // Avoid truncation effects in permutation\n        vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n            + i.x + vec3(0.0, i1.x, 1.0 ));\n  \n        vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n        m = m*m ;\n        m = m*m ;\n        vec3 x = 2.0 * fract(p * C.www) - 1.0;\n        vec3 h = abs(x) - 0.5;\n        vec3 ox = floor(x + 0.5);\n        vec3 a0 = x - ox;\n        m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n        vec3 g;\n        g.x  = a0.x  * x0.x  + h.x  * x0.y;\n        g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n        return 130.0 * dot(m, g);\n    }\n  \n  \n    \n  \n    uniform float u_time;\n    uniform vec2 u_randomisePosition;\n  \n    varying float vDistortion;\n    varying float xDistortion;\n    varying vec2 vUv;\n  \n    void main() {\n        vUv = uv;\n        vDistortion = snoise(vUv.xx * 3. - u_randomisePosition * 0.15);\n        xDistortion = snoise(vUv.yy * 1. - u_randomisePosition * 0.05);\n        vec3 pos = position;\n        pos.z += (vDistortion * 35.);\n        pos.x += (xDistortion * 25.);\n  \n        gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n    }\n    ",fragmentShader:"\n    vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n    vec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n    vec3 permute(vec3 x) { return mod289(((x*34.0)+1.0)*x); }\n  \n    float snoise(vec2 v) {\n        const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                            0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                            -0.577350269189626,  // -1.0 + 2.0 * C.x\n                            0.024390243902439); // 1.0 / 41.0\n        vec2 i  = floor(v + dot(v, C.yy) );\n        vec2 x0 = v -   i + dot(i, C.xx);\n        vec2 i1;\n        i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n        vec4 x12 = x0.xyxy + C.xxzz;\n        x12.xy -= i1;\n        i = mod289(i); // Avoid truncation effects in permutation\n        vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n            + i.x + vec3(0.0, i1.x, 1.0 ));\n  \n        vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n        m = m*m ;\n        m = m*m ;\n        vec3 x = 2.0 * fract(p * C.www) - 1.0;\n        vec3 h = abs(x) - 0.5;\n        vec3 ox = floor(x + 0.5);\n        vec3 a0 = x - ox;\n        m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n        vec3 g;\n        g.x  = a0.x  * x0.x  + h.x  * x0.y;\n        g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n        return 130.0 * dot(m, g);\n    }\n  \n  \n  \n  \n  \n    vec3 rgb(float r, float g, float b) {\n      return vec3(r / 255., g / 255., b / 255.);\n  }\n  \n  vec3 rgb(float c) {\n      return vec3(c / 255., c / 255., c / 255.);\n  }\n  \n  uniform vec3 u_bg;\n  uniform vec3 u_bgMain;\n  uniform vec3 u_color1;\n  uniform vec3 u_color2;\n  uniform float u_time;\n  \n  varying vec2 vUv;\n  varying float vDistortion;\n  \n  void main() {\n      vec3 bg = rgb(u_bg.r, u_bg.g, u_bg.b);\n      vec3 c1 = rgb(u_color1.r, u_color1.g, u_color1.b);\n      vec3 c2 = rgb(u_color2.r, u_color2.g, u_color2.b);\n      vec3 bgMain = rgb(u_bgMain.r, u_bgMain.g, u_bgMain.b);\n  \n      float noise1 = snoise(vUv + u_time * 0.08);\n      float noise2 = snoise(vUv * 2. + u_time * 0.1);\n  \n      vec3 color = bg;\n      color = mix(color, c1, noise1 * 0.6);\n      color = mix(color, c2, noise2 * .4);\n  \n      color = mix(color, mix(c1, c2, vUv.x), vDistortion);\n  \n      float border = smoothstep(0.1, 0.6, vUv.x);\n  \n      color = mix(color, bgMain, 1. -border);\n  \n      gl_FragColor = vec4(color, 1.0);\n  }\n    "},Se=n(303),Ce=n(314),xe=n(12);function Oe(e){if(e){var t=new Date(e),n=""+(t.getMonth()+1),a=""+t.getDate(),o=t.getFullYear();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),[o,n,a].join("-")}return"faulty date"}function Le(e,t){return Math.floor(Math.random()*(t-e+1)+e)}var De=new xe.Vector2(1,2);function Ae(e,t,n){return new xe.Vector3(e,t,n)}var je={pink:Ae(182,9,76),brightPink:Ae(241,3,66),darkPurple:Ae(42,8,56),orange:Ae(244,93,31),darkgrey:Ae(50,50,50),lightgrey:Ae(150,150,150),red:Ae(204,0,0)},Ie={u_bg:{type:"v3",value:je.lightgrey},u_bgMain:{type:"v3",value:je.lightgrey},u_color1:{type:"v3",value:je.lightgrey},u_color2:{type:"v3",value:je.lightgrey},u_time:{type:"f",value:0},u_randomisePosition:{type:"v2",value:De}},Te=function(e){var t=e.position,n=Object(a.useRef)(),r=0,i=0,c=Le(0,32),l=Le(0,32),s=!1;return Object(Ee.b)((function(e){e.clock;n.current.uniforms.u_randomisePosition.value=new xe.Vector2(i,i),n.current.uniforms.u_color1.value=new xe.Vector3(function(e,t,n){return Math.floor(192+64*Math.cos((e*e-t*t)/300+n))}(c,l,r/2),function(e,t,n){return Math.floor(192+64*Math.sin((e*e*Math.cos(n/4)+t*t*Math.sin(n/3))/300))}(c,l,r/2),function(e,t,n){return Math.floor(192+64*Math.sin(5*Math.sin(n/9)+((e-100)*(e-100)+(t-100)*(t-100))/1100))}(c,l,r/2)),n.current.uniforms.u_time.value=r,r%.1===0&&(!1===s?(c-=1)<=0&&(s=!0):(c+=1)>=32&&(s=!1)),i+=.01,r+=.01})),o.a.createElement("mesh",{position:t,rotation:[xe.MathUtils.degToRad(0),xe.MathUtils.degToRad(0),xe.MathUtils.degToRad(90)]},o.a.createElement("planeGeometry",{attach:"geometry",args:[400,window.innerWidth/2,45,45]}),o.a.createElement("shaderMaterial",{attach:"material",vertexShader:we.vertexShader,fragmentShader:we.fragmentShader,uniforms:Ie,ref:n}))},Re=function(){var e=Object(a.useRef)();return o.a.createElement(Ee.a,{gl:{antialias:!1,alpha:!1}},o.a.createElement(Se.a,{ref:e,position:[0,0,0],fov:75,aspect:window.innerWidth/window.innerHeight,near:.1,far:1e3}),o.a.createElement(Te,{position:[0,0,-100],faceResolution:100}),o.a.createElement(Ce.a,null))},ke=function(){var e=s((function(e){return e.appModel.appMode})),t=Object(a.useState)({x:window.innerWidth,y:window.innerHeight}),n=Object(r.a)(t,2),i=(n[0],n[1],Object(a.useState)({backgroundColor:"gray"})),c=Object(r.a)(i,2),l=c[0],u=c[1];Object(a.useEffect)((function(){var t=e==d.EDIT;u({position:"absolute",height:"100vh",width:"100vw",top:0,left:0,backgroundColor:t?"white":"gray",transition:"background-color 0.5s ease"})}),[e]);var m=G()("background-container",{"background-container-display-mode":e==d.DISPLAY,"background-container-edit-mode":e==d.EDIT});return x.a.createPortal(o.a.createElement("div",{style:l,className:m},e===d.EDIT?o.a.createElement("div",{style:{position:"absolute",height:"100vh",width:"100vw",top:0,left:0,backgroundColor:"lightgrey",transition:"background-color 0.5s ease"}}):o.a.createElement("div",{className:"background-container"},o.a.createElement("div",{className:"shader-container"},o.a.createElement(Re,null)),o.a.createElement("div",{className:"particle-container"}))),document.querySelector("#background"))},Me=n(117),Ne=(n(105),n(306)),_e=n(307),Ge=n(50),Pe=n.n(Ge),Ue=(n(70),n(310)),We=n(115),Fe=n.n(We),Ve=n(116),Be=function(e){var t=e.children,n=e.padding;return o.a.createElement("div",{style:{display:"flex",flexDirection:"row",padding:n}},t)},ze=["dndType","className","children","dragAll"],Ye=function(e){e.dndType;var t=e.className,n=e.children,a=e.dragAll,r=Object(Y.a)(e,ze);return o.a.isValidElement(n)?o.a.createElement(H.b,r,(function(e,r){var i=a?e.dragHandleProps:{};return o.a.createElement(o.a.Fragment,null,o.a.createElement("tr",Object.assign({className:t,ref:e.innerRef},e.draggableProps,i),o.a.cloneElement(n,{provided:e})),o.a.createElement("tr",{style:{display:r.isDragging?"table-row":"none",backgroundColor:r.isDragging?"green":"none"}},o.a.cloneElement(n,{provided:e})))})):o.a.createElement("div",null)};Ye.defaultProps={dragAll:!0};var He,Ke,Je=o.a.memo(Ye),qe=function(e){var t=e.headerTitle,n=e.setFilter,i=e.setFilterDirection,c=e.className,l=e.activeFilter,s=Object(a.useState)(!0),u=Object(r.a)(s,2),d=u[0],m=u[1],f=t===l;return o.a.createElement("th",{className:null!==c&&void 0!==c?c:"editor-panel-table-header",onClick:function(){n(t),m(!d),i(d)}},function(e){var t=e.split(" ").map((function(e){return function(e){var t,n=/^[a-z]{0,1}|\s\w/gi;return null===(t=(e=e.toLowerCase()).match(n))||void 0===t||t.forEach((function(t){e=e.replace(t,t.toUpperCase())})),e}(e)})).join(" ");return t}(t),f&&d?"\u25b2":f&&!d?"\u25bc":"")},Qe=function(e){var t=e.card;return o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("img",{className:t.isActive?"row-favicon-active":"row-favicon-inactive",src:"https://s2.googleusercontent.com/s2/favicons?domain_url=".concat(t.src)}),o.a.createElement("div",{style:{marginTop:"auto",marginBottom:"auto",textAlign:"left"}},t.src))},Xe=function(){var e=s((function(e){return e.appModel.availableCards})),t=l((function(e){return e.layoutsModel.clearCards})),n=l((function(e){return e.layoutsModel.resetLayout})),i=Object(a.useState)(),c=Object(r.a)(i,2),u=c[0],d=c[1],m=Object(a.useState)(!0),f=Object(r.a)(m,2),v=f[0],y=f[1],b=Object(a.useState)(e),E=Object(r.a)(b,2),w=E[0],S=E[1],C=Object(a.useState)(""),x=Object(r.a)(C,2),O=x[0],D=x[1],A=Object(a.useState)(e),j=Object(r.a)(A,2),I=j[0],T=j[1];Object(a.useEffect)((function(){if(0<O.length){var e=Fe.a.go(O,w.map((function(e){return e.title}))).map((function(e){return e.target})),t=w.filter((function(t){return e.includes(t.title)}));T(t)}else T(w)}),[O,w]),Object(a.useEffect)((function(){var t=u,n=Object(h.a)(e).sort((function(e,n){var a=e[t],o=n[t];if(a&&o){if(a<o)return-1;if(o<a)return 1}return 0}));!v&&n.reverse(),S(n)}),[u,e,v]);return o.a.createElement("div",{className:"contents-tab-container"},o.a.createElement(Be,{padding:"0.5em"},o.a.createElement(Ue.a,{onChange:function(e){return D(e.currentTarget.value)},placeholder:"search title",width:"80%"}),o.a.createElement(L,{appearance:"default",intent:"danger",onClick:function(e){n()},text:"Reset Layout"}),o.a.createElement(L,{appearance:"minimal",intent:"danger",onClick:function(e){t()},text:"Clear All"})),o.a.createElement(Q,{cardType:g.CLOCK,className:"table-container",droppableId:p.CARD_TABLE,isDropDisabled:!0},o.a.createElement("table",{className:"contents-tab-table"},o.a.createElement("tbody",null,o.a.createElement("tr",null,["title","added","sourceId","author","interaction"].map((function(e,t){return o.a.createElement(qe,{activeFilter:u,className:"contents-table-header",headerTitle:e,key:t,setFilter:d,setFilterDirection:y})}))))),o.a.createElement(Ve.Scrollbars,{autoHeight:!0,autoHeightMax:319,autoHeightMin:100,onScrollFrame:function(e){return console.log(e)}},o.a.createElement("table",{style:{padding:"2em"}},o.a.createElement("tbody",null,I.map((function(e,t){var n=e.added,a=e.src,r=e.author,i=e.interaction,c=e.sourceId,l=e.isActive;return o.a.createElement(Je,{className:l?"content-row-active":"content-row-inactive",dndType:g.CARD_ROW,draggableId:c,index:t,isDragDisabled:l,key:t.toString()},o.a.createElement(o.a.Fragment,null,o.a.createElement("td",null,o.a.createElement(Qe,{card:e})),o.a.createElement("td",null,Oe(n)),o.a.createElement("td",null,a),o.a.createElement("td",null,r),o.a.createElement("td",null,i)))})))))))},$e=n(36),Ze=(n(282),n(283),n(304)),et=n(305),tt=(n(284),function(e){var t=e.visible,n=e.onCloseComplete,i=(s((function(e){return e.layoutsModel.activeLayout})),Object(a.useState)(t)),c=Object(r.a)(i,2),l=c[0],u=(c[1],Object(a.useState)(!1)),d=Object(r.a)(u,2),m=d[0],f=d[1];console.log("HELLO IM HERE");var v=s((function(e){return JSON.stringify(e.layoutsModel.activeLayout)}));console.log(v);var g=G()("copy-field-container",{"copy-field-container-closed":m});return x.a.createPortal(o.a.createElement(D,{onClose:n,active:l,containerClassName:"google-form-popup",backdropOpacity:.5},o.a.createElement("div",{className:"google-form-popup-inner-container"},o.a.createElement(w.a,{color:m?"green":""},"1. Press the Copy Button"),o.a.createElement(w.a,null,m?"2. Fill out the form, and paste the copied text into the Content field, then submit":""),o.a.createElement("div",{className:g},o.a.createElement(nt,{onCopy:function(e){f(!0)},onCloseComplete:n,text:v}))),m?o.a.createElement(at,{src:"https://docs.google.com/forms/d/e/1FAIpQLSeKP2imQv_UCj4qrGNk7mT6Rzz83F30IvEl8ZFdERIdzSnvig/viewform?usp=sf_link"}):o.a.createElement(o.a.Fragment,null)),document.querySelector("#google-form-popup"))}),nt=function(e){var t=e.text,n=e.onCloseComplete,i=e.onCopy,c=(e.isCurrentClipBoardContent,Object(a.useState)(!1)),l=Object(r.a)(c,2),s=l[0],u=l[1],d=Object(a.useState)(!1),m=Object(r.a)(d,2),f=m[0],v=m[1];G()("copy-field",{"copy-field-success":f&&s,"copy-field-failure":!f&&!s});return Object(a.useEffect)((function(){navigator.clipboard.readText().then((function(e){t===e?(u(!0),v(!0)):(v(!1),u(!1))})).catch((function(e){console.error("Failed to read clipboard contents:",e)}))}),[t]),o.a.createElement("div",null,o.a.createElement(L,{iconBefore:o.a.createElement(Ze.a,null),text:"Copy Layout To Clip Board",onClick:function(e){navigator.clipboard.writeText(t),v(!0),i(e)},width:"100%",intent:"success",appearance:"primary"}),s?o.a.createElement($.a,{intent:"success"},"Clipboard is current"):o.a.createElement($.a,{intent:"warning"},"Current clipboard content is out of sync with current layout, copy the layout to clipboard again."),o.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",paddingTop:"1em"}},o.a.createElement(L,{iconBefore:o.a.createElement(et.a,null),text:"Return",onClick:n})))},at=function(e){var t=e.src;return o.a.createElement("iframe",{src:t,className:"google-form-iframe",width:"100%",frameBorder:0,marginHeight:0,marginWidth:0})},ot=n(312),rt=function(){var e=s((function(e){return e.layoutsModel.externalLayouts})),t=s((function(e){return e.layoutsModel.activeLayout})),n=l((function(e){return e.layoutsModel.setActiveLayout}));return o.a.createElement("div",null,o.a.createElement(Q,{className:"table-container",droppableId:p.LAYOUT_TABLE,isDropDisabled:!1,cardType:g.CLOCK},o.a.createElement("table",null,o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Title"),o.a.createElement("th",null,"Date Added"),o.a.createElement("th",null,"Author")))),o.a.createElement("table",null,o.a.createElement("tbody",null,e.map((function(e,a){var r=e.id,i=e.title,c=e.author,l=e.added;return o.a.createElement("tr",{key:a,onClick:function(t){return n(e)}},o.a.createElement("td",{key:a},r===(null===t||void 0===t?void 0:t.id)?o.a.createElement(ot.a,{color:"success"}):o.a.createElement(o.a.Fragment,null),i),o.a.createElement("td",null,Oe(l)),o.a.createElement("td",null,c))}))))))},it=function(){var e=s((function(e){return e.layoutsModel.activeLayout})),t=s((function(e){return e.layoutsModel.bufferLayout})),n=Object(a.useState)(!1),i=Object(r.a)(n,2),c=i[0],u=i[1],d=l((function(e){return e.googleSheetsModel.fetchAppGoogleSheet})),m=Object(a.useState)(JSON.stringify(e)),f=Object(r.a)(m,2),v=(f[0],f[1]);Object(a.useEffect)((function(){v(JSON.stringify(t))}),[e,t]);return o.a.createElement(j,null,o.a.createElement("div",{style:{display:"flex",justifyContent:"center",width:"100%",padding:".5em"}},o.a.createElement(L,{iconBefore:o.a.createElement(K.a,null),onClick:function(e){u(!0)},text:"Add New Layout",width:"90%",intent:"success",appearance:"primary"})),c?o.a.createElement(tt,{onCloseComplete:function(){d(),u(!1)},visible:c}):o.a.createElement(o.a.Fragment,null),o.a.createElement("div",null,o.a.createElement(rt,null)))},ct=function(e){e.dndType;var t=e.className,n=e.children,r=(e.dragAll,e.draggableId),i=e.index,c=s((function(e){return e.layoutsModel.activeLayout})),l=null===c||void 0===c?void 0:c.layout.lg.map((function(e){return e.i})).includes(r);Object(a.useEffect)((function(){l=null===c||void 0===c?void 0:c.layout.lg.map((function(e){return e.i})).includes(r)}),[c]);return o.a.isValidElement(n)?o.a.createElement("div",{style:{display:l?"none":"block"}},o.a.createElement(H.b,{draggableId:r,index:i},(function(e,a){return console.log(l),o.a.createElement("div",Object.assign({className:t,ref:e.innerRef,style:{display:l?"none":"block"}},e.draggableProps,e.dragHandleProps),o.a.cloneElement(n,{provided:e}))}))):o.a.createElement("div",null)},lt=function(){s((function(e){return e.layoutsModel.activeLayout}));return o.a.createElement("div",null,o.a.createElement(Q,{cardType:g.CLOCK,className:"table-container",droppableId:p.WIDGETS_TABLE,isDropDisabled:!1},o.a.createElement(ct,{className:"draggable-widget",dndType:g.WIDGET,draggableId:"clock",index:0,isDragDisabled:!1},o.a.createElement(X,null)),o.a.createElement(ct,{className:"draggable-widget",dndType:g.WIDGET,draggableId:"info",index:1,isDragDisabled:!1},o.a.createElement("button",null,"HELLO"))))},st=function(){return o.a.createElement($e.d,null,o.a.createElement($e.b,null,o.a.createElement($e.a,null,"Content"),o.a.createElement($e.a,null,"Widgets"),o.a.createElement($e.a,null,"Layouts")),o.a.createElement($e.c,null,o.a.createElement(Xe,null)),o.a.createElement($e.c,null,o.a.createElement(lt,null)),o.a.createElement($e.c,null,o.a.createElement(it,null)))},ut=function(){var e=s((function(e){return e.appModel.appMode})),t=Object(a.useState)(!1),n=Object(r.a)(t,2),i=n[0],c=n[1],l=G()("editor-panel",{"editor-panel-full":!i,hidden:e===d.DISPLAY,"editor-panel-minimized":i}),u=G()("editor",{"editor-visible":e===d.EDIT});return x.a.createPortal(o.a.createElement(Pe.a,{bounds:{left:0,top:0,right:window.innerWidth-50,bottom:window.innerHeight-50},defaultClassName:l,defaultPosition:{x:100,y:100},handle:".editor-panel-handle"},o.a.createElement("div",{className:u},o.a.createElement(dt,null,o.a.createElement(mt,{icon:o.a.createElement(Ne.a,null),onMouseUp:function(){c(!1)}}),o.a.createElement(mt,{icon:o.a.createElement(_e.a,null),onMouseUp:function(){c(!0)}})),o.a.createElement(st,null))),document.querySelector("#editor-panel-container"))},dt=function(e){var t=e.children;return o.a.createElement("div",{className:"editor-panel-handle panel-header"},t)},mt=function(e){var t=e.icon,n=e.onMouseUp;return o.a.createElement("div",{className:"window-button",onMouseUp:n},t)},ft=function(e){var t=e.children;e.padding;return o.a.createElement("div",{style:{width:"100vw",height:"100vh"}},t)},vt=n(308),gt=function(){var e=l((function(e){return e.appModel.toggleAppMode})),t=Object(vt.a)((function(){e()})),n={position:"absolute",width:50,height:50,border:b.showModeSwitchButton?"1px solid red":"none",bottom:0,left:0};return x.a.createPortal(o.a.createElement("div",Object.assign({style:n},t)),document.querySelector("#mode-change-button"))},pt=n(313),ht=function(){var e=Object(pt.a)(b.idleTime,!1),t=l((function(e){return e.appModel.toggleAppMode})),n=l((function(e){return e.googleSheetsModel.fetchTopLevelSheet})),r=l((function(e){return e.layoutsModel.swapCardContent})),i=l((function(e){return e.layoutsModel.addCard})),c=l((function(e){return e.layoutsModel.addWidget})),u=l((function(e){return e.layoutsModel.setActiveLayout})),m=s((function(e){return e.layoutsModel.externalLayouts})),f=s((function(e){return e.appModel.appMode}));Object(a.useEffect)((function(){f===d.EDIT&&t()}),[e]),Object(a.useEffect)((function(){n()}),[]);var v=function(e){var t=e.split("[")[1];return{x:Number.parseInt(t.charAt(0)),y:Number.parseInt(t.charAt(3))}};return o.a.createElement(o.a.Fragment,null,o.a.createElement(I,null),o.a.createElement(ke,null),o.a.createElement(gt,null),o.a.createElement(H.a,{onDragEnd:function(e){var t,n;if(console.log("processing drag end"),(null===(t=e.destination)||void 0===t?void 0:t.droppableId)!=(null===(n=e.source)||void 0===n?void 0:n.droppableId)){console.log(e);var a=e.source,o=e.destination,l=e.draggableId;if(console.log(a,o,l),console.log("dragged from ".concat(l," to ").concat(null===o||void 0===o?void 0:o.droppableId," current title: ","yes")),o)switch(a.droppableId){case p.CARD_TABLE:if(o.droppableId)if(o.droppableId.startsWith("empty")){var s=v(o.droppableId);i({sourceId:l,targetPosition:s}),console.log("dropped onto an empty card, adding card")}else r({sourceId:l,targetId:o.droppableId});break;case p.WIDGETS_TABLE:console.log(l),console.log(o.droppableId),console.log("DRAGGING FROM WIDGETS TABLE");var d=v(o.droppableId);c({sourceId:l,targetPosition:d});break;case p.LAYOUT_TABLE:var f=m.filter((function(e){return e.id===l}))[0];u(f);break;default:console.log("got unkown drag source")}}}},o.a.createElement(ut,null),o.a.createElement(ft,null,o.a.createElement(Me.a,null,o.a.createElement(be,null)))))},yt=n(28),bt=n(18),Et=n.n(bt);!function(e){e.CROSS_ORIGIN="CROSS_ORIGIN"}(He||(He={})),function(e){e.MALFORMED_URL="MALFORMED_URL"}(Ke||(Ke={}));var wt=function(){function e(t){Object(R.a)(this,e),this.url=void 0,this.errors=void 0,this.warnings=void 0,this.errors=[],this.warnings=[],this.url=t}return Object(k.a)(e,[{key:"validate",value:function(e){var t;console.log(this.errors);var n=function(e){var t=[];new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)||t.push(Ke.MALFORMED_URL);return t}(this.url);(t=this.warnings).push.apply(t,Object(h.a)(n)),console.log(n)}},{key:"isValid",value:function(){return 0==this.errors.length}},{key:"errorMessages",value:function(){var e=this,t=[];return this.errors.map((function(n){if(n===He.CROSS_ORIGIN)t.push("Blocked a frame with origin ".concat(e.url,"; from accessing a cross-origin frame."));else console.log("error did not match an error enum")})),t}}]),e}();var St=function(){function e(t){var n;Object(R.a)(this,e),this.id=void 0,this.src=void 0,this.title=void 0,this.added=void 0,this.sourceId=void 0,this.author=void 0,this.interaction=void 0,this.contentType=void 0,this.metaData=void 0,this.validator=void 0,this.isActive=void 0,this.failed=void 0,this.id=t.src,this.src=t.src,this.title=t.title,this.added=new Date(t.added),this.sourceId=t.src,this.author=t.author,this.interaction=v[t.interaction],this.contentType=function(e){return"string"===typeof e&&/[./](gif|jpg|jpeg|tiff|png)$/i.test(e)}(n=this.src)?"image":function(e){return"string"===typeof e&&/[./](mp4|webm|mov)$/i.test(e)}(n)?"video":function(e){return"string"===typeof e&&e.includes("embed")}(n)?"embed":function(e){return"string"===typeof e&&e.includes("https")}(n)?"website":"widget","widget"===this.contentType&&t.widgetType?(this.metaData={widgetType:t.widgetType},this.id=t.widgetType):(this.metaData={src:t.src,title:t.title,added:new Date(t.added),sourceId:t.src,author:t.author},this.id=t.src),this.isActive=!1,this.validator=new wt(this.src),this.failed=!1}return Object(k.a)(e,[{key:"setActive",value:function(e){this.isActive=e}},{key:"fail",value:function(){this.failed=!0}}]),e}();var Ct=function(){function e(t){Object(R.a)(this,e),this.id=void 0,this.contentType=void 0,this.isActive=void 0,this.id=t,this.isActive=!1,this.contentType="widget"}return Object(k.a)(e,[{key:"setActive",value:function(e){this.isActive=e}}]),e}(),xt=b.widgetIds.map((function(e){return new Ct(e)})),Ot={availableCards:[],availableWidgets:xt,activeWidgets:[],activeCards:[],appMode:d.DISPLAY,manageViewModeChange:Object(i.g)((function(e,t){switch(console.log(t),e.setAppMode(t),t){case d.EDIT:case d.DISPLAY:case d.CYCLE:break;default:console.log("reached default in set view mode thunk")}})),toggleAppMode:Object(i.g)((function(e,t,n){var a=n.getState;switch(console.log("toggling view mod "),a().appMode){case d.EDIT:e.setAppMode(d.DISPLAY);break;case d.DISPLAY:e.setAppMode(d.EDIT);break;case d.CYCLE:break;default:console.log("reached default in set view mode thunk")}console.log(a().appMode)})),setAvailableCards:Object(i.b)((function(e,t){console.log("setting available cards"),e.availableCards=t})),setActiveCards:Object(i.b)((function(e,t){console.log(t),e.activeCards=t})),setActiveWidgets:Object(i.b)((function(e,t){console.log(t),e.activeWidgets=t})),setAppMode:Object(i.b)((function(e,t){console.log("setting view mode"),e.appMode=t})),onCardSheetLoadSuccess:Object(i.h)((function(e,t){return t.googleSheetsModel.setAppGoogleSheetData}),function(){var e=Object(yt.a)(Et.a.mark((function e(t,n){return Et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TRIGGERD"),console.log(n.payload),n.payload.getSheetRows("CARDS").then((function(e){console.log(e);var n=e.map((function(e){return{src:e.src,title:e.title,added:e.added,sourceid:e.sourceid,author:e.author,interaction:e.interaction}})).map((function(e){return new St(e)}));console.log(n),t.setAvailableCards(n)}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),onSetActiveLayout:Object(i.h)((function(e,t){return t.layoutsModel.setActiveLayout}),function(){var e=Object(yt.a)(Et.a.mark((function e(t,n,a){var o,r,i,c,l,s,u;return Et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a.getState,console.log("SETTING ACTIVE LAYOUT"),i=new Set(n.payload.sources()),console.log(n.payload),console.log(n.payload.layoutWidgets),c=new Set(null!==(o=n.payload.layoutWidgets.map((function(e){return e.id})))&&void 0!==o?o:[]),console.log("ACTIVE WIDGET IDS",c),l=r().availableCards.map((function(e){return i.has(e.sourceId)?e.setActive(!0):e.setActive(!1),e})),s=r().availableCards.filter((function(e){return i.has(e.sourceId)})),u=xt.filter((function(e){return c.has(e.id)})),t.setAvailableCards(l),t.setActiveCards(s),console.log(u),t.setActiveWidgets(u);case 14:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),registerCardLoadFailure:Object(i.g)((function(e,t,n){var a=n.getState;n.getStoreState;console.log("Got card Register Load Failure at Layouts Model"),console.log(t);var o=a().activeCards,r=t.sourceId,i=o.map((function(e){return e.sourceId===r&&(console.log("found failed"),e.fail()),e}));e.setActiveCards(i)})),onSwapCardContent:Object(i.h)((function(e,t){return t.layoutsModel.swapCardContent}),function(){var e=Object(yt.a)(Et.a.mark((function e(t,n,a){var o,r;return Et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=a.getState,console.log("got swap card content"),console.log(n.payload),console.log(o().activeCards),(r=o().activeCards.map((function(e){if(e.sourceId===n.payload.targetId){var t=o().availableCards.find((function(e){return e.sourceId===n.payload.sourceId}));return console.log(t),t}return e})))&&t.setActiveCards(r),console.log(Object(i.f)(n));case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}())},Lt=Ot,Dt=n(9),At=n(22),jt={layout:{lg:[{w:2,h:1,x:0,y:0,i:"clock",moved:!1,static:!0},{w:2,h:2,x:2,y:0,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/DuBois_Racism.png",moved:!1,static:!1},{w:1,h:2,x:0,y:1,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg",moved:!1,static:!1}],md:[{w:2,h:1,x:0,y:0,i:"clock",moved:!1,static:!0},{w:2,h:2,x:2,y:0,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/DuBois_Racism.png",moved:!1,static:!1},{w:1,h:2,x:0,y:1,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg",moved:!1,static:!1}],sm:[{w:2,h:1,x:0,y:0,i:"clock",moved:!1,static:!0},{w:2,h:2,x:2,y:0,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/DuBois_Racism.png",moved:!1,static:!1},{w:1,h:2,x:0,y:1,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg",moved:!1,static:!1}],xs:[{w:2,h:1,x:0,y:0,i:"clock",moved:!1,static:!0},{w:2,h:2,x:2,y:0,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/DuBois_Racism.png",moved:!1,static:!1},{w:1,h:2,x:0,y:1,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg",moved:!1,static:!1}],xxs:[{w:2,h:1,x:0,y:0,i:"clock",moved:!1,static:!0},{w:2,h:2,x:2,y:0,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/DuBois_Racism.png",moved:!1,static:!1},{w:1,h:2,x:0,y:1,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg",moved:!1,static:!1}]},layoutSettings:{gridSettings:{defaultBackgroundColor:"red"},cardSettings:[]},widgets:[]},It=function(){function e(t){Object(R.a)(this,e),this.title=void 0,this.author=void 0,this.added=void 0,this.id=void 0,this.sourceLayout=void 0,this.layout=void 0,this.layoutWidgets=void 0;var n=function(e){var t=JSON.parse(e.layout);return t.layout?t:jt}(t),a=(n.widgets,n.layout);n.layoutSettings;this.id=t.title+"_"+t.timestamp,this.title=t.title,this.author=t.author,this.added=new Date(t.timestamp.split(" ")[0]),this.sourceLayout=JSON.parse(t.layout).sourceLayout,console.log(JSON.parse(t.layout)),JSON.parse(t.layout).layoutWidgets?this.layoutWidgets=JSON.parse(t.layout).layoutWidgets:this.layoutWidgets=[],this.layout=a}return Object(k.a)(e,[{key:"swapCard",value:function(e){for(var t=0,n=Object.entries(this.layout);t<n.length;t++){var a,o=Object(r.a)(n[t],2),i=o[0],c=o[1],l=Object(At.a)(c.entries());try{for(l.s();!(a=l.n()).done;){var s=Object(r.a)(a.value,2),u=s[0];s[1].i==e.targetId&&(c[u].i=e.sourceId)}}catch(d){l.e(d)}finally{l.f()}this.layout[i]=c}}},{key:"removeCard",value:function(e){console.log(this.layout);for(var t=0,n=Object.entries(this.layout);t<n.length;t++){var a,o=Object(r.a)(n[t],2),i=o[0],c=o[1],l=Object(At.a)(c.entries());try{for(l.s();!(a=l.n()).done;){var s=Object(r.a)(a.value,2);s[0],s[1];this.layout[i]=c.filter((function(t){return t.i!==e}))}}catch(u){l.e(u)}finally{l.f()}}}},{key:"clearCards",value:function(){console.log(this.layout);for(var e=0,t=Object.entries(this.layout);e<t.length;e++){var n,a=Object(r.a)(t[e],2),o=a[0],i=a[1],c=Object(At.a)(i.entries());try{for(c.s();!(n=c.n()).done;){var l=Object(r.a)(n.value,2);l[0],l[1];this.layout[o]=[]}}catch(s){c.e(s)}finally{c.f()}}}},{key:"addCard",value:function(e,t){console.log("ADDING CARD AT LAYOUT DATA"),console.log(this.layout),Object.entries(this.layout)[0][1].map((function(e){return e.i})).includes(e.sourceId)&&console.log("ADDING SOMETHING THAT'S ALREADY PRESENT");for(var n=0,a=Object.entries(this.layout);n<a.length;n++){var o=Object(r.a)(a[n],2),i=o[0],c=(o[1],{x:t.x,y:t.y,w:1,h:1,i:e.sourceId});this.layout[i].push(c)}}},{key:"addWidget",value:function(e,t){Object.entries(this.layout)[0][1].map((function(e){return e.i})).includes(e.id)&&console.log("ADDING A WIDGET THAT'S ALREADY PRESENT"),this.layoutWidgets.push(e);for(var n=0,a=Object.entries(this.layout);n<a.length;n++){var o=Object(r.a)(a[n],2),i=o[0],c=(o[1],{x:t.x,y:t.y,w:1,h:1,i:e.id});this.layout[i].push(c)}}},{key:"resetLayout",value:function(){this.layout=Object(Dt.a)({},this.sourceLayout.layout)}},{key:"failCard",value:function(e){console.log("FAILING CARD AT LAYOUT DATA")}},{key:"setGridLayout",value:function(e){console.log(e),this.layout=e}},{key:"sources",value:function(){return Object.entries(this.layout)[0][1].map((function(e){return e.i}))}},{key:"widgets",value:function(){console.log("GETTING WIDGETS AT WIDGET LAYOUTDATA");var e=Object.entries(this.layout)[0][1];console.log(e);var t=e.filter((function(e){return b.widgetIds.includes(e.i)}));return console.log("just widgets",t),t.map((function(e){return e.i}))}}]),e}();var Tt=[{i:"https://codepen.io/rcyou/embed/QEObEk?height=265&theme-id=light&default-tab=css,result",x:2,y:2,w:1,h:1,static:!1},{i:"https://sketchfab.com/models/e55956fee6444011b574bad021a03eae/embed?autostart=1",x:3,y:0,w:1,h:1,minW:1},{i:"https://www.lib.ncsu.edu/huntlibrary",x:3,y:1,w:1,h:1,minW:1}],Rt={layout:{lg:Tt,md:Tt,sm:Tt,xs:Tt,xxs:Tt},layoutSettings:{cardSettings:[],gridSettings:{defaultBackgroundColor:"red"}},widgets:[]},kt={title:"default static layout",author:"webb",timestamp:"1/1/2021",layout:JSON.stringify(Rt),interaction:"active"},Mt=new It(kt),Nt={activeLayout:void 0,externalLayouts:[],bufferLayout:Mt.layout,tempLayout:Mt.layout,onSetAppGoogleSheetData:Object(i.h)((function(e,t){return t.googleSheetsModel.setAppGoogleSheetData}),(function(e,t){t.payload.getSheetRows("LAYOUTS").then((function(t){var n,a=t.map((function(e){return new It(e)}));if(b.useStaticLayout)n=Mt,e.setActiveLayout(n),e.setBufferLayout(n.layout);else{var o=a.filter((function(e){return e.title===b.defaultLayoutName}))[0];o&&(console.log(o),e.setActiveLayout(o),e.setBufferLayout(o.layout))}e.setExternalLayouts(a)}))})),onToggleViewMode:Object(i.h)((function(e,t){return t.appModel.toggleAppMode}),(function(e,t,n){var a=n.getState,o=n.getStoreState,r=a().activeLayout,i=a().bufferLayout;o().appModel.appMode===d.DISPLAY&&(console.log("IT WAS IN DISPLAY MODE"),null!==r&&void 0!==r&&r.layout&&(r.layout=i,e.setActiveLayout(r)))})),setActiveLayout:Object(i.b)((function(e,t){e.activeLayout=t})),setExternalLayouts:Object(i.b)((function(e,t){console.log("setting external layouts"),e.externalLayouts=t})),swapCardContent:Object(i.g)((function(e,t,n){var a=n.getState,o=a().activeLayout;if(o){var r=a().bufferLayout;o.layout=r,o.swapCard(t),e.setActiveLayout(o)}})),deleteCard:Object(i.g)((function(e,t,n){var a=n.getState,o=a().activeLayout;if(o){var r=a().bufferLayout;o.layout=r,o.removeCard(t),e.setActiveLayout(o)}})),clearCards:Object(i.g)((function(e,t,n){var a=n.getState,o=a().activeLayout;if(o){var r=a().bufferLayout;o.layout=r,o.clearCards(),e.setActiveLayout(o)}})),addCard:Object(i.g)((function(e,t,n){var a=n.getState,o=(0,n.getStoreState)().appModel.availableCards,r=t.sourceId,i=t.targetPosition,c=o.find((function(e){return e.sourceId==r})),l=a().activeLayout;if(l&&c){var s=a().bufferLayout;l.setGridLayout(s),null===l||void 0===l||l.addCard(c,i),e.setActiveLayout(l)}})),addWidget:Object(i.g)((function(e,t,n){var a=n.getState,o=n.getStoreState;console.log("ADDING NEW WIDGET!!!");var r=o().appModel.availableWidgets,i=t.sourceId,c=t.targetPosition,l=r.find((function(e){return e.id==i})),s=a().activeLayout;if(s&&l){var u=a().bufferLayout;s.setGridLayout(u),null===s||void 0===s||s.addWidget(l,c),e.setActiveLayout(s)}})),registerCardLoadFailure:Object(i.g)((function(e,t,n){var a=n.getState,o=(n.getStoreState,a().activeLayout);o&&o.failCard(t)})),resetLayout:Object(i.g)((function(e,t,n){var a=n.getState;if(a().activeLayout){var o=a().activeLayout;null===o||void 0===o||o.resetLayout(),o&&e.setActiveLayout(o)}})),setBufferLayout:Object(i.b)((function(e,t){e.bufferLayout=t})),setTempLayout:Object(i.b)((function(e,t){e.tempLayout=t})),updateLayout:Object(i.b)((function(e,t){var n=e.activeLayout;n&&(n.swapCard(t),e.activeLayout=n)}))},_t=Nt,Gt=n(75),Pt=n.n(Gt),Ut=function(){function e(t,n){Object(R.a)(this,e),this.title=void 0,this.sheetId=void 0,this.sheets=void 0,this.title=t,this.sheetId=n,this.sheets=new Map}return Object(k.a)(e,[{key:"getSheetRows",value:function(e){var t=this;return new Promise((function(n,a){var o=t.sheets.get(e);o?n(o.map((function(e){return e}))):a("sheet with title ".concat(e," did not exist"))}))}},{key:"addSheet",value:function(e,t){this.sheets.set(e,t)}}]),e}(),Wt={key:"181P-SDszUOj_xn1HJ1DRrO8pG-LXyXNmINcznHeoK8k",gid:0},Ft={layoutDataGoogleSheet:null,cardDataGoogleSheet:null,appGoogleSheet:void 0,formUrl:void 0,layoutSheetUrl:void 0,cardSheetUrl:void 0,fetchTopLevelSheet:Object(i.g)((function(e){console.log(""),console.log(""),console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/cupboard-dxl-display",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SHEET_URL:""})),console.log("THIS IS A TEST"),Bt("TOP_LEVEL","").then((function(t){console.log(t);var n=t.rows[0];e.setFormUrl(n.googleForm),e.setLayoutsSheetUrl(Vt(n.layoutsSheet)),e.setCardSheetUrl(Vt(n.cardsSheet)),e.fetchSheet([{name:"LAYOUTS",url:Vt(n.layoutsSheet)},{name:"CARDS",url:Vt(n.cardsSheet)}])}))})),fetchSheet:Object(i.g)(function(){var e=Object(yt.a)(Et.a.mark((function e(t,n,a){var o,r;return Et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=a.getState,console.log(o().cardSheetUrl,o().layoutSheetUrl),r=n.map((function(e){return Bt(e.name,e.url)})),Promise.allSettled(r).then((function(e){var n=new Ut("DSC App",Wt.key),a=[];e.forEach((function(e,t){console.log(e),"fulfilled"==e.status&&(a.push(e),n.addSheet(e.value.sheetTitle,e.value.rows)),"rejected"==e.status&&console.error("failed ")})),t.setAppGoogleSheetData(n),n.getSheetRows("CARDS").then((function(e){t.setCardDataGoogleSheet(e)})),n.getSheetRows("LAYOUTS").then((function(e){t.setLayoutDataGoogleSheet(e)}))}));case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),fetchAppGoogleSheet:Object(i.g)(function(){var e=Object(yt.a)(Et.a.mark((function e(t,n,a){var o,r,i;return Et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=a.getState,console.log(o().cardSheetUrl,o().layoutSheetUrl),r=Bt("CARDS",o().cardSheetUrl),i=Bt("LAYOUTS",o().layoutSheetUrl),Promise.allSettled([r,i]).then((function(e){var n=new Ut("DSC App",Wt.key),a=[];e.forEach((function(e,t){console.log(e),"fulfilled"==e.status&&(a.push(e),n.addSheet(e.value.sheetTitle,e.value.rows)),"rejected"==e.status&&console.error("failed ")})),t.setAppGoogleSheetData(n),n.getSheetRows("CARDS").then((function(e){t.setCardDataGoogleSheet(e)})),n.getSheetRows("LAYOUTS").then((function(e){t.setLayoutDataGoogleSheet(e)}))}));case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),setAppGoogleSheetData:Object(i.b)((function(e,t){e.appGoogleSheet=t})),setCardDataGoogleSheet:Object(i.b)((function(e,t){e.cardDataGoogleSheet=t})),setLayoutDataGoogleSheet:Object(i.b)((function(e,t){e.layoutDataGoogleSheet=t})),setFormUrl:Object(i.b)((function(e,t){e.formUrl=t})),setCardSheetUrl:Object(i.b)((function(e,t){e.formUrl=t})),setLayoutsSheetUrl:Object(i.b)((function(e,t){e.formUrl=t}))};function Vt(e){console.log(e);var t=e.split("/")[5],n=e.split("gid=")[1];return"https://docs.google.com/spreadsheets/d/".concat(t,"/export?format=csv&gid=").concat(n)}function Bt(e,t){var n;return new Promise((function(a){console.log(t),Pt.a.parse(t,{download:!0,header:!0,delimiter:",",dynamicTyping:!0,complete:function(t){n=t.data,console.log(n),a({rows:n,sheetTitle:e})}})}))}var zt={appModel:Lt,layoutsModel:_t,googleSheetsModel:Ft},Yt=Object(i.d)(zt,{name:"Cuboard App Store"});x.a.render(o.a.createElement(i.a,{store:Yt},o.a.createElement(ht,null)),document.querySelector("#root"))},70:function(e,t,n){},80:function(e,t,n){},89:function(e,t,n){}},[[285,1,2]]]);
//# sourceMappingURL=main.4fc42c09.chunk.js.map