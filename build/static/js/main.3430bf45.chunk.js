(this.webpackJsonpcuboard=this.webpackJsonpcuboard||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){},108:function(e,t,n){},127:function(e,t,n){},128:function(e,t,n){},130:function(e,t,n){},151:function(e,t,n){},169:function(e,t,n){},170:function(e,t,n){},241:function(e,t,n){},242:function(e,t,n){},243:function(e,t,n){},244:function(e,t,n){},245:function(e,t,n){},263:function(e,t,n){},264:function(e,t,n){},285:function(e,t,n){},286:function(e,t,n){},287:function(e,t,n){},288:function(e,t,n){},289:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(10),c=(n(127),n(128),n(14)),i=Object(c.e)(),l=i.useStoreActions,u=(i.useStoreDispatch,i.useStoreState);function s(e){var t=Object(a.useState)(e),n=Object(r.a)(t,2),o=n[0],c=n[1];return[o,function(){return c(!o)}]}var d=function(e){var t=e.keyCode,n=e.action,a=e.disabled;o.a.useEffect((function(){return a||r(),function(){c()}}));var r=function(){document.addEventListener("keydown",i)},c=function(){document.removeEventListener("keydown",i)},i=function(e){e.keyCode===t&&(e.preventDefault(),n(e))};return{enable:r,disable:c}};function m(e,t){Object(a.useEffect)((function(){var n=function(n){var a=null===e||void 0===e?void 0:e.current;a&&!a.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}var f=n(23),v=(n(8),n(130),function(){var e=Object(a.useState)(new Date),t=Object(r.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){var e=setInterval((function(){c(new Date)}),1e3);return function(){clearInterval(e)}})),o.a.createElement("div",{style:{height:"100%",padding:".25em",width:"100%",fontSize:"4vw",fontWeight:600,color:"white",boxSizing:"border-box"}},o.a.createElement("div",null,"Data Experience Lab"),o.a.createElement("div",null,n.toLocaleTimeString("en-IT",{hour12:!0,timeStyle:"short"})))}),p=[{i:"clock",x:0,y:0,w:2,h:1,static:!0},{i:"https://codepen.io/rcyou/embed/QEObEk?height=265&theme-id=light&default-tab=css,result",x:2,y:2,w:1,h:1,static:!1},{i:"https://sketchfab.com/models/e55956fee6444011b574bad021a03eae/embed?autostart=1",x:3,y:0,w:1,h:1,minW:1},{i:"https://www.lib.ncsu.edu/huntlibrary",x:3,y:1,w:1,h:1,minW:1}],g={lg:p,md:p,sm:p,xs:p,xxs:p};console.log(JSON.stringify(g));var h=g,b=n(1),y=n(2),E=n(3),O=n(4),C=n(16),w=n.n(C),x=n(109),S=n.n(x),j=(n(151),n(110)),L=n.n(j),I=function(e){e.card;var t=e.src,n=e.scale,c=Object(a.useState)(!1),i=Object(r.a)(c,2),l=i[0],u=i[1],s=Object(a.useState)(!0),d=Object(r.a)(s,2),m=d[0],f=(d[1],Object(a.useState)(!1)),v=Object(r.a)(f,2),p=v[0],g=v[1],h=new RegExp("youtube").test(t),b=w()("iframe-view-overlay",{"iframe-view-overlay-hidden":p,"iframe-view-overlay-loading":!p}),y=w()("iframe-container",{"iframe-container-hidden":!m}),E={border:"none",transform:"scale(".concat(n,")"),width:"".concat(1/n*100,"%"),height:"".concat(1/n*100,"%"),transformOrigin:"top left"};return o.a.createElement("div",{onDoubleClick:function(){u(!l)},className:y},o.a.createElement("div",{className:b},o.a.createElement(S.a,{type:"Grid",color:"white",height:80,width:80})),h?o.a.createElement(P,{src:t,onReady:function(e){g(!0)}}):o.a.createElement("iframe",{onLoad:function(e){g(!0)},src:t,style:l?{width:"100%",height:"100%",border:"5px blue"}:E}))},A=o.a.memo(I);var D,k,R,M,N,T,_,P=function(e){var t=e.src,n=e.onReady;return o.a.createElement("div",{className:"player-wrapper"},o.a.createElement(L.a,{className:"react-player",url:t,width:"100%",height:"100%",onReady:n}))},G=(o.a.PureComponent,n(24)),F=n(48),U=(n(169),n(170),n(299)),z=function(){return o.a.createElement("div",{className:"pulsar"},o.a.createElement(U.a,{size:200}))},V=["children","className","cardType"],B=function(e){var t=e.children,n=e.className,a=(e.cardType,Object(G.a)(e,V));return o.a.createElement(F.c,Object.assign({},a,{type:"DEFAULT"}),(function(e,a){return o.a.createElement("div",Object.assign({},e.innerRef,{ref:e.innerRef,className:a.isDraggingOver?"droppable-hovered "+n:"droppable "+n}),o.a.createElement("div",{className:a.isDraggingOver?"droppable-overlay droppable-overlay-visible":"droppable-overlay droppable-overlay-hidden"},o.a.createElement(z,null)),t,e.placeholder)}))};n(241);!function(e){e.DISPLAY="DISPLAY",e.EDIT="EDIT",e.CYCLE="CYCLE"}(D||(D={})),function(e){e.GRID="GRID",e.PREVIEW="PREVIEW",e.FULL_SCREEN="FULL_SCREEN"}(k||(k={})),function(e){e.CARD_TABLE_DATA="CARD_TABLE_DATA",e.DISPLAY_CARD="DISPLAY_CARD"}(R||(R={})),function(e){e.ACTIVE="ACTIVE",e.STATIC="STATIC",e.FIXED="FIXED",e.IMAGE="IMAGE"}(M||(M={})),function(e){e.PLACEHOLDER="PLACEHOLDER",e.CLOCK="CLOCK",e.IFRAME="IFRAME",e.CARD_ROW="CARD_ROW",e.LAYOUT="LAYOUT"}(N||(N={})),function(e){e.LAYOUT_TABLE="LAYOUT_TABLE",e.CARD_TABLE="CARD_TABLE",e.CARD_GRID="CARD_GRID"}(T||(T={})),function(e){e.CARDS="CARDS",e.LAYOUTS="LAYOUTS"}(_||(_={}));var Y=n(314),W=n(315),H=function(e){var t=e.onClick,n=e.text,a=e.appearance,r=e.className,c=e.iconBefore,i=e.width,l=e.height,u=e.style,s=e.containerClass;return o.a.createElement("div",{onMouseUp:t,className:s},o.a.createElement(W.a,{cursor:"pointer",width:null!==i&&void 0!==i?i:void 0,height:null!==l&&void 0!==l?l:void 0,iconBefore:null!==c&&void 0!==c?c:void 0,className:r,appearance:null!==a&&void 0!==a?a:"default",style:u},n))},q=(n(242),function(e){var t=e.data,n=(e.className,Object(a.useState)(!1)),c=Object(r.a)(n,2);c[0],c[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"card-footer"},o.a.createElement("h2",{style:{}},t.title),o.a.createElement("p",null,"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&apos standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book"," ")))}),K=(n(243),n(300)),J=function(e){var t=e.onClick;return o.a.createElement("div",{className:"delete-button-container",onMouseUp:t},o.a.createElement("div",{onClick:t,style:{display:"flex"}},o.a.createElement(K.a,{size:30})))},Q=(n(244),n(301)),X=function(e){var t=e.onClick;Object(a.useRef)();return o.a.createElement("div",{className:"settings-button-container",onMouseUp:t},o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(Q.a,{size:15})))},Z=(n(245),n(302)),$=n(303),ee=function(e){var t=e.title,n=e.children;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"menu-input-row"},t,n))},te=function(e){var t=e.setScale,n=e.scale;return o.a.createElement("div",{className:"scale-controls-grid"},o.a.createElement(H,{width:20,height:20,containerClass:"scale-controls-left",iconBefore:o.a.createElement(Z.a,{size:30}),onClick:function(){t(-.1)}}),o.a.createElement("input",{type:"text",style:{width:30},value:n.toString().slice(0,3)}),o.a.createElement(H,{width:20,height:20,containerClass:"scale-controls-right",iconBefore:o.a.createElement($.a,{size:30}),onClick:function(){t(.1)}}))},ne=function(e){var t=e.isShown,n=e.setScale,r=e.setBackgroundColor,c=e.setShowMenu,i=e.scale,l=Object(a.useRef)(null),u=m(l,(function(){c(!1)})),s={display:t?"flex":"none"};return o.a.createElement("div",Object.assign({ref:l,className:"menu-container",style:s},u),o.a.createElement(ee,{title:"Background Color:"},o.a.createElement("input",{className:"nodrag",type:"color",onChange:function(e){r(e.target.value)}})),o.a.createElement(ee,{title:"Scale: "},o.a.createElement(te,{setScale:n,scale:i})))},ae={idleTime:1e7,sheetLink:"https://docs.google.com/spreadsheets/d/1BR1AQ5Zmt_o_0dOm9AvDht0G3Q6RXQUhX71Vi4H7tTU/edit#gid=0",formLink:"https://forms.gle/nc3UQFtFUtSaF5mu6",defaultIframeScale:.5,defaultEmbedScale:1,showModeSwitchButton:!1,defaultLayoutName:"Data Charts"},oe=n(115),re=n.n(oe),ce=function(e){var t=e.cardType,n=e.children,i=(e.activeKey,e.cardId),f=e.data,v=e.onClick,p=Object(a.useRef)(null),g=u((function(e){return e.appModel.appMode})),h=Object(a.useState)(k.GRID),b=Object(r.a)(h,2),y=b[0],E=b[1],O=s(!1),C=Object(r.a)(O,2),x=(C[0],C[1],l((function(e){return e.layoutsModel.deleteCard}))),S=Object(c.i)((function(){return{cardView:k.GRID,setCardView:Object(c.b)((function(e,t){e.cardView=t})),scale:(null===f||void 0===f?void 0:f.src.includes("embed"))?ae.defaultEmbedScale:ae.defaultIframeScale,setScale:Object(c.b)((function(e,t){e.scale+=t})),cardBackgroundColor:"",setBackgroundColor:Object(c.b)((function(e,t){e.cardBackgroundColor=t})),transform:Object(c.c)([function(e){return e.cardView}],(function(e){if(e==k.PREVIEW){var t,n=null===(t=p.current)||void 0===t?void 0:t.getBoundingClientRect();if(le(p,1),n)return ie(n)}return e===k.GRID&&le(p,0),"translate(".concat(0,"px, ",0,"px)")})),setShowMenu:Object(c.b)((function(e,t){e.showMenu=t})),toggleMenu:Object(c.b)((function(e){e.showMenu=!e.showMenu})),showMenu:!1,cardType:t,cardClass:Object(c.c)([function(e){return e.cardView}],(function(e){var t=w()("card",{"card-edit":g===D.EDIT,"card-display":g===D.DISPLAY&&e==k.GRID,"card-preview":e===k.PREVIEW,"card-fullscreen":e===k.FULL_SCREEN,"card-empty":g===D.EDIT&&!n,"card-empty-hidden":!n&&g==D.DISPLAY,"card-locked":L.cardType===N.CLOCK&&g===D.EDIT,"card-error":null===f||void 0===f?void 0:f.failed});return console.log(t),t})),cardInfoClass:Object(c.c)((function(e){return w()("info",{"info-hidden":g===D.EDIT,"info-display":g===D.DISPLAY,"info-preview":e.cardView===k.PREVIEW})})),handleCardPress:Object(c.g)((function(e,t,n){var a=n.getState;if(console.log(a().cardClass),g===D.DISPLAY&&void 0!=i)switch(a().cardView){case k.GRID:e.setCardView(k.PREVIEW),console.log("SETTING CARD VIEW TO PREVIEW");break;case k.PREVIEW:e.setCardView(k.GRID)}}))}}),[g],(function(e){return{devTools:!1}})),j=Object(r.a)(S,3),L=j[0],I=j[1],A=(j[2],{scale:L.scale,setScale:I.setScale,setBackgroundColor:I.setBackgroundColor,setShowMenu:I.setShowMenu}),R=w()("card-modal-backdrop",{"card-modal-backdrop-active":y===k.PREVIEW||y===k.FULL_SCREEN,"card-modal-backdrop-inactive":y===k.GRID}),M=w()("card-child-container",{"card-child-container-preview":L.cardView===k.PREVIEW,"card-child-container-fullscreen":L.cardView===k.FULL_SCREEN,"card-child-container-grid":L.cardView===k.GRID}),T=d({keyCode:27,action:function(){y!==k.FULL_SCREEN&&y!==k.PREVIEW||E(k.GRID)},disabled:!1}),_=(T.enable,T.disable,function(){if(g==D.EDIT&&f)return o.a.createElement(o.a.Fragment,null,o.a.createElement(J,{onClick:function(){console.log("got delete button click"),x(f)}}),o.a.createElement(X,{onClick:function(e){I.toggleMenu()}}))}),P=function(){if(y===k.PREVIEW&&f)return o.a.createElement(q,{data:f,className:L.cardInfoClass})},G=Object(a.useRef)(null);m(G,(function(){L.cardView==k.PREVIEW&&I.setCardView(k.GRID)}));var F={width:"fit-content",position:"absolute",bottom:0,zIndex:1,right:0,transform:"translate(50%, 50%)"};return o.a.createElement("div",{className:L.cardClass,style:{willChange:"transform",height:"100%",transform:L.transform,backgroundColor:L.cardBackgroundColor},ref:p},(null===f||void 0===f?void 0:f.failed)?o.a.createElement(ue,{errors:f.validator.errorMessages()}):n?o.a.createElement("div",{className:R},o.a.createElement("div",{className:M,ref:G,onMouseUp:function(){I.handleCardPress(),v&&v()}},function(){var e;if(L.cardView===k.PREVIEW&&(null===f||void 0===f?void 0:f.src))return o.a.createElement("div",{style:F},o.a.createElement(re.a,{value:null!==(e=null===f||void 0===f?void 0:f.src)&&void 0!==e?e:"",size:128}))}(),[_(),P()],n(L.scale),o.a.createElement(ne,Object.assign({},A,{isShown:L.showMenu}))),function(){if(y===k.FULL_SCREEN)return o.a.createElement(se,{onClick:function(){E(k.GRID)}})}()):o.a.createElement(o.a.Fragment,null))},ie=function(e){var t=window.innerWidth,n=window.innerHeight,a=t/2-60*(window.innerWidth/100)/2,o=n/2-40*(window.innerWidth/100)/2,r=e.x,c=e.y,i=a-r,l=o-c;return r>a&&(i=r-a,i*=-1),c>o&&(l=c-o,l*=-1),"translate(".concat(i,"px, ").concat(l,"px)")},le=function(e,t){if(e){var n,a,o=null===(n=e.current)||void 0===n||null===(a=n.parentElement)||void 0===a?void 0:a.parentElement;o&&(o.style.zIndex=t.toString())}},ue=function(e){var t=e.errors;return o.a.createElement("div",{className:"failure-notice-container"},t.map((function(e,t){return o.a.createElement("div",{key:t,className:"failure-message"},o.a.createElement(Y.a,{key:t,intent:"danger"},e))})))},se=function(e){var t=e.onClick;return o.a.createElement("div",{className:"return-button-container"},o.a.createElement(H,{text:"Return",width:300,onClick:t}))};var de=o.a.memo(ce),me=n(49),fe=(n(103),n(263),function(e){var t=e.cards,n=e.gridSettings,a=e.layout,r=Object(me.WidthProvider)(me.Responsive);return o.a.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:0}},o.a.createElement(r,Object.assign({},n,{className:"card-layout",layouts:a,resizeHandles:[],preventCollision:!0,isDraggable:!1,isResizable:!1}),t.map((function(e,t){return o.a.createElement("div",{key:e},o.a.createElement(B,{key:t,droppableId:e,cardType:N.PLACEHOLDER,className:"droppable-guide"},o.a.createElement(de,{key:e,cardId:e,cardType:N.PLACEHOLDER})))}))))}),ve=o.a.memo(fe),pe=function(){var e=u((function(e){return e.appModel.appMode})),t=l((function(e){return e.layoutsModel.setBufferLayout})),n=u((function(e){return e.layoutsModel.activeLayout})),c=Object(a.useState)({x:window.innerWidth,y:window.innerHeight}),i=Object(r.a)(c,2),s=i[0],d=(i[1],Object(a.useMemo)((function(){return e===D.EDIT}),[e])),m=u((function(e){return e.appModel.activeCards})),f=Object(a.useState)([]),p=Object(r.a)(f,2),g=p[0],b=p[1],y=Object(a.useState)(h),E=Object(r.a)(y,2),O=E[0],C=E[1],w=Object(a.useState)(null===n||void 0===n?void 0:n.layout),x=Object(r.a)(w,2),S=x[0],j=x[1],L=Object(a.useRef)(null),I=Object(a.useRef)(""),k=Object(me.WidthProvider)(me.Responsive);Object(a.useEffect)((function(){var e=function(e,t){for(var n=[],a=0;a<e;a++)for(var o=0;o<t;o++)n.push({x:o,y:a});var r=n.map((function(e){return{x:e.x,y:e.y,w:1,h:1,i:"empty_card_[".concat(e.x,", ").concat(e.y,"]"),minW:1,maxW:1,minH:1,maxH:1,static:!1,isDraggable:!1,isResizable:!1,resizeHandles:[]}}));return r.shift(),r.shift(),{lg:r,md:r,sm:r,xs:r,xxs:r}}(3,4),t=e.lg.filter((function(e){return e.i.startsWith("empty")})).map((function(e){return e.i}));b(t),C(e),j(null===n||void 0===n?void 0:n.layout),(null===n||void 0===n?void 0:n.layout)&&(L.current=null===n||void 0===n?void 0:n.layout)}),[m,n]),Object(a.useEffect)((function(){}),[S]);var R={breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:4,md:4,sm:4,xs:4,xxs:4},rowHeight:s.y/3.5,margin:[20,20],preventCollision:!0,compactType:null};return o.a.createElement("div",null,o.a.createElement("div",{className:"card-grid-container"},o.a.createElement(k,Object.assign({},R,{className:"card-layout",layouts:S,resizeHandles:["se"],preventCollision:!0,verticalCompact:!0,isBounded:!0,onDragStart:function(e,t,n,a,o,r){console.log(t),console.log(n),console.log(o),r.style.border="2px solid cyan",r.style.border="4px solid cyan"},onDragStop:function(e,t,n,a,o,r){console.log(t),console.log(n)},onLayoutChange:function(e){console.log(e);var n={lg:e,md:e,sm:e,xs:e,xxs:e};L.current=n,t(L.current)},isDraggable:d,isResizable:d}),o.a.createElement("div",{key:"clock"},o.a.createElement(de,{cardType:N.CLOCK,onClick:function(){console.log("clock clicked")}},(function(e){return o.a.createElement(v,null)}))),m.map((function(t,n){return o.a.createElement("div",{key:t.sourceId,draggable:!0,className:he(t,e)},o.a.createElement(B,{key:n,droppableId:t.sourceId,cardType:N.IFRAME,className:"droppable-card"},o.a.createElement(de,{cardType:N.IFRAME,data:t,key:n.toString(),cardId:n.toString(),onClick:function(){I.current=n.toString()},activeKey:I},(function(e){return o.a.createElement(A,{card:t,src:t.src,scale:e})}))))})))),o.a.createElement(ve,{layout:O,gridSettings:R,cards:g}))},ge=o.a.memo(pe),he=function(e,t){var n=e.failed;return n&&t===D.DISPLAY?"card-container-hidden":n&&t===D.EDIT?"card-container-error":"card-container"};n(264);var be=n(27),ye={uniforms:{time:{value:0}},vertexShader:"\n    vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n    vec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n    vec3 permute(vec3 x) { return mod289(((x*34.0)+1.0)*x); }\n  \n    float snoise(vec2 v) {\n        const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                            0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                            -0.577350269189626,  // -1.0 + 2.0 * C.x\n                            0.024390243902439); // 1.0 / 41.0\n        vec2 i  = floor(v + dot(v, C.yy) );\n        vec2 x0 = v -   i + dot(i, C.xx);\n        vec2 i1;\n        i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n        vec4 x12 = x0.xyxy + C.xxzz;\n        x12.xy -= i1;\n        i = mod289(i); // Avoid truncation effects in permutation\n        vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n            + i.x + vec3(0.0, i1.x, 1.0 ));\n  \n        vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n        m = m*m ;\n        m = m*m ;\n        vec3 x = 2.0 * fract(p * C.www) - 1.0;\n        vec3 h = abs(x) - 0.5;\n        vec3 ox = floor(x + 0.5);\n        vec3 a0 = x - ox;\n        m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n        vec3 g;\n        g.x  = a0.x  * x0.x  + h.x  * x0.y;\n        g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n        return 130.0 * dot(m, g);\n    }\n  \n  \n    \n  \n    uniform float u_time;\n    uniform vec2 u_randomisePosition;\n  \n    varying float vDistortion;\n    varying float xDistortion;\n    varying vec2 vUv;\n  \n    void main() {\n        vUv = uv;\n        vDistortion = snoise(vUv.xx * 3. - u_randomisePosition * 0.15);\n        xDistortion = snoise(vUv.yy * 1. - u_randomisePosition * 0.05);\n        vec3 pos = position;\n        pos.z += (vDistortion * 35.);\n        pos.x += (xDistortion * 25.);\n  \n        gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n    }\n    ",fragmentShader:"\n    vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n    vec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n    vec3 permute(vec3 x) { return mod289(((x*34.0)+1.0)*x); }\n  \n    float snoise(vec2 v) {\n        const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                            0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                            -0.577350269189626,  // -1.0 + 2.0 * C.x\n                            0.024390243902439); // 1.0 / 41.0\n        vec2 i  = floor(v + dot(v, C.yy) );\n        vec2 x0 = v -   i + dot(i, C.xx);\n        vec2 i1;\n        i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n        vec4 x12 = x0.xyxy + C.xxzz;\n        x12.xy -= i1;\n        i = mod289(i); // Avoid truncation effects in permutation\n        vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n            + i.x + vec3(0.0, i1.x, 1.0 ));\n  \n        vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n        m = m*m ;\n        m = m*m ;\n        vec3 x = 2.0 * fract(p * C.www) - 1.0;\n        vec3 h = abs(x) - 0.5;\n        vec3 ox = floor(x + 0.5);\n        vec3 a0 = x - ox;\n        m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n        vec3 g;\n        g.x  = a0.x  * x0.x  + h.x  * x0.y;\n        g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n        return 130.0 * dot(m, g);\n    }\n  \n  \n  \n  \n  \n    vec3 rgb(float r, float g, float b) {\n      return vec3(r / 255., g / 255., b / 255.);\n  }\n  \n  vec3 rgb(float c) {\n      return vec3(c / 255., c / 255., c / 255.);\n  }\n  \n  uniform vec3 u_bg;\n  uniform vec3 u_bgMain;\n  uniform vec3 u_color1;\n  uniform vec3 u_color2;\n  uniform float u_time;\n  \n  varying vec2 vUv;\n  varying float vDistortion;\n  \n  void main() {\n      vec3 bg = rgb(u_bg.r, u_bg.g, u_bg.b);\n      vec3 c1 = rgb(u_color1.r, u_color1.g, u_color1.b);\n      vec3 c2 = rgb(u_color2.r, u_color2.g, u_color2.b);\n      vec3 bgMain = rgb(u_bgMain.r, u_bgMain.g, u_bgMain.b);\n  \n      float noise1 = snoise(vUv + u_time * 0.08);\n      float noise2 = snoise(vUv * 2. + u_time * 0.1);\n  \n      vec3 color = bg;\n      color = mix(color, c1, noise1 * 0.6);\n      color = mix(color, c2, noise2 * .4);\n  \n      color = mix(color, mix(c1, c2, vUv.x), vDistortion);\n  \n      float border = smoothstep(0.1, 0.6, vUv.x);\n  \n      color = mix(color, bgMain, 1. -border);\n  \n      gl_FragColor = vec4(color, 1.0);\n  }\n    "},Ee=n(305),Oe=n(319),Ce=n(12);function we(e){if(e){var t=new Date(e),n=""+(t.getMonth()+1),a=""+t.getDate(),o=t.getFullYear();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),[o,n,a].join("-")}return"faulty date"}function xe(e,t){return Math.floor(Math.random()*(t-e+1)+e)}var Se=new Ce.Vector2(1,2);function je(e,t,n){return new Ce.Vector3(e,t,n)}var Le={pink:je(182,9,76),brightPink:je(241,3,66),darkPurple:je(42,8,56),orange:je(244,93,31),darkgrey:je(50,50,50),lightgrey:je(150,150,150),red:je(204,0,0)},Ie={u_bg:{type:"v3",value:Le.lightgrey},u_bgMain:{type:"v3",value:Le.lightgrey},u_color1:{type:"v3",value:Le.lightgrey},u_color2:{type:"v3",value:Le.lightgrey},u_time:{type:"f",value:0},u_randomisePosition:{type:"v2",value:Se}},Ae=function(e){var t=e.position,n=Object(a.useRef)(),r=0,c=0,i=xe(0,32),l=xe(0,32),u=!1;return Object(be.b)((function(e){e.clock;n.current.uniforms.u_randomisePosition.value=new Ce.Vector2(c,c),n.current.uniforms.u_color1.value=new Ce.Vector3(function(e,t,n){return Math.floor(192+64*Math.cos((e*e-t*t)/300+n))}(i,l,r/2),function(e,t,n){return Math.floor(192+64*Math.sin((e*e*Math.cos(n/4)+t*t*Math.sin(n/3))/300))}(i,l,r/2),function(e,t,n){return Math.floor(192+64*Math.sin(5*Math.sin(n/9)+((e-100)*(e-100)+(t-100)*(t-100))/1100))}(i,l,r/2)),n.current.uniforms.u_time.value=r,r%.1===0&&(!1===u?(i-=1)<=0&&(u=!0):(i+=1)>=32&&(u=!1)),c+=.01,r+=.01})),o.a.createElement("mesh",{position:t,rotation:[Ce.MathUtils.degToRad(0),Ce.MathUtils.degToRad(0),Ce.MathUtils.degToRad(90)]},o.a.createElement("planeGeometry",{attach:"geometry",args:[400,window.innerWidth/2,45,45]}),o.a.createElement("shaderMaterial",{attach:"material",vertexShader:ye.vertexShader,fragmentShader:ye.fragmentShader,uniforms:Ie,ref:n}))},De=function(){var e=Object(a.useRef)();return o.a.createElement(be.a,{gl:{antialias:!1,alpha:!1}},o.a.createElement(Ee.a,{ref:e,position:[0,0,0],fov:75,aspect:window.innerWidth/window.innerHeight,near:.1,far:1e3}),o.a.createElement(Ae,{position:[0,0,-100],faceResolution:100}),o.a.createElement(Oe.a,null))},ke=n(22),Re=n.n(ke),Me=function(){var e=u((function(e){return e.appModel.appMode})),t=Object(a.useState)({x:window.innerWidth,y:window.innerHeight}),n=Object(r.a)(t,2),c=(n[0],n[1],Object(a.useState)({backgroundColor:"gray"})),i=Object(r.a)(c,2),l=i[0],s=i[1];Object(a.useEffect)((function(){var t=e==D.EDIT;s({position:"absolute",height:"100vh",width:"100vw",top:0,left:0,backgroundColor:t?"white":"gray",transition:"background-color 0.5s ease"})}),[e]);var d=w()("background-container",{"background-container-display-mode":e==D.DISPLAY,"background-container-edit-mode":e==D.EDIT});return Re.a.createPortal(o.a.createElement("div",{style:l,className:d},e===D.EDIT?o.a.createElement("div",{style:{position:"absolute",height:"100vh",width:"100vw",top:0,left:0,backgroundColor:"lightgrey",transition:"background-color 0.5s ease"}}):o.a.createElement("div",{className:"background-container"},o.a.createElement("div",{className:"shader-container"},o.a.createElement(De,null)),o.a.createElement("div",{className:"particle-container"}))),document.querySelector("#background"))},Ne=n(121),Te=n(51),_e=n.n(Te),Pe=n(306),Ge=(n(104),n(21)),Fe=["dndType","className","children","dragAll"],Ue=function(e){e.dndType;var t=e.className,n=e.children,a=e.dragAll,r=Object(G.a)(e,Fe);return console.log(o.a.isValidElement(n)),o.a.isValidElement(n)?o.a.createElement(F.b,r,(function(e,r){var c=a?e.dragHandleProps:{};return o.a.createElement(o.a.Fragment,null,o.a.createElement("tr",Object.assign({className:t,ref:e.innerRef},e.draggableProps,c),o.a.cloneElement(n,{provided:e})),o.a.createElement("tr",{style:{display:r.isDragging?"table-row":"none",backgroundColor:r.isDragging?"green":"none"}},o.a.cloneElement(n,{provided:e})))})):o.a.createElement("div",null)};Ue.defaultProps={dragAll:!0};var ze,Ve=o.a.memo(Ue),Be=(n(105),n(316)),Ye=n(119),We=n.n(Ye),He=function(e){var t=e.propName,n=e.setFilter,c=e.setFilterDirection,i=e.className,l=e.activeFilter,u=Object(a.useState)(!0),s=Object(r.a)(u,2),d=s[0],m=s[1],f=Object(a.useState)(!1),v=Object(r.a)(f,2),p=v[0],g=v[1],h=function(e){var t=e.split(" ").map((function(e){return function(e){var t,n=/^[a-z]{0,1}|\s\w/gi;return null===(t=(e=e.toLowerCase()).match(n))||void 0===t||t.forEach((function(t){e=e.replace(t,t.toUpperCase())})),e}(e)})).join(" ");return t}(t);return Object(a.useEffect)((function(){g(t===l)}),[l]),o.a.createElement("th",{className:null!==i&&void 0!==i?i:"editor-panel-table-header",onClick:function(){n(t),m(!d),c(d)}},h,p&&d?"\u25b2":p&&!d?"\u25bc":"")};!function(e){e.UP="UP",e.DOWN="DOWN",e.OFF="OFF"}(ze||(ze={}));var qe,Ke,Je=n(66),Qe=n.n(Je),Xe=function(e){var t=e.card;return o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("img",{className:t.isActive?"row-favicon-active":"row-favicon-inactive",src:"https://s2.googleusercontent.com/s2/favicons?domain_url=".concat(t.src)}),o.a.createElement("div",{style:{marginTop:"auto",marginBottom:"auto",textAlign:"left"}},t.src))},Ze=function(){var e=u((function(e){return e.appModel.availableCards})),t=Object(a.useState)(),n=Object(r.a)(t,2),c=n[0],i=n[1],l=Object(a.useState)(!0),s=Object(r.a)(l,2),d=s[0],m=s[1],f=Object(a.useState)(e),v=Object(r.a)(f,2),p=v[0],g=v[1],h=Object(a.useState)(""),b=Object(r.a)(h,2),y=b[0],E=b[1],O=Object(a.useState)(null),C=Object(r.a)(O,2),w=(C[0],C[1],Object(a.useState)(e)),x=Object(r.a)(w,2),S=x[0],j=x[1];Object(a.useEffect)((function(){if(y.length>0){var e=We.a.go(y,p.map((function(e){return e.title}))).map((function(e){return e.target})),t=p.filter((function(t){return e.includes(t.title)}));j(t)}else j(p)}),[y,p]),Object(a.useEffect)((function(){var t=c,n=Object(Ge.a)(e).sort((function(e,n){var a=e[t],o=n[t];if(a&&o){if(a<o)return-1;if(a>o)return 1}return 0}));!d&&n.reverse(),g(n)}),[c,e,d]);return o.a.createElement("div",{className:"contents-tab-container"},o.a.createElement("div",{style:{padding:"0.5em"}},o.a.createElement(Be.a,{width:"100%",onChange:function(e){return E(e.currentTarget.value)},placeholder:"search title"})),o.a.createElement(B,{className:"table-container",droppableId:T.CARD_TABLE,isDropDisabled:!0,cardType:N.CLOCK},o.a.createElement("table",{className:"contents-tab-table"},o.a.createElement("tbody",null,o.a.createElement("tr",null,["title","added","sourceId","author","interaction"].map((function(e,t){return o.a.createElement(He,{key:t,className:"contents-table-header",propName:e,setFilter:i,activeFilter:c,setFilterDirection:m})}))))),o.a.createElement(Je.Scrollbars,{autoHeight:!0,autoHeightMin:100,autoHeightMax:319,onScrollFrame:function(e){return console.log(e)}},o.a.createElement("table",{style:{padding:"2em"}},o.a.createElement("tbody",null,S.map((function(e,t){var n=e.added,a=e.src,r=e.author,c=e.interaction,i=e.sourceId,l=e.isActive;return console.log(l),o.a.createElement(Ve,{dndType:N.CARD_ROW,draggableId:i,index:t,key:t.toString(),isDragDisabled:l,className:l?"content-row-active":"content-row-inactive"},o.a.createElement(o.a.Fragment,null,o.a.createElement("td",null,o.a.createElement(Xe,{card:e})),o.a.createElement("td",null,we(n)),o.a.createElement("td",null,a),o.a.createElement("td",null,r),o.a.createElement("td",null,c)))})))))))},$e=n(42),et=(n(284),n(317)),tt=function(){var e=u((function(e){return e.layoutsModel.externalLayouts})),t=u((function(e){return e.layoutsModel.activeLayout}));return o.a.createElement("div",null,o.a.createElement(B,{className:"table-container",droppableId:T.LAYOUT_TABLE,isDropDisabled:!1,cardType:N.CLOCK},o.a.createElement("table",null,o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Title"),o.a.createElement("th",null,"Date Added"),o.a.createElement("th",null,"Author")))),o.a.createElement("table",null,o.a.createElement("tbody",null,e.map((function(e,n){var a=e.id,r=e.title,c=e.author,i=e.added;return o.a.createElement(Ve,{dndType:N.LAYOUT,draggableId:a,index:n,key:n.toString(),isDragDisabled:!1,className:a===(null===t||void 0===t?void 0:t.id)?"layout-row-active":"layout-row-inactive"},o.a.createElement(o.a.Fragment,null,o.a.createElement("td",{key:n},a===(null===t||void 0===t?void 0:t.id)?o.a.createElement(et.a,{color:"success"}):o.a.createElement(o.a.Fragment,null),r),o.a.createElement("td",null,we(i)),o.a.createElement("td",null,c)))}))))))},nt=n(309),at=(n(285),n(108),n(286),function(e){var t=e.children,n=(e.active,e.containerClassName),a=e.onClose,r=e.backdropOpacity;return o.a.createElement("div",{className:"modal-container"},o.a.createElement(ot,{onClose:a,backdropOpacity:null!==r&&void 0!==r?r:0}),o.a.createElement("div",{className:n},t))}),ot=function(e){var t=e.onClose,n=e.backdropOpacity;return o.a.createElement("div",{onMouseUp:t,style:{opacity:n},className:"pop-up-background"})},rt=n(307),ct=n(308),it=(n(287),function(e){var t=e.visible,n=e.onCloseComplete,c=u((function(e){return e.layoutsModel.activeLayout})),i=Object(a.useState)(t),l=Object(r.a)(i,2),s=l[0],d=(l[1],Object(a.useState)(!1)),m=Object(r.a)(d,2),f=m[0],v=m[1],p=Object(a.useState)(JSON.stringify(null===c||void 0===c?void 0:c.layout)),g=Object(r.a)(p,2),h=g[0],b=(g[1],Object(a.useRef)(""),w()("copy-field-container",{"copy-field-container-closed":f}));return Re.a.createPortal(o.a.createElement(at,{onClose:n,active:s,containerClassName:"google-form-popup",backdropOpacity:.5},o.a.createElement("div",{className:"google-form-popup-inner-container"},o.a.createElement(Pe.a,null,f?"2. Fill out the form, and paste the copied text into the Content field, then submit":"1. Press the Copy Button"),o.a.createElement("div",{className:b},o.a.createElement(lt,{onCopy:function(e){v(!0)},onCloseComplete:n,text:h}))),f?o.a.createElement(ut,{src:"https://docs.google.com/forms/d/e/1FAIpQLSeKP2imQv_UCj4qrGNk7mT6Rzz83F30IvEl8ZFdERIdzSnvig/viewform?usp=sf_link"}):o.a.createElement(o.a.Fragment,null)),document.querySelector("#google-form-popup"))}),lt=function(e){var t=e.text,n=e.onCloseComplete,c=e.onCopy,i=(e.isCurrentClipBoardContent,Object(a.useState)(!1)),l=Object(r.a)(i,2),u=l[0],s=l[1],d=Object(a.useState)(!1),m=Object(r.a)(d,2),f=m[0],v=m[1],p=w()("copy-field",{"copy-field-success":f&&u,"copy-field-failure":!f&&!u});return Object(a.useEffect)((function(){navigator.clipboard.readText().then((function(e){t===e?(s(!0),v(!0)):(v(!1),s(!1))})).catch((function(e){console.error("Failed to read clipboard contents:",e)}))}),[t]),o.a.createElement("div",null,o.a.createElement("div",{className:p},o.a.createElement(Qe.a,{autoHeightMin:0,autoHeightMax:200},t)),u?o.a.createElement(Y.a,{intent:"success"},"Clipboard is current"):o.a.createElement(Y.a,{intent:"warning"},"Current clipboard content is out of sync with current layout, copy the layout to clipboard again."),o.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",paddingTop:"1em"}},o.a.createElement(H,{iconBefore:o.a.createElement(rt.a,null),text:"Copy Layout To Clip Board",onClick:function(e){navigator.clipboard.writeText(t),v(!0),c(e)}}),o.a.createElement(H,{iconBefore:o.a.createElement(ct.a,null),text:"Return",onClick:n})))},ut=function(e){var t=e.src;return o.a.createElement("iframe",{src:t,className:"google-form-iframe",width:"100%",frameBorder:0,marginHeight:0,marginWidth:0})},st=(n(288),function(e){var t,n=e.children,a=e.className,r=e.padding,c=e.flexDirection,i={padding:null!==r&&void 0!==r?r:"0em",flexDirection:null!==c&&void 0!==c?c:"column"};return o.a.createElement("div",{style:i,className:null!==(t="panel "+a)&&void 0!==t?t:""},n)}),dt=function(){var e=u((function(e){return e.layoutsModel.activeLayout})),t=u((function(e){return e.layoutsModel.bufferLayout})),n=Object(a.useState)(!1),c=Object(r.a)(n,2),i=c[0],s=c[1],d=l((function(e){return e.googleSheetsModel.fetchAppGoogleSheet})),m=Object(a.useState)(JSON.stringify(e)),f=Object(r.a)(m,2),v=(f[0],f[1]);return Object(a.useEffect)((function(){v(JSON.stringify(t))}),[e,t]),o.a.createElement(o.a.Fragment,null,o.a.createElement(st,null,o.a.createElement("div",{style:{display:"flex",justifyContent:"center",width:"100%"}},o.a.createElement(H,{iconBefore:o.a.createElement(nt.a,null),text:"Add New Layout",onClick:function(e){s(!0)},width:400})),i?o.a.createElement(it,{onCloseComplete:function(){d(),s(!1)},visible:i}):o.a.createElement(o.a.Fragment,null),o.a.createElement("div",null,o.a.createElement(tt,null))))},mt=function(){return o.a.createElement("div",{className:"editor-form-container"},o.a.createElement($e.d,null,o.a.createElement($e.b,null,o.a.createElement($e.a,null,"Content"),o.a.createElement($e.a,null,"Layouts")),o.a.createElement($e.c,null,o.a.createElement(Ze,null)),o.a.createElement($e.c,null,o.a.createElement(dt,null))))},ft=n(310),vt=n(311),pt=function(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],c=t[1],i=u((function(e){return e.appModel.appMode})),l=w()("editor-panel",{"editor-panel-full":!n,hidden:i===D.DISPLAY,"editor-panel-minimized":n}),s=w()("editor-body",{"editor-body-full":!n,"editor-body-minimized":n}),d=w()("editor",{"editor-visible":i===D.EDIT});return Re.a.createPortal(o.a.createElement(o.a.Fragment,null,o.a.createElement(_e.a,{handle:".editor-panel-handle",defaultClassName:l,defaultPosition:{x:100,y:100}},o.a.createElement("div",{className:d},o.a.createElement("div",{className:"header-container"},o.a.createElement(gt,{visible:i===D.EDIT},o.a.createElement(ht,{icon:o.a.createElement(ft.a,null),color:"yellow",onMouseUp:function(){c(!1)}}),o.a.createElement(ht,{icon:o.a.createElement(vt.a,null),color:"yellow",onMouseUp:function(){c(!0)}}))),o.a.createElement("div",{className:"body-container"},o.a.createElement("div",{className:s},o.a.createElement(mt,null)))))),document.querySelector("#editor-panel-container"))},gt=function(e){e.visible;var t=e.children;return o.a.createElement("div",{className:"editor-panel-handle panel-header"},t)},ht=function(e){var t=e.icon,n=(e.color,e.onMouseUp);return o.a.createElement("div",{className:"window-button",onMouseUp:n},t)},bt=n(312),yt=n(304),Et=function(){var e=s(!1),t=Object(r.a)(e,2),n=t[0],c=t[1],i=u((function(e){return e.appModel.appMode})),l=w()("how-to-backdrop",{"how-to-backdrop-active":n,"how-to-backdrop-inactive":!n}),d=w()("how-to-container",{"how-to-container-active":i===D.DISPLAY,"how-to-container-inactive":i===D.EDIT}),m=Object(a.useRef)(null);return Object(a.useEffect)((function(){m.current=document.querySelector("#how-to-use-popup"),m.current&&(m.current.style.display="none")}),[]),Object(a.useEffect)((function(){m.current&&(m.current.style.display=n?"initial":"none")}),[n]),o.a.createElement("div",{style:{zIndex:10},className:l},o.a.createElement("div",{style:{zIndex:11,backgroundColor:"rgba(255, 0, 0, 0)"},onClick:c,className:l}),o.a.createElement("div",{className:d},i===D.DISPLAY?o.a.createElement("div",null,o.a.createElement(Ot,{onClose:c,active:n}),o.a.createElement(H,{height:"10vh",width:"30vw",iconBefore:o.a.createElement(bt.a,null),onClick:c,appearance:"primary",text:"Learn how to use this display",className:"how-to-use-button"})):o.a.createElement(o.a.Fragment,null)))},Ot=function(e){var t=e.active,n=e.onClose;return Re.a.createPortal(o.a.createElement(at,{active:t,containerClassName:"how-to-use-popup",onClose:n,backdropOpacity:0},o.a.createElement(st,{padding:"1em"},o.a.createElement(Pe.a,null,"Connect Labtop"),o.a.createElement("hr",null),o.a.createElement(yt.a,null,"Connect your labtop to use this screen as a display."),o.a.createElement("img",{className:"how-to-image",src:"/cuboard/labtopdiagram.png"}),o.a.createElement(Pe.a,null,"Explore Content"),o.a.createElement("hr",null),o.a.createElement(yt.a,null,"Click on a card to explore data related content."),o.a.createElement("img",{className:"how-to-image",src:"/cuboard/masonary.png"}))),document.querySelector("#how-to-use-popup"))},Ct=n(313),wt=function(){var e=l((function(e){return e.appModel.toggleAppMode})),t=Object(Ct.a)((function(){e()})),n={position:"absolute",width:50,height:50,border:ae.showModeSwitchButton?"1px solid red":"none",bottom:0,left:0};return Re.a.createPortal(o.a.createElement("div",Object.assign({style:n},t)),document.querySelector("#mode-change-button"))},xt=n(318),St=function(){var e=Object(xt.a)(ae.idleTime,!1),t=l((function(e){return e.appModel.toggleAppMode})),n=l((function(e){return e.googleSheetsModel.fetchAppGoogleSheet})),c=l((function(e){return e.layoutsModel.swapCardContent})),i=l((function(e){return e.layoutsModel.addCard})),s=l((function(e){return e.layoutsModel.setActiveLayout})),m=u((function(e){return e.layoutsModel.externalLayouts})),f=u((function(e){return e.appModel.appMode}));Object(a.useEffect)((function(){f===D.EDIT&&t()}),[e]);var v=d({keyCode:115,action:function(){t()},disabled:!1}),p=(v.enable,v.disable,Object(a.useState)(!1)),g=Object(r.a)(p,2),h=g[0],b=g[1];Object(a.useEffect)((function(){n()}),[n]);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{tabIndex:0},o.a.createElement(Et,null),o.a.createElement(Me,null),o.a.createElement(wt,null),o.a.createElement(F.a,{onBeforeDragStart:function(e){e.source.droppableId===T.LAYOUT_TABLE&&b(!0)},onDragEnd:function(e){var t,n;if(console.log("processing drag end"),(null===(t=e.destination)||void 0===t?void 0:t.droppableId)!=(null===(n=e.source)||void 0===n?void 0:n.droppableId)){console.log(e);var a=e.source,o=e.destination,r=e.draggableId;if(console.log(a,o,r),console.log("dragged from ".concat(r," to ").concat(null===o||void 0===o?void 0:o.droppableId," current title: ","yes")),o)switch(a.droppableId){case T.CARD_TABLE:if(o.droppableId)if(o.droppableId.startsWith("empty")){var l=function(e){var t=e.split("[")[1];return{x:Number.parseInt(t.charAt(0)),y:Number.parseInt(t.charAt(3))}}(o.droppableId);i({sourceId:r,targetPosition:l}),console.log("dropped onto an empty card, adding card")}else c({sourceId:r,targetId:o.droppableId});break;case T.LAYOUT_TABLE:console.log("dragged "),console.log("dragged from the layout table!"),b(!1);var u=m.filter((function(e){return e.id===r}))[0];console.log(r),console.log(m),console.log(u),s(u);break;default:console.log("got unkown drag source")}}}},o.a.createElement(pt,null),o.a.createElement("div",{style:{width:"100vw",height:"100vh"}},h?o.a.createElement(jt,null):o.a.createElement(o.a.Fragment,null),o.a.createElement(Ne.a,null,o.a.createElement(ge,null))))))},jt=function(e){e.active;return o.a.createElement("div",{className:"layout-overlay-active"},o.a.createElement(z,null))},Lt=n(19),It=n.n(Lt),At=n(30);!function(e){e.CROSS_ORIGIN="CROSS_ORIGIN"}(qe||(qe={})),function(e){e.MALFORMED_URL="MALFORMED_URL"}(Ke||(Ke={}));var Dt=function(){function e(t){Object(b.a)(this,e),this.url=void 0,this.errors=void 0,this.warnings=void 0,this.errors=[],this.warnings=[],this.url=t}return Object(y.a)(e,[{key:"validate",value:function(e){var t;console.log(this.errors);var n=function(e){var t=[];new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)||t.push(Ke.MALFORMED_URL);return t}(this.url);(t=this.warnings).push.apply(t,Object(Ge.a)(n)),console.log(n)}},{key:"isValid",value:function(){return 0==this.errors.length}},{key:"errorMessages",value:function(){var e=this,t=[];return this.errors.map((function(n){if(n===qe.CROSS_ORIGIN)t.push("Blocked a frame with origin ".concat(e.url,"; from accessing a cross-origin frame."));else console.log("error did not match an error enum")})),t}}]),e}();var kt=function(){function e(t){Object(b.a)(this,e),this.src=void 0,this.title=void 0,this.added=void 0,this.sourceId=void 0,this.author=void 0,this.interaction=void 0,this.validator=void 0,this.isActive=void 0,this.failed=void 0,this.src=t.src,this.title=t.title,this.added=new Date(t.added),this.sourceId=t.src,this.author=t.author,this.interaction=M[t.interaction],this.isActive=!1,this.validator=new Dt(this.src),this.failed=!1}return Object(y.a)(e,[{key:"setActive",value:function(e){this.isActive=e}},{key:"fail",value:function(){console.log(this.validator.errors),this.failed=!0}}]),e}();var Rt={availableCards:[],activeCards:[],currentLayout:h,appMode:D.DISPLAY,manageViewModeChange:Object(c.g)((function(e,t){switch(console.log(t),e.setAppMode(t),t){case D.EDIT:case D.DISPLAY:case D.CYCLE:break;default:console.log("reached default in set view mode thunk")}})),toggleAppMode:Object(c.g)((function(e,t,n){var a=n.getState;switch(console.log("toggling view mod "),a().appMode){case D.EDIT:e.setAppMode(D.DISPLAY);break;case D.DISPLAY:e.setAppMode(D.EDIT);break;case D.CYCLE:break;default:console.log("reached default in set view mode thunk")}console.log(a().appMode)})),setCurrentLayout:Object(c.b)((function(e,t){e.currentLayout=t})),setAvailableCards:Object(c.b)((function(e,t){console.log("setting available cards"),e.availableCards=t})),setActiveCards:Object(c.b)((function(e,t){console.log("setting active cards"),console.log(t),e.activeCards=t})),setAppMode:Object(c.b)((function(e,t){console.log("setting view mode"),e.appMode=t})),onCardSheetLoadSuccess:Object(c.h)((function(e,t){return t.googleSheetsModel.setAppGoogleSheetData}),function(){var e=Object(At.a)(It.a.mark((function e(t,n){return It.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TRIGGERD"),console.log(n.payload),n.payload.getSheetRows(_.CARDS).then((function(e){console.log(e);var n=e.map((function(e){return{src:e.src,title:e.title,added:e.added,sourceid:e.sourceid,author:e.author,interaction:e.interaction}})).map((function(e){return new kt(e)}));console.log(n),t.setAvailableCards(n)}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),onSetActiveLayout:Object(c.h)((function(e,t){return t.layoutsModel.setActiveLayout}),function(){var e=Object(At.a)(It.a.mark((function e(t,n,a){var o,r,c,i;return It.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=a.getState,r=n.payload.sources().filter((function(e){return"clock"!==e})),c=o().availableCards.map((function(e){return r.includes(e.sourceId)?e.setActive(!0):e.setActive(!1),e})),i=o().availableCards.filter((function(e){return r.includes(e.sourceId)})),t.setAvailableCards(c),t.setActiveCards(i);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),registerCardLoadFailure:Object(c.g)((function(e,t,n){var a=n.getState;n.getStoreState;console.log("Got card Register Load Failure at Layouts Model"),console.log(t);var o=a().activeCards,r=t.sourceId,c=o.map((function(e){return e.sourceId===r&&(console.log("found failed"),e.fail()),e}));e.setActiveCards(c)})),onSwapCardContent:Object(c.h)((function(e,t){return t.layoutsModel.swapCardContent}),function(){var e=Object(At.a)(It.a.mark((function e(t,n,a){var o,r;return It.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=a.getState,console.log("got swap card content"),console.log(n.payload),console.log(o().activeCards),(r=o().activeCards.map((function(e){if(e.sourceId===n.payload.targetId){var t=o().availableCards.find((function(e){return e.sourceId===n.payload.sourceId}));return console.log(t),t}return e})))&&t.setActiveCards(r),console.log(Object(c.f)(n));case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}())},Mt=Rt,Nt=function(){function e(t){Object(b.a)(this,e),this.title=void 0,this.author=void 0,this.added=void 0,this.id=void 0,this.layout=void 0,this.id=t.title+"_"+t.timestamp,this.title=t.title,this.author=t.author,this.added=new Date(t.timestamp.split(" ")[0]);var n=JSON.parse(t.layout);this.layout=n}return Object(y.a)(e,[{key:"swapCard",value:function(e){for(var t=0,n=Object.entries(this.layout);t<n.length;t++){var a,o=Object(r.a)(n[t],2),c=o[0],i=o[1],l=Object(f.a)(i.entries());try{for(l.s();!(a=l.n()).done;){var u=Object(r.a)(a.value,2),s=u[0];u[1].i==e.targetId&&(i[s].i=e.sourceId)}}catch(d){l.e(d)}finally{l.f()}this.layout[c]=i}}},{key:"removeCard",value:function(e){console.log(this.layout);for(var t=0,n=Object.entries(this.layout);t<n.length;t++){var a,o=Object(r.a)(n[t],2),c=o[0],i=o[1],l=Object(f.a)(i.entries());try{for(l.s();!(a=l.n()).done;){var u=Object(r.a)(a.value,2);u[0],u[1];this.layout[c]=i.filter((function(t){return t.i!==e.sourceId}))}}catch(s){l.e(s)}finally{l.f()}}}},{key:"addCard",value:function(e,t){console.log("ADDING CARD AT LAYOUT DATA"),console.log(this.layout);for(var n=0,a=Object.entries(this.layout);n<a.length;n++){var o=Object(r.a)(a[n],2),c=o[0],i=(o[1],{x:t.x,y:t.y,w:1,h:1,i:e.sourceId});this.layout[c].push(i)}}},{key:"failCard",value:function(e){console.log("FAILING CARD AT LAYOUT DATA")}},{key:"setGridLayout",value:function(e){console.log(e),this.layout=e}},{key:"sources",value:function(){return Object.entries(this.layout)[0][1].map((function(e){return e.i}))}}]),e}();var Tt={activeLayout:void 0,externalLayouts:[],bufferLayout:h,tempLayout:h,onSetAppGoogleSheetData:Object(c.h)((function(e,t){return t.googleSheetsModel.setAppGoogleSheetData}),(function(e,t){t.payload.getSheetRows(_.LAYOUTS).then((function(t){console.log("GOT HEREGOT HEREGOT HEREGOT HEREGOT HEREGOT HEREGOT HERE");var n=t.map((function(e){return new Nt(e)}));console.log(n);var a=n.filter((function(e){return e.title===ae.defaultLayoutName}))[0];console.log(a),a&&e.setActiveLayout(a),e.setExternalLayouts(n),e.setBufferLayout(n.filter((function(e){return e.title===ae.defaultLayoutName}))[0].layout)}))})),onToggleViewModeListener:Object(c.h)((function(e,t){return t.appModel.toggleAppMode}),(function(e,t,n){var a=n.getState,o=n.getStoreState;console.log("listened to on toggle view mode in layout model, setting layout from buffer");var r=a().activeLayout,c=a().bufferLayout;o().appModel.appMode===D.DISPLAY&&(console.log("IT WAS IN DISPLAY MODE"),(null===r||void 0===r?void 0:r.layout)&&(r.layout=c,e.setActiveLayout(r)))})),setActiveLayout:Object(c.b)((function(e,t){e.activeLayout=t})),setExternalLayouts:Object(c.b)((function(e,t){console.log("setting external layouts"),e.externalLayouts=t})),swapCardContent:Object(c.g)((function(e,t,n){var a=n.getState,o=(n.getStoreState,n.getStoreActions,a().activeLayout);if(o){var r=a().bufferLayout;o.layout=r,o.swapCard(t),e.setActiveLayout(o)}})),deleteCard:Object(c.g)((function(e,t,n){var a=n.getState,o=(n.getStoreState,n.getStoreActions,a().activeLayout);if(o){var r=a().bufferLayout;o.layout=r,o.removeCard(t),e.setActiveLayout(o)}})),addCard:Object(c.g)((function(e,t,n){var a=n.getState,o=(0,n.getStoreState)().appModel.availableCards,r=t.sourceId,c=t.targetPosition,i=o.find((function(e){return e.sourceId==r})),l=a().activeLayout;if(l&&i){var u=a().bufferLayout;l.setGridLayout(u),null===l||void 0===l||l.addCard(i,c),e.setActiveLayout(l)}})),registerCardLoadFailure:Object(c.g)((function(e,t,n){var a=n.getState;n.getStoreState;console.log("Got card Register Load Failure at Layouts Model");var o=a().activeLayout;o&&o.failCard(t)})),setBufferLayout:Object(c.b)((function(e,t){e.bufferLayout=t})),setTempLayout:Object(c.b)((function(e,t){e.tempLayout=t})),updateLayout:Object(c.b)((function(e,t){var n=e.activeLayout;n&&(n.swapCard(t),e.activeLayout=n)}))},_t={key:"181P-SDszUOj_xn1HJ1DRrO8pG-LXyXNmINcznHeoK8k",gid:0},Pt={key:"1zwPZV75EhBLseFpcpQhHXEjLTV6JDrwfIGNhaI2GCXI",gid:996942125},Gt=function(){function e(t,n){Object(b.a)(this,e),this.title=void 0,this.sheetId=void 0,this.sheets=void 0,this.title=t,this.sheetId=n,this.sheets=new Map}return Object(y.a)(e,[{key:"getSheetRows",value:function(e){var t=this;return new Promise((function(n,a){var o=t.sheets.get(e);o?n(o.map((function(e){return e}))):a("sheet with title ".concat(e," did not exist"))}))}},{key:"addSheet",value:function(e,t){this.sheets.set(e,t)}}]),e}(),Ft=n(120),Ut=n.n(Ft),zt={layoutDataGoogleSheet:null,cardDataGoogleSheet:null,appGoogleSheet:void 0,fetchAppGoogleSheet:Object(c.g)(function(){var e=Object(At.a)(It.a.mark((function e(t){var n,a,o;return It.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=(n=function(e,t){var n,a="https://docs.google.com/spreadsheets/d/".concat(t.key,"/export?format=csv&gid=").concat(t.gid);return new Promise((function(t){Ut.a.parse(a,{download:!0,header:!0,delimiter:",",dynamicTyping:!0,complete:function(a){n=a.data,t({rows:n,sheetTitle:e})}})}))})(_.CARDS,_t),o=n(_.LAYOUTS,Pt),Promise.allSettled([a,o]).then((function(e){var n=new Gt("DSC App",_t.key),a=[];e.forEach((function(e,t){"fulfilled"==e.status&&(a.push(e),n.addSheet(e.value.sheetTitle,e.value.rows)),"rejected"==e.status&&console.error("failed ")})),t.setAppGoogleSheetData(n),n.getSheetRows(_.CARDS).then((function(e){t.setCardDataGoogleSheet(e)})),n.getSheetRows(_.LAYOUTS).then((function(e){t.setLayoutDataGoogleSheet(e)}))}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),setAppGoogleSheetData:Object(c.b)((function(e,t){e.appGoogleSheet=t})),setCardDataGoogleSheet:Object(c.b)((function(e,t){e.cardDataGoogleSheet=t})),setLayoutDataGoogleSheet:Object(c.b)((function(e,t){e.layoutDataGoogleSheet=t}))},Vt={appModel:Mt,layoutsModel:Tt,googleSheetsModel:zt},Bt=Object(c.d)(Vt,{name:"Cuboard App Store"});Re.a.render(o.a.createElement(c.a,{store:Bt},o.a.createElement(St,null)),document.querySelector("#root"))}},[[289,1,2]]]);
//# sourceMappingURL=main.3430bf45.chunk.js.map