(this.webpackJsonpcuboard=this.webpackJsonpcuboard||[]).push([[0],{119:function(e,t,n){},141:function(e,t,n){},142:function(e,t,n){},147:function(e,t,n){},149:function(e,t,n){},162:function(e,t,n){},180:function(e,t,n){},181:function(e,t,n){},251:function(e,t,n){},252:function(e,t,n){},260:function(e,t,n){},261:function(e,t,n){},262:function(e,t,n){},263:function(e,t,n){},282:function(e,t,n){},283:function(e,t,n){},284:function(e,t,n){},285:function(e,t,n){},286:function(e,t,n){"use strict";n.r(t);var a,o,r,i,c,l,s=n(0),u=n.n(s),d=(n(141),n(142),n(134)),m=n(317),f=n(11);!function(e){e.DISPLAY="DISPLAY",e.EDIT="EDIT",e.CYCLE="CYCLE"}(a||(a={})),function(e){e.GRID="GRID",e.PREVIEW="PREVIEW",e.FULL_SCREEN="FULL_SCREEN"}(o||(o={})),function(e){e.CARD_TABLE_DATA="CARD_TABLE_DATA",e.DISPLAY_CARD="DISPLAY_CARD"}(r||(r={})),function(e){e.ACTIVE="ACTIVE",e.STATIC="STATIC",e.FIXED="FIXED",e.IMAGE="IMAGE"}(i||(i={})),function(e){e.PLACEHOLDER="PLACEHOLDER",e.CLOCK="CLOCK",e.IFRAME="IFRAME",e.CARD_ROW="CARD_ROW",e.LAYOUT="LAYOUT",e.WIDGET="WIDGET"}(c||(c={})),function(e){e.LAYOUT_TABLE="LAYOUT_TABLE",e.CARD_TABLE="CARD_TABLE",e.CARD_GRID="CARD_GRID",e.WIDGETS_TABLE="WIDGETS_TABLE"}(l||(l={}));var v=n(15),g=Object(v.e)(),p=g.useStoreActions,h=(g.useStoreDispatch,g.useStoreState);var y=function(){var e=p((function(e){return e.appModel.toggleAppMode}));return{appMode:h((function(e){return e.appModel.appMode})),toggleAppMode:e}},b=function(){var e=h((function(e){return e.appModel.activeCards})),t=h((function(e){return e.appModel.activeWidgets})),n=p((function(e){return e.layoutsModel.swapCardContent})),a=p((function(e){return e.layoutsModel.addWidget})),o=p((function(e){return e.layoutsModel.deleteCard})),r=p((function(e){return e.layoutsModel.addCard}));return{activeCards:e,activeWidgets:t,setBufferLayout:p((function(e){return e.layoutsModel.setBufferLayout})),activeLayout:h((function(e){return e.layoutsModel.activeLayout})),deleteCard:o,addCard:r,swapCard:n,addWidget:a,setActiveLayout:p((function(e){return e.layoutsModel.setActiveLayout}))}};function E(e,t){Object(s.useEffect)((function(){var n=function(n){var a=null===e||void 0===e?void 0:e.current;a&&!a.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}n(147);var w=n(22),C=n.n(w),x=n(30),S={uniforms:{time:{value:0}},vertexShader:"\n    vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n    vec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n    vec3 permute(vec3 x) { return mod289(((x*34.0)+1.0)*x); }\n  \n    float snoise(vec2 v) {\n        const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                            0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                            -0.577350269189626,  // -1.0 + 2.0 * C.x\n                            0.024390243902439); // 1.0 / 41.0\n        vec2 i  = floor(v + dot(v, C.yy) );\n        vec2 x0 = v -   i + dot(i, C.xx);\n        vec2 i1;\n        i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n        vec4 x12 = x0.xyxy + C.xxzz;\n        x12.xy -= i1;\n        i = mod289(i); // Avoid truncation effects in permutation\n        vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n            + i.x + vec3(0.0, i1.x, 1.0 ));\n  \n        vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n        m = m*m ;\n        m = m*m ;\n        vec3 x = 2.0 * fract(p * C.www) - 1.0;\n        vec3 h = abs(x) - 0.5;\n        vec3 ox = floor(x + 0.5);\n        vec3 a0 = x - ox;\n        m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n        vec3 g;\n        g.x  = a0.x  * x0.x  + h.x  * x0.y;\n        g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n        return 130.0 * dot(m, g);\n    }\n  \n  \n    \n  \n    uniform float u_time;\n    uniform vec2 u_randomisePosition;\n  \n    varying float vDistortion;\n    varying float xDistortion;\n    varying vec2 vUv;\n  \n    void main() {\n        vUv = uv;\n        vDistortion = snoise(vUv.xx * 3. - u_randomisePosition * 0.15);\n        xDistortion = snoise(vUv.yy * 1. - u_randomisePosition * 0.05);\n        vec3 pos = position;\n        pos.z += (vDistortion * 35.);\n        pos.x += (xDistortion * 25.);\n  \n        gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n    }\n    ",fragmentShader:"\n    vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n    vec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n    vec3 permute(vec3 x) { return mod289(((x*34.0)+1.0)*x); }\n  \n    float snoise(vec2 v) {\n        const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                            0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                            -0.577350269189626,  // -1.0 + 2.0 * C.x\n                            0.024390243902439); // 1.0 / 41.0\n        vec2 i  = floor(v + dot(v, C.yy) );\n        vec2 x0 = v -   i + dot(i, C.xx);\n        vec2 i1;\n        i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n        vec4 x12 = x0.xyxy + C.xxzz;\n        x12.xy -= i1;\n        i = mod289(i); // Avoid truncation effects in permutation\n        vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n            + i.x + vec3(0.0, i1.x, 1.0 ));\n  \n        vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n        m = m*m ;\n        m = m*m ;\n        vec3 x = 2.0 * fract(p * C.www) - 1.0;\n        vec3 h = abs(x) - 0.5;\n        vec3 ox = floor(x + 0.5);\n        vec3 a0 = x - ox;\n        m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n        vec3 g;\n        g.x  = a0.x  * x0.x  + h.x  * x0.y;\n        g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n        return 130.0 * dot(m, g);\n    }\n  \n  \n  \n  \n  \n    vec3 rgb(float r, float g, float b) {\n      return vec3(r / 255., g / 255., b / 255.);\n  }\n  \n  vec3 rgb(float c) {\n      return vec3(c / 255., c / 255., c / 255.);\n  }\n  \n  uniform vec3 u_bg;\n  uniform vec3 u_bgMain;\n  uniform vec3 u_color1;\n  uniform vec3 u_color2;\n  uniform float u_time;\n  \n  varying vec2 vUv;\n  varying float vDistortion;\n  \n  void main() {\n      vec3 bg = rgb(u_bg.r, u_bg.g, u_bg.b);\n      vec3 c1 = rgb(u_color1.r, u_color1.g, u_color1.b);\n      vec3 c2 = rgb(u_color2.r, u_color2.g, u_color2.b);\n      vec3 bgMain = rgb(u_bgMain.r, u_bgMain.g, u_bgMain.b);\n  \n      float noise1 = snoise(vUv + u_time * 0.08);\n      float noise2 = snoise(vUv * 2. + u_time * 0.1);\n  \n      vec3 color = bg;\n      color = mix(color, c1, noise1 * 0.6);\n      color = mix(color, c2, noise2 * .4);\n  \n      color = mix(color, mix(c1, c2, vUv.x), vDistortion);\n  \n      float border = smoothstep(0.1, 0.6, vUv.x);\n  \n      color = mix(color, bgMain, 1. -border);\n  \n      gl_FragColor = vec4(color, 1.0);\n  }\n    "},O=n(297),L=n(318),I=n(13);function A(e){if(e){var t=new Date(e),n=""+(t.getMonth()+1),a=""+t.getDate(),o=t.getFullYear();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),[o,n,a].join("-")}return"faulty date"}function j(e,t){return Math.floor(Math.random()*(t-e+1)+e)}var D=new I.Vector2(1,2);function T(e,t,n){return new I.Vector3(e,t,n)}var k={pink:T(182,9,76),brightPink:T(241,3,66),darkPurple:T(42,8,56),orange:T(244,93,31),darkgrey:T(50,50,50),lightgrey:T(150,150,150),red:T(204,0,0)},R={u_bg:{type:"v3",value:k.lightgrey},u_bgMain:{type:"v3",value:k.lightgrey},u_color1:{type:"v3",value:k.lightgrey},u_color2:{type:"v3",value:k.lightgrey},u_time:{type:"f",value:0},u_randomisePosition:{type:"v2",value:D}},M=function(e){var t=e.position,n=Object(s.useRef)(),a=0,o=0,r=j(0,32),i=j(0,32),c=!1;return Object(x.b)((function(e){e.clock;n.current.uniforms.u_randomisePosition.value=new I.Vector2(o,o),n.current.uniforms.u_color1.value=new I.Vector3(function(e,t,n){return Math.floor(192+64*Math.cos((e*e-t*t)/300+n))}(r,i,a/2),function(e,t,n){return Math.floor(192+64*Math.sin((e*e*Math.cos(n/4)+t*t*Math.sin(n/3))/300))}(r,i,a/2),function(e,t,n){return Math.floor(192+64*Math.sin(5*Math.sin(n/9)+((e-100)*(e-100)+(t-100)*(t-100))/1100))}(r,i,a/2)),n.current.uniforms.u_time.value=a,a%.1===0&&(!1===c?(r-=1)<=0&&(c=!0):(r+=1)>=32&&(c=!1)),o+=.01,a+=.01})),u.a.createElement("mesh",{position:t,rotation:[I.MathUtils.degToRad(0),I.MathUtils.degToRad(0),I.MathUtils.degToRad(90)]},u.a.createElement("planeGeometry",{attach:"geometry",args:[400,window.innerWidth/2,45,45]}),u.a.createElement("shaderMaterial",{attach:"material",vertexShader:S.vertexShader,fragmentShader:S.fragmentShader,uniforms:R,ref:n}))},N=function(){var e=Object(s.useRef)();return u.a.createElement(x.a,{gl:{antialias:!1,alpha:!1}},u.a.createElement(O.a,{ref:e,position:[0,0,0],fov:75,aspect:window.innerWidth/window.innerHeight,near:.1,far:1e3}),u.a.createElement(M,{position:[0,0,-100],faceResolution:100}),u.a.createElement(L.a,null))},_=n(24),G=n.n(_),P=function(){var e=h((function(e){return e.appModel.appMode})),t=Object(s.useState)({x:window.innerWidth,y:window.innerHeight}),n=Object(f.a)(t,2),o=(n[0],n[1],Object(s.useState)({backgroundColor:"gray"})),r=Object(f.a)(o,2),i=r[0],c=r[1];Object(s.useEffect)((function(){var t=e==a.EDIT;c({position:"absolute",height:"100vh",width:"100vw",top:0,left:0,backgroundColor:t?"white":"gray",transition:"background-color 0.5s ease"})}),[e]);var l=C()("background-container",{"background-container-display-mode":e==a.DISPLAY,"background-container-edit-mode":e==a.EDIT});return G.a.createPortal(u.a.createElement("div",{style:i,className:l},e===a.EDIT?u.a.createElement("div",{style:{position:"absolute",height:"100vh",width:"100vw",top:0,left:0,backgroundColor:"lightgrey",transition:"background-color 0.5s ease"}}):u.a.createElement("div",{className:"background-container"},u.a.createElement("div",{className:"shader-container"},u.a.createElement(N,null)),u.a.createElement("div",{className:"particle-container"}))),document.querySelector("#background"))},U=n(20),W=(n(95),n(149),n(62)),B={idleTime:1e7,sheetLink:"https://docs.google.com/spreadsheets/d/1BR1AQ5Zmt_o_0dOm9AvDht0G3Q6RXQUhX71Vi4H7tTU/edit#gid=0",defaultIframeScale:.5,defaultEmbedScale:1,defaultLayoutName:"NewStaticLayout2",formLink:"https://forms.gle/nc3UQFtFUtSaF5mu6",widgetIds:["clock","group label","info"],gridRows:6,gridCols:4,showModeSwitchButton:!1,useStaticLayout:!1,gridBottomPadding:50},V=n(1),z=n(3),F=n(4),Y=n(5),H=(n(162),n(125)),q=n.n(H),J=function(e){var t=e.card,n=e.scale,a=e.cardView,r=e.onError,i=e.onLoad,c=Object(s.useState)(!1),l=Object(f.a)(c,2),d=l[0],m=l[1],v=Object(s.useState)(!0),g=Object(f.a)(v,2),p=g[0],h=(g[1],Object(s.useState)(!1)),y=Object(f.a)(h,2),b=y[0],E=y[1],w=(C()("iframe-view-overlay",{"iframe-view-overlay-hidden":b,"iframe-view-overlay-loading":!b}),C()("iframe-container",{"iframe-container-hidden":!p})),x={border:"none",transform:"scale(".concat(n,")"),width:"".concat(1/n*100,"%"),height:"".concat(1/n*100,"%"),transformOrigin:"top left"},S=t.src,O=t.contentType;return u.a.createElement("div",{className:w,onDoubleClick:function(){m(!d)}},"video"===O?u.a.createElement(X,{onReady:function(e){E(!0)},src:t.src}):"image"===O?u.a.createElement("img",{onLoad:function(e){i(e)},onError:function(e){r(e)},src:S,style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:a===o.PREVIEW?"contain":"center"}}):u.a.createElement("iframe",{onLoad:function(e){E(!0)},src:S,style:d?{width:"100%",height:"100%",border:"5px blue"}:x}))},K=u.a.memo(J),X=function(e){var t=e.src,n=e.onReady;return u.a.createElement("div",{className:"player-wrapper"},u.a.createElement(q.a,{className:"react-player",controls:!0,height:"100%",muted:!0,onReady:n,playing:!0,url:t,width:"100%"}))},Q=(u.a.PureComponent,n(25)),Z=n(49),$=(n(180),n(181),n(298)),ee=function(){return u.a.createElement("div",{className:"pulsar"},u.a.createElement($.a,{size:200}))},te=["children","className","cardType"],ne=function(e){var t=e.children,n=e.className,a=(e.cardType,Object(Q.a)(e,te));return u.a.createElement(Z.c,Object.assign({},a,{type:"DEFAULT"}),(function(e,a){return u.a.createElement("div",Object.assign({},e.innerRef,{ref:e.innerRef,className:a.isDraggingOver?"droppable-hovered "+n:"droppable "+n}),u.a.createElement("div",{className:a.isDraggingOver?"droppable-overlay droppable-overlay-visible":"droppable-overlay droppable-overlay-hidden"},u.a.createElement(ee,null)),t,e.placeholder)}))},ae=(n(251),function(){var e=Object(s.useState)(new Date),t=Object(f.a)(e,2),n=t[0],a=t[1];return Object(s.useEffect)((function(){var e=setInterval((function(){a(new Date)}),1e3);return function(){clearInterval(e)}})),u.a.createElement("div",{style:{height:"100%",padding:".25em",width:"100%",fontSize:"4vw",fontWeight:600,color:"white",boxSizing:"border-box"}},u.a.createElement("div",null,"Data Experience Lab"),u.a.createElement("div",null,n.toLocaleTimeString("en-IT",{hour12:!0,timeStyle:"short"})))}),oe=(n(252),n(312)),re=(n(130),n(313)),ie=function(e){var t=e.onClick,n=e.text,a=e.appearance,o=e.className,r=e.iconBefore,i=e.width,c=e.height,l=e.style,s=e.containerClass,d=e.fontSize,m=e.intent;return u.a.createElement("div",{className:s,onMouseUp:t,style:{width:i,height:"100%"}},u.a.createElement(re.a,{appearance:null!==a&&void 0!==a?a:"default",className:o,cursor:"pointer",fontSize:d,height:null!==c&&void 0!==c?c:void 0,iconBefore:null!==r&&void 0!==r?r:void 0,intent:null!==m&&void 0!==m?m:"none",style:l,width:null!==i&&void 0!==i?i:void 0},n))},ce=(n(260),function(e){var t=e.data,n=(e.className,Object(s.useState)(!1)),a=Object(f.a)(n,2);a[0],a[1];return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"card-footer"},u.a.createElement("h2",{style:{}},t.title),u.a.createElement("p",null,"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&apos standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book"," ")))}),le=(n(261),n(299)),se=function(e){var t=e.onClick;e.action;return u.a.createElement("div",{className:"delete-button-container",onMouseUp:t,onClick:t,onTouchEnd:function(e){}},u.a.createElement("div",{style:{display:"flex"}},u.a.createElement(le.a,{size:30})))},ue=(n(262),n(300)),de=function(e){var t=e.onClick;Object(s.useRef)();return u.a.createElement("div",{className:"settings-button-container",onMouseUp:t},u.a.createElement("div",{style:{display:"flex"}},u.a.createElement(ue.a,{size:15})))},me=(n(263),n(301)),fe=n(302),ve=function(e){var t=e.title,n=e.children;return u.a.createElement("div",{className:"menu-input-row"},t,n)},ge=function(e){var t=e.setScale,n=e.scale;return u.a.createElement("div",{className:"scale-controls-grid"},u.a.createElement(ie,{containerClass:"scale-controls-left",height:20,iconBefore:u.a.createElement(me.a,{size:30}),onClick:function(){t(-.1)},width:20}),u.a.createElement("input",{onChange:function(e){t(parseInt(e.target.value))},style:{width:30},defaultValue:.5,type:"text",value:n.toString().slice(0,3)}),u.a.createElement(ie,{containerClass:"scale-controls-right",height:20,iconBefore:u.a.createElement(fe.a,{size:30}),onClick:function(){t(.1)},width:20}))},pe=function(e){var t=e.isShown,n=e.setScale,a=e.setBackgroundColor,o=e.setShowMenu,r=e.scale,i=Object(s.useRef)(null),c=E(i,(function(){o(!1)})),l={display:t?"flex":"none"};return u.a.createElement("div",Object.assign({className:"menu-container",ref:i,style:l},c),u.a.createElement(ve,{title:"Background Color:"},u.a.createElement("input",{className:"nodrag",defaultValue:"rbga(0,0,0,0)",onChange:function(e){a(e.target.value)},type:"color"})),u.a.createElement(ve,{title:"Scale: "},u.a.createElement(ge,{scale:r,setScale:n})))},he=n(315),ye=n(311),be=function(e){var t=e.cardType,n=e.children,r=e.cardId,i=e.data,l=e.onClick,d=Object(s.useRef)(null),m=y().appMode,g=b().deleteCard,p=Object(s.useState)(o.GRID),h=Object(f.a)(p,2),w=h[0],x=h[1],S=Object(s.useState)(!1),O=Object(f.a)(S,2),L=O[0],I=O[1],A=Object(s.useState)(!1),j=Object(f.a)(A,2),D=j[0],T=j[1],k=Object(v.i)((function(){return{cardView:o.GRID,setCardView:Object(v.b)((function(e,t){e.cardView=t})),scale:"embed"===(null===i||void 0===i?void 0:i.contentType)?B.defaultEmbedScale:B.defaultIframeScale,setScale:Object(v.b)((function(e,t){e.scale+=t})),cardBackgroundColor:"",setBackgroundColor:Object(v.b)((function(e,t){e.cardBackgroundColor=t})),setShowMenu:Object(v.b)((function(e,t){e.showMenu=t})),toggleMenu:Object(v.b)((function(e){e.showMenu=!e.showMenu})),showMenu:!1,cardType:t,cardClass:Object(v.c)([function(e){return e.cardView}],(function(e){return C()("card",{"card-edit":m===a.EDIT,"card-display":m===a.DISPLAY&&e==o.GRID,"card-preview":e===o.PREVIEW,"card-fullscreen":e===o.FULL_SCREEN,"card-empty":m===a.EDIT&&!n,"card-empty-hidden":!n&&m==a.DISPLAY,"card-locked":M.cardType===c.CLOCK&&m===a.EDIT})})),cardInfoClass:Object(v.c)((function(e){return C()("info",{"info-hidden":m===a.EDIT,"info-display":m===a.DISPLAY,"info-preview":e.cardView===o.PREVIEW})})),handleCardPress:Object(v.g)((function(e,t,n){var c,l=n.getState;if(console.log(l().cardClass),m===a.DISPLAY&&void 0!=r)switch(l().cardView){case o.GRID:var s;if("widget"!==(null===i||void 0===i?void 0:i.contentType))e.setCardView(o.PREVIEW),console.log("SETTING CARD VIEW TO PREVIEW"),document.getElementById(null!==(s=null===i||void 0===i?void 0:i.id)&&void 0!==s?s:"view_card").style.zIndex="1000";break;case o.PREVIEW:e.setCardView(o.GRID),document.getElementById(null!==(c=null===i||void 0===i?void 0:i.id)&&void 0!==c?c:"view_card").style.zIndex="0"}}))}}),[m],(function(e){return{devTools:!1}})),R=Object(f.a)(k,2),M=R[0],N=R[1],_={scale:M.scale,setScale:N.setScale,setBackgroundColor:N.setBackgroundColor,setShowMenu:N.setShowMenu},G=C()("card-modal-backdrop",{"card-modal-backdrop-active":w===o.PREVIEW||w===o.FULL_SCREEN,"card-modal-backdrop-inactive":w===o.GRID}),P=C()("card-child-container",{"card-child-container-preview":M.cardView===o.PREVIEW,"card-child-container-fullscreen":M.cardView===o.FULL_SCREEN,"card-child-container-grid":M.cardView===o.GRID}),U=function(e){var t=e.keyCode,n=e.action,a=e.disabled;u.a.useEffect((function(){return a||o(),function(){r()}}));var o=function(){document.addEventListener("keydown",i)},r=function(){document.removeEventListener("keydown",i)},i=function(e){e.keyCode===t&&(e.preventDefault(),n(e))};return{enable:o,disable:r}}({keyCode:27,action:function(){w!==o.FULL_SCREEN&&w!==o.PREVIEW||x(o.GRID)},disabled:!1}),W=(U.enable,U.disable,function(){if(m==a.EDIT&&i)return u.a.createElement(u.a.Fragment,null,u.a.createElement(se,{onClick:function(){console.log("got delete button click"),g(i.id)},action:function(){g(i.id)}}),u.a.createElement(de,{onClick:function(e){N.toggleMenu()}}))}),V=function(){if(w===o.PREVIEW&&i&&"widget"!==i.contentType)return u.a.createElement(ce,{className:M.cardInfoClass,data:i})},z=Object(s.useRef)(null);E(z,(function(e){e.preventDefault(),console.log("clicked outside"),M.cardView==o.PREVIEW&&N.setCardView(o.GRID)}));Object(s.useEffect)((function(){if(d.current){var e,t,n,a=null===(e=d.current)||void 0===e||null===(t=e.parentElement)||void 0===t?void 0:t.parentElement;if(a)a.id=null!==(n=null===i||void 0===i?void 0:i.id)&&void 0!==n?n:"view_card"}}),[]);var F,Y,H=Object(s.useMemo)((function(){if(d.current){var e=d.current.getBoundingClientRect();return console.log(Ee(e)),Ee(e)}}),[M.cardView]),q={active:{opacity:1,transition:{delay:(F=.4,Y=.5,Math.random()*(Y-F)+F),duration:.5}},preview:{opacity:1,x:H?H[0]:0,y:H?H[1]:0},normal:{opacity:1},error:{opacity:[1,0],backgroundColor:"red"},loaded:{outline:["0px solid green","4px solid green","0px solid green"],opacity:[0,1,1]}};return u.a.createElement(u.a.Fragment,null,u.a.createElement(he.a,null,u.a.createElement(ye.a.div,{exit:{opacity:0,x:-300},ref:d,layoutId:"viewcard",className:M.cardClass,style:{transformOrigin:"center",willChange:"transform",height:"100%",backgroundColor:M.cardBackgroundColor,opacity:0},variants:q,initial:!0,animate:L&&M.cardView===o.GRID?"error":D&&M.cardView===o.GRID?"loaded":M.cardView===o.PREVIEW?"preview":m==a.DISPLAY?"active":"normal"},n&&u.a.createElement("div",{className:G},u.a.createElement("div",{className:P,onMouseUp:function(){N.handleCardPress(),l&&l()},ref:z},"widget"!==(null===i||void 0===i?void 0:i.contentType)?[W(),V()]:[W()],n(M.scale,M.cardView,(function(e){I(!0)}),(function(e){T(!0)})),u.a.createElement(pe,Object.assign({},_,{isShown:M.showMenu}))),function(){if(w===o.FULL_SCREEN)return u.a.createElement(we,{onClick:function(){x(o.GRID)}})}()))))},Ee=function(e){var t=window.innerWidth,n=window.innerHeight,a=t/2-60*(window.innerWidth/100)/2,o=n/2-40*(window.innerWidth/100)/2,r=e.x,i=e.y,c=a-r,l=o-i;return a<r&&(c=r-a,c*=-1),o<i&&(l=i-o,l*=-1),[c,l]},we=function(e){var t=e.onClick;return u.a.createElement("div",{className:"return-button-container"},u.a.createElement(ie,{onClick:t,text:"Return",width:300}))};var Ce=u.a.memo(be),xe=function(e){var t=e.gridSettings,n=Object(W.WidthProvider)(W.Responsive),a=function(e,t){for(var n=[],a=0;a<e;a++)for(var o=0;o<t;o++)n.push({x:o,y:a});var r=n.map((function(e){return{x:e.x,y:e.y,w:1,h:1,i:"empty_card_[".concat(e.x,", ").concat(e.y,"]"),minW:1,maxW:1,minH:1,maxH:1,static:!1,isDraggable:!1,isResizable:!1,resizeHandles:[]}}));return{lg:r,md:r,sm:r,xs:r,xxs:r}}(B.gridRows,B.gridCols),o=a.lg.map((function(e){return e.i}));return u.a.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:0}},u.a.createElement(n,Object.assign({},t,{className:"card-layout",layouts:a,resizeHandles:[],preventCollision:!0,isDraggable:!1,isResizable:!1}),o.map((function(e,t){return u.a.createElement("div",{key:e},u.a.createElement(ne,{key:t,droppableId:e,cardType:c.PLACEHOLDER,className:"droppable-guide"},u.a.createElement(Ce,{key:e,cardId:e,cardType:c.PLACEHOLDER})))}))))},Se=u.a.memo(xe);var Oe=function(){var e=y().appMode,t=b(),n=t.activeLayout,o=t.setBufferLayout,r=t.activeCards,i=t.activeWidgets,l=Object(s.useState)({x:window.innerWidth,y:window.innerHeight}),d=Object(f.a)(l,2),m=d[0],v=(d[1],Object(s.useRef)(null)),g=Object(s.useRef)(""),p=Object(W.WidthProvider)(W.Responsive),h={breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:B.gridCols,md:B.gridCols,sm:B.gridCols,xs:B.gridCols,xxs:B.gridCols},rowHeight:(m.y-B.gridBottomPadding)/B.gridRows,margin:[20,20],preventCollision:!0,compactType:null};return u.a.createElement("div",null,u.a.createElement("div",{className:"card-grid-container"},u.a.createElement(p,Object.assign({},h,{className:"card-layout",isDraggable:e===a.EDIT,isResizable:e===a.EDIT,layouts:n?n.layout:{lg:[]},onDragStart:function(e,t,n,a,o,r){r.style.border="2px solid cyan",r.style.border="4px solid cyan"},onLayoutChange:function(e){console.log("CHANGED THE LAYOUT");var t={lg:e,md:e,sm:e,xs:e,xxs:e};v.current=t,o(t)},preventCollision:!0,resizeHandles:["se"],verticalCompact:!0}),[].concat(Object(U.a)(r),Object(U.a)(i)).map((function(e,t){return u.a.createElement("div",{className:"card-container",draggable:!0,key:e.id},u.a.createElement(ne,{cardType:c.IFRAME,className:"droppable-card",droppableId:e.id,key:t},u.a.createElement(Ce,{cardId:t.toString(),cardType:c.IFRAME,data:e,onClick:function(){g.current=t.toString()}},"widget"!==e.contentType?function(t,n,a,o){var r=e;return u.a.createElement(K,{card:r,scale:t,cardView:n,onError:a,onLoad:o})}:function(t){return function(e){var t=void 0;switch(e.id){case"clock":t=u.a.createElement(Ce,{cardType:c.CLOCK,onClick:function(){console.log("clock clicked")}},(function(e){return u.a.createElement(ae,null)}));break;case"info":t=u.a.createElement(Ce,{cardType:c.CLOCK},(function(e){return u.a.createElement("div",null)}))}return console.log(t),t}(e)})))})))),u.a.createElement(Se,{gridSettings:h}))},Le=u.a.memo(Oe),Ie=function(e){var t=e.split("[")[1];return{x:Number.parseInt(t.charAt(0)),y:Number.parseInt(t.charAt(3))}},Ae=function(e){var t=e.children,n=b(),a=n.addCard,o=n.swapCard,r=n.addWidget,i=n.setActiveLayout,c=h((function(e){return e.layoutsModel.externalLayouts}));return u.a.createElement(Z.a,{onDragEnd:function(e){var t,n;if((null===(t=e.destination)||void 0===t?void 0:t.droppableId)!=(null===(n=e.source)||void 0===n?void 0:n.droppableId)){var s=e.source,u=e.destination,d=e.draggableId;if(console.log("dragged from ".concat(d," to ").concat(null===u||void 0===u?void 0:u.droppableId," current title: ","yes")),u)switch(s.droppableId){case l.CARD_TABLE:if(u.droppableId)if(u.droppableId.startsWith("empty")){var m=Ie(u.droppableId);a({sourceId:d,targetPosition:m}),console.log("dropped onto an empty card, adding card")}else o({sourceId:d,targetId:u.droppableId});break;case l.WIDGETS_TABLE:var f=Ie(u.droppableId);r({sourceId:d,targetPosition:f});break;case l.LAYOUT_TABLE:var v=c.filter((function(e){return e.id===d}))[0];i(v);break;default:console.log("got unkown drag source")}}}},t)},je=(n(119),n(307)),De=n(308),Te=n(64),ke=n.n(Te),Re=(n(84),n(314)),Me=n(132),Ne=n.n(Me),_e=n(133),Ge=function(e){var t=e.children,n=e.padding;return u.a.createElement("div",{style:{display:"flex",flexDirection:"row",padding:n}},t)},Pe=["dndType","className","children","dragAll"],Ue=function(e){e.dndType;var t=e.className,n=e.children,a=e.dragAll,o=Object(Q.a)(e,Pe);return u.a.isValidElement(n)?u.a.createElement(Z.b,o,(function(e,o){var r=a?e.dragHandleProps:{};return u.a.createElement(u.a.Fragment,null,u.a.createElement("tr",Object.assign({className:t,ref:e.innerRef},e.draggableProps,r),u.a.cloneElement(n,{provided:e})),u.a.createElement("tr",{style:{display:o.isDragging?"table-row":"none",backgroundColor:o.isDragging?"green":"none"}},u.a.cloneElement(n,{provided:e})))})):u.a.createElement("div",null)};Ue.defaultProps={dragAll:!0};var We,Be,Ve=u.a.memo(Ue),ze=function(e){var t=e.headerTitle,n=e.setFilter,a=e.setFilterDirection,o=e.className,r=e.activeFilter,i=Object(s.useState)(!0),c=Object(f.a)(i,2),l=c[0],d=c[1],m=t===r;return u.a.createElement("th",{className:null!==o&&void 0!==o?o:"editor-panel-table-header",onClick:function(){n(t),d(!l),a(l)}},function(e){var t=e.split(" ").map((function(e){return function(e){var t,n=/^[a-z]{0,1}|\s\w/gi;return null===(t=(e=e.toLowerCase()).match(n))||void 0===t||t.forEach((function(t){e=e.replace(t,t.toUpperCase())})),e}(e)})).join(" ");return t}(t),m&&l?"\u25b2":m&&!l?"\u25bc":"")},Fe=function(e){var t=e.card;return u.a.createElement("div",{style:{display:"flex"}},u.a.createElement("img",{className:t.isActive?"row-favicon-active":"row-favicon-inactive",src:"https://s2.googleusercontent.com/s2/favicons?domain_url=".concat(t.src)}),u.a.createElement("div",{style:{marginTop:"auto",marginBottom:"auto",textAlign:"left"}},t.src))},Ye=function(){var e=h((function(e){return e.appModel.availableCards})),t=p((function(e){return e.layoutsModel.clearCards})),n=p((function(e){return e.layoutsModel.resetLayout})),a=Object(s.useState)(),o=Object(f.a)(a,2),r=o[0],i=o[1],d=Object(s.useState)(!0),m=Object(f.a)(d,2),v=m[0],g=m[1],y=Object(s.useState)(e),b=Object(f.a)(y,2),E=b[0],w=b[1],C=Object(s.useState)(""),x=Object(f.a)(C,2),S=x[0],O=x[1],L=Object(s.useState)(e),I=Object(f.a)(L,2),j=I[0],D=I[1];Object(s.useEffect)((function(){if(0<S.length){var e=Ne.a.go(S,E.map((function(e){return e.title}))).map((function(e){return e.target})),t=E.filter((function(t){return e.includes(t.title)}));D(t)}else D(E)}),[S,E]),Object(s.useEffect)((function(){var t=r,n=Object(U.a)(e).sort((function(e,n){var a=e[t],o=n[t];if(a&&o){if(a<o)return-1;if(o<a)return 1}return 0}));!v&&n.reverse(),w(n)}),[r,e,v]);return u.a.createElement("div",{className:"contents-tab-container"},u.a.createElement(Ge,{padding:"0.5em"},u.a.createElement(Re.a,{onChange:function(e){return O(e.currentTarget.value)},placeholder:"search title",width:"80%"}),u.a.createElement(ie,{appearance:"default",intent:"danger",onClick:function(e){n()},text:"Reset Layout"}),u.a.createElement(ie,{appearance:"minimal",intent:"danger",onClick:function(e){t()},text:"Clear All"})),u.a.createElement(ne,{cardType:c.CLOCK,className:"table-container",droppableId:l.CARD_TABLE,isDropDisabled:!0},u.a.createElement("table",{className:"contents-tab-table"},u.a.createElement("tbody",null,u.a.createElement("tr",null,["title","added","sourceId","author","interaction"].map((function(e,t){return u.a.createElement(ze,{activeFilter:r,className:"contents-table-header",headerTitle:e,key:t,setFilter:i,setFilterDirection:g})}))))),u.a.createElement(_e.Scrollbars,{autoHeight:!0,autoHeightMax:319,autoHeightMin:100,onScrollFrame:function(e){return console.log(e)}},u.a.createElement("table",{style:{padding:"2em"}},u.a.createElement("tbody",null,j.map((function(e,t){var n=e.added,a=e.src,o=e.author,r=e.interaction,i=e.sourceId,l=e.isActive;return u.a.createElement(Ve,{className:l?"content-row-active":"content-row-inactive",dndType:c.CARD_ROW,draggableId:i,index:t,isDragDisabled:l,key:t.toString()},u.a.createElement(u.a.Fragment,null,u.a.createElement("td",null,u.a.createElement(Fe,{card:e})),u.a.createElement("td",null,A(n)),u.a.createElement("td",null,a),u.a.createElement("td",null,o),u.a.createElement("td",null,r)))})))))))},He=n(47),qe=(n(281),n(282),function(e){var t,n=e.children,a=e.className,o=e.padding,r=e.flexDirection,i={padding:null!==o&&void 0!==o?o:"0em",flexDirection:null!==r&&void 0!==r?r:"column"};return u.a.createElement("div",{style:i,className:null!==(t="panel "+a)&&void 0!==t?t:""},n)}),Je=(n(283),n(85),n(284),function(e){var t=e.children,n=e.active,a=e.containerClassName,o=e.onClose,r=e.backdropOpacity;return u.a.createElement("div",{className:"modal-container",style:{display:n?"flex":"none",width:"100vw",height:"100vh",justifyContent:"center",alignItems:"center"}},u.a.createElement(Ke,{onClose:o,backdropOpacity:null!==r&&void 0!==r?r:0}),u.a.createElement("div",{style:{zIndex:1e3},className:a},t))}),Ke=function(e){var t=e.onClose,n=e.backdropOpacity;return u.a.createElement("div",{onMouseUp:t,style:{opacity:n,zIndex:200},className:"pop-up-background"})},Xe=n(304),Qe=n(305),Ze=n(306),$e=(n(285),function(e){var t=e.visible,n=e.onCloseComplete,a=(h((function(e){return e.layoutsModel.activeLayout})),Object(s.useState)(t)),o=Object(f.a)(a,2),r=o[0],i=(o[1],Object(s.useState)(!1)),c=Object(f.a)(i,2),l=c[0],d=c[1];console.log("HELLO IM HERE");var m=h((function(e){return JSON.stringify(e.layoutsModel.activeLayout)}));console.log(m);var v=C()("copy-field-container",{"copy-field-container-closed":l});return G.a.createPortal(u.a.createElement(Je,{onClose:n,active:r,containerClassName:"google-form-popup",backdropOpacity:.5},u.a.createElement("div",{className:"google-form-popup-inner-container"},u.a.createElement(Xe.a,{color:l?"green":""},"1. Press the Copy Button"),u.a.createElement(Xe.a,null,l?"2. Fill out the form, and paste the copied text into the Content field, then submit":""),u.a.createElement("div",{className:v},u.a.createElement(et,{onCopy:function(e){d(!0)},onCloseComplete:n,text:m}))),l?u.a.createElement(tt,{src:"https://docs.google.com/forms/d/e/1FAIpQLSeKP2imQv_UCj4qrGNk7mT6Rzz83F30IvEl8ZFdERIdzSnvig/viewform?usp=sf_link"}):u.a.createElement(u.a.Fragment,null)),document.querySelector("#google-form-popup"))}),et=function(e){var t=e.text,n=e.onCloseComplete,a=e.onCopy,o=(e.isCurrentClipBoardContent,Object(s.useState)(!1)),r=Object(f.a)(o,2),i=r[0],c=r[1],l=Object(s.useState)(!1),d=Object(f.a)(l,2),m=d[0],v=d[1];C()("copy-field",{"copy-field-success":m&&i,"copy-field-failure":!m&&!i});return Object(s.useEffect)((function(){navigator.clipboard.readText().then((function(e){t===e?(c(!0),v(!0)):(v(!1),c(!1))})).catch((function(e){console.error("Failed to read clipboard contents:",e)}))}),[t]),u.a.createElement("div",null,u.a.createElement(ie,{iconBefore:u.a.createElement(Qe.a,null),text:"Copy Layout To Clip Board",onClick:function(e){navigator.clipboard.writeText(t),v(!0),a(e)},width:"100%",intent:"success",appearance:"primary"}),i?u.a.createElement(oe.a,{intent:"success"},"Clipboard is current"):u.a.createElement(oe.a,{intent:"warning"},"Current clipboard content is out of sync with current layout, copy the layout to clipboard again."),u.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",paddingTop:"1em"}},u.a.createElement(ie,{iconBefore:u.a.createElement(Ze.a,null),text:"Return",onClick:n})))},tt=function(e){var t=e.src;return u.a.createElement("iframe",{src:t,className:"google-form-iframe",width:"100%",frameBorder:0,marginHeight:0,marginWidth:0})},nt=n(316),at=function(){var e=h((function(e){return e.layoutsModel.externalLayouts})),t=h((function(e){return e.layoutsModel.activeLayout})),n=p((function(e){return e.layoutsModel.setActiveLayout}));return u.a.createElement("div",null,u.a.createElement(ne,{className:"table-container",droppableId:l.LAYOUT_TABLE,isDropDisabled:!1,cardType:c.CLOCK},u.a.createElement("table",null,u.a.createElement("tbody",null,u.a.createElement("tr",null,u.a.createElement("th",null,"Title"),u.a.createElement("th",null,"Date Added"),u.a.createElement("th",null,"Author")))),u.a.createElement("table",null,u.a.createElement("tbody",null,e.map((function(e,a){var o=e.id,r=e.title,i=e.author,c=e.added;return u.a.createElement("tr",{key:a,onClick:function(t){return n(e)}},u.a.createElement("td",{key:a},o===(null===t||void 0===t?void 0:t.id)?u.a.createElement(nt.a,{color:"success"}):u.a.createElement(u.a.Fragment,null),r),u.a.createElement("td",null,A(c)),u.a.createElement("td",null,i))}))))))},ot=function(){var e=h((function(e){return e.layoutsModel.activeLayout})),t=h((function(e){return e.layoutsModel.bufferLayout})),n=Object(s.useState)(!1),a=Object(f.a)(n,2),o=a[0],r=a[1],i=p((function(e){return e.googleSheetsModel.fetchAppGoogleSheet})),c=Object(s.useState)(JSON.stringify(e)),l=Object(f.a)(c,2),d=(l[0],l[1]);Object(s.useEffect)((function(){d(JSON.stringify(t))}),[e,t]);return u.a.createElement(qe,null,u.a.createElement("div",{style:{display:"flex",justifyContent:"center",width:"100%",padding:".5em"}},u.a.createElement(ie,{iconBefore:u.a.createElement($.a,null),onClick:function(e){r(!0)},text:"Add New Layout",width:"90%",intent:"success",appearance:"primary"})),o?u.a.createElement($e,{onCloseComplete:function(){i(),r(!1)},visible:o}):u.a.createElement(u.a.Fragment,null),u.a.createElement("div",null,u.a.createElement(at,null)))},rt=function(e){e.dndType;var t=e.className,n=e.children,a=(e.dragAll,e.draggableId),o=e.index,r=h((function(e){return e.layoutsModel.activeLayout})),i=null===r||void 0===r?void 0:r.layout.lg.map((function(e){return e.i})).includes(a);Object(s.useEffect)((function(){i=null===r||void 0===r?void 0:r.layout.lg.map((function(e){return e.i})).includes(a)}),[r]);return u.a.isValidElement(n)?u.a.createElement("div",{style:{display:i?"none":"block"}},u.a.createElement(Z.b,{draggableId:a,index:o},(function(e,a){return console.log(i),u.a.createElement("div",Object.assign({className:t,ref:e.innerRef,style:{display:i?"none":"block"}},e.draggableProps,e.dragHandleProps),u.a.cloneElement(n,{provided:e}))}))):u.a.createElement("div",null)},it=function(){h((function(e){return e.layoutsModel.activeLayout}));return u.a.createElement("div",null,u.a.createElement(ne,{cardType:c.CLOCK,className:"table-container",droppableId:l.WIDGETS_TABLE,isDropDisabled:!1},u.a.createElement(rt,{className:"draggable-widget",dndType:c.WIDGET,draggableId:"clock",index:0,isDragDisabled:!1},u.a.createElement(ae,null)),u.a.createElement(rt,{className:"draggable-widget",dndType:c.WIDGET,draggableId:"info",index:1,isDragDisabled:!1},u.a.createElement("button",null,"HELLO"))))},ct=function(){return u.a.createElement(He.d,null,u.a.createElement(He.b,null,u.a.createElement(He.a,null,"Content"),u.a.createElement(He.a,null,"Widgets"),u.a.createElement(He.a,null,"Layouts")),u.a.createElement(He.c,null,u.a.createElement(Ye,null)),u.a.createElement(He.c,null,u.a.createElement(it,null)),u.a.createElement(He.c,null,u.a.createElement(ot,null)))},lt=function(){var e=h((function(e){return e.appModel.appMode})),t=Object(s.useState)(!1),n=Object(f.a)(t,2),o=n[0],r=n[1],i=C()("editor-panel",{"editor-panel-full":!o,hidden:e===a.DISPLAY,"editor-panel-minimized":o}),c=C()("editor",{"editor-visible":e===a.EDIT});return G.a.createPortal(u.a.createElement(ke.a,{bounds:{left:0,top:0,right:window.innerWidth-50,bottom:window.innerHeight-50},defaultClassName:i,defaultPosition:{x:100,y:100},handle:".editor-panel-handle"},u.a.createElement("div",{className:c},u.a.createElement(st,null,u.a.createElement(ut,{icon:u.a.createElement(je.a,null),onMouseUp:function(){r(!1)}}),u.a.createElement(ut,{icon:u.a.createElement(De.a,null),onMouseUp:function(){r(!0)}})),u.a.createElement(ct,null))),document.querySelector("#editor-panel-container"))},st=function(e){var t=e.children;return u.a.createElement("div",{className:"editor-panel-handle panel-header"},t)},ut=function(e){var t=e.icon,n=e.onMouseUp;return u.a.createElement("div",{className:"window-button",onMouseUp:n},t)},dt=n(309),mt=n(303),ft=function(e){var t=e.active,n=e.onClose;return Object(s.useEffect)((function(){console.log(t)}),[t]),G.a.createPortal(u.a.createElement(Je,{active:t,onClose:n,backdropOpacity:0},u.a.createElement(ye.a.div,{variants:{hidden:{y:100,opacity:0},visible:{opacity:1,y:0,transition:{duration:.5}}},style:{width:"30vw",height:"80vh",backgroundColor:"white",borderRadius:10,padding:"1em"},animate:t?"visible":"hidden"},u.a.createElement(qe,null,u.a.createElement(Xe.a,null,"Connect Labtop"),u.a.createElement("hr",null),u.a.createElement(mt.a,null,"Connect your labtop to use this screen as a display."),u.a.createElement("img",{className:"how-to-image",src:"/cuboard/labtopdiagram.png"}),u.a.createElement(Xe.a,null,"Explore Content"),u.a.createElement("hr",null),u.a.createElement(mt.a,null,"Click on a card to explore data related content."),u.a.createElement("img",{className:"how-to-image",src:"/cuboard/masonary.png"})))),document.getElementById("popup-container"))},vt=function(){var e=function(e){var t=Object(s.useState)(e),n=Object(f.a)(t,2),a=n[0],o=n[1];return[a,function(){return o(!a)}]}(!1),t=Object(f.a)(e,2),n=t[0],o=t[1],r=y().appMode;return G.a.createPortal(u.a.createElement(u.a.Fragment,null,r===a.DISPLAY&&u.a.createElement(ft,{active:n,onClose:o}),r===a.DISPLAY&&u.a.createElement(ie,{appearance:"primary",className:"how-to-use-button",fontSize:"xx-large",height:"4vh",iconBefore:u.a.createElement(dt.a,null),onClick:o,text:"Learn how to use this display",width:"35vw"})),document.querySelector("#how-to-use-button"))},gt=n(310),pt=function(){var e=p((function(e){return e.appModel.toggleAppMode})),t=Object(gt.a)((function(){e()})),n={position:"absolute",width:50,height:50,border:B.showModeSwitchButton?"1px solid red":"none",bottom:0,left:0};return G.a.createPortal(u.a.createElement("div",Object.assign({style:n},t)),document.querySelector("#mode-change-button"))},ht=function(e){var t=e.children;e.padding;return u.a.createElement("div",{style:{width:"100vw",height:"100vh"}},t)},yt=function(){var e,t=Object(m.a)(B.idleTime,!1),n=p((function(e){return e.googleSheetsModel.fetchTopLevelSheet})),o=y(),r=o.appMode,i=o.toggleAppMode;return Object(s.useEffect)((function(){r===a.EDIT&&i()}),[t]),e=function(){n()},Object(s.useEffect)(e,[]),u.a.createElement(u.a.Fragment,null,u.a.createElement(vt,null),u.a.createElement(P,null),u.a.createElement(pt,null),u.a.createElement(Ae,null,u.a.createElement(lt,null),u.a.createElement(ht,null,u.a.createElement(d.a,null,u.a.createElement(Le,null)))))},bt=n(21),Et=n.n(bt),wt=n(33);!function(e){e.CROSS_ORIGIN="CROSS_ORIGIN"}(We||(We={})),function(e){e.MALFORMED_URL="MALFORMED_URL"}(Be||(Be={}));var Ct=function(){function e(t){Object(V.a)(this,e),this.url=void 0,this.errors=void 0,this.warnings=void 0,this.errors=[],this.warnings=[],this.url=t}return Object(z.a)(e,[{key:"validate",value:function(e){var t;console.log(this.errors);var n=function(e){var t=[];new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)||t.push(Be.MALFORMED_URL);return t}(this.url);(t=this.warnings).push.apply(t,Object(U.a)(n)),console.log(n)}},{key:"isValid",value:function(){return 0==this.errors.length}},{key:"errorMessages",value:function(){var e=this,t=[];return this.errors.map((function(n){if(n===We.CROSS_ORIGIN)t.push("Blocked a frame with origin ".concat(e.url,"; from accessing a cross-origin frame."));else console.log("error did not match an error enum")})),t}}]),e}();var xt=function(){function e(t){var n;Object(V.a)(this,e),this.id=void 0,this.src=void 0,this.title=void 0,this.added=void 0,this.sourceId=void 0,this.author=void 0,this.interaction=void 0,this.contentType=void 0,this.metaData=void 0,this.validator=void 0,this.isActive=void 0,this.failed=void 0,this.id=t.src,this.src=t.src,this.title=t.title,this.added=new Date(t.added),this.sourceId=t.src,this.author=t.author,this.interaction=i[t.interaction],this.contentType=function(e){return"string"===typeof e&&/[./](gif|jpg|jpeg|tiff|png)$/i.test(e)}(n=this.src)?"image":function(e){return"string"===typeof e&&/[./](mp4|webm|mov)$/i.test(e)}(n)?"video":function(e){return"string"===typeof e&&e.includes("embed")}(n)?"embed":function(e){return"string"===typeof e&&e.includes("https")}(n)?"website":"widget","widget"===this.contentType&&t.widgetType?(this.metaData={widgetType:t.widgetType},this.id=t.widgetType):(this.metaData={src:t.src,title:t.title,added:new Date(t.added),sourceId:t.src,author:t.author},this.id=t.src),this.isActive=!1,this.validator=new Ct(this.src),this.failed=!1}return Object(z.a)(e,[{key:"setActive",value:function(e){this.isActive=e}},{key:"fail",value:function(){console.log(this.validator.errors),this.failed=!0}}]),e}();var St=function(){function e(t){Object(V.a)(this,e),this.id=void 0,this.contentType=void 0,this.isActive=void 0,this.id=t,this.isActive=!1,this.contentType="widget"}return Object(z.a)(e,[{key:"setActive",value:function(e){this.isActive=e}}]),e}(),Ot=B.widgetIds.map((function(e){return new St(e)})),Lt={availableCards:[],availableWidgets:Ot,activeWidgets:[],activeCards:[],appMode:a.DISPLAY,manageViewModeChange:Object(v.g)((function(e,t){switch(console.log(t),e.setAppMode(t),t){case a.EDIT:case a.DISPLAY:case a.CYCLE:break;default:console.log("reached default in set view mode thunk")}})),toggleAppMode:Object(v.g)((function(e,t,n){var o=n.getState;switch(console.log("toggling view mod "),o().appMode){case a.EDIT:e.setAppMode(a.DISPLAY);break;case a.DISPLAY:e.setAppMode(a.EDIT);break;case a.CYCLE:break;default:console.log("reached default in set view mode thunk")}console.log(o().appMode)})),setAvailableCards:Object(v.b)((function(e,t){console.log("setting available cards"),e.availableCards=t})),setActiveCards:Object(v.b)((function(e,t){console.log(t),e.activeCards=t})),setActiveWidgets:Object(v.b)((function(e,t){console.log(t),e.activeWidgets=t})),setAppMode:Object(v.b)((function(e,t){console.log("setting view mode"),e.appMode=t})),onCardSheetLoadSuccess:Object(v.h)((function(e,t){return t.googleSheetsModel.setAppGoogleSheetData}),function(){var e=Object(wt.a)(Et.a.mark((function e(t,n){return Et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TRIGGERD"),console.log(n.payload),n.payload.getSheetRows("CARDS").then((function(e){console.log(e);var n=e.map((function(e){return{src:e.src,title:e.title,added:e.added,sourceid:e.sourceid,author:e.author,interaction:e.interaction}})).map((function(e){return new xt(e)}));console.log(n),t.setAvailableCards(n)}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),onSetActiveLayout:Object(v.h)((function(e,t){return t.layoutsModel.setActiveLayout}),function(){var e=Object(wt.a)(Et.a.mark((function e(t,n,a){var o,r,i,c,l,s,u;return Et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a.getState,console.log("SETTING ACTIVE LAYOUT"),i=new Set(n.payload.sources()),console.log(n.payload),console.log(n.payload.layoutWidgets),c=new Set(null!==(o=n.payload.layoutWidgets.map((function(e){return e.id})))&&void 0!==o?o:[]),console.log("ACTIVE WIDGET IDS",c),l=r().availableCards.map((function(e){return i.has(e.sourceId)?e.setActive(!0):e.setActive(!1),e})),s=r().availableCards.filter((function(e){return i.has(e.sourceId)})),u=Ot.filter((function(e){return c.has(e.id)})),t.setAvailableCards(l),t.setActiveCards(s),console.log(u),t.setActiveWidgets(u);case 14:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),registerCardLoadFailure:Object(v.g)((function(e,t,n){var a=n.getState;n.getStoreState;console.log("Got card Register Load Failure at Layouts Model"),console.log(t);var o=a().activeCards,r=t.sourceId,i=o.map((function(e){return e.sourceId===r&&(console.log("found failed"),e.fail()),e}));e.setActiveCards(i)})),onSwapCardContent:Object(v.h)((function(e,t){return t.layoutsModel.swapCardContent}),function(){var e=Object(wt.a)(Et.a.mark((function e(t,n,a){var o,r;return Et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=a.getState,console.log("got swap card content"),console.log(n.payload),console.log(o().activeCards),(r=o().activeCards.map((function(e){if(e.sourceId===n.payload.targetId){var t=o().availableCards.find((function(e){return e.sourceId===n.payload.sourceId}));return console.log(t),t}return e})))&&t.setActiveCards(r),console.log(Object(v.f)(n));case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}())},It=Lt,At=n(9),jt=n(27),Dt={layout:{lg:[{w:2,h:1,x:0,y:0,i:"clock",moved:!1,static:!0},{w:2,h:2,x:2,y:0,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/DuBois_Racism.png",moved:!1,static:!1},{w:1,h:2,x:0,y:1,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg",moved:!1,static:!1}],md:[{w:2,h:1,x:0,y:0,i:"clock",moved:!1,static:!0},{w:2,h:2,x:2,y:0,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/DuBois_Racism.png",moved:!1,static:!1},{w:1,h:2,x:0,y:1,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg",moved:!1,static:!1}],sm:[{w:2,h:1,x:0,y:0,i:"clock",moved:!1,static:!0},{w:2,h:2,x:2,y:0,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/DuBois_Racism.png",moved:!1,static:!1},{w:1,h:2,x:0,y:1,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg",moved:!1,static:!1}],xs:[{w:2,h:1,x:0,y:0,i:"clock",moved:!1,static:!0},{w:2,h:2,x:2,y:0,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/DuBois_Racism.png",moved:!1,static:!1},{w:1,h:2,x:0,y:1,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg",moved:!1,static:!1}],xxs:[{w:2,h:1,x:0,y:0,i:"clock",moved:!1,static:!0},{w:2,h:2,x:2,y:0,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/DuBois_Racism.png",moved:!1,static:!1},{w:1,h:2,x:0,y:1,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg",moved:!1,static:!1}]},layoutSettings:{gridSettings:{defaultBackgroundColor:"red"},cardSettings:[]},widgets:[]},Tt=function(){function e(t){Object(V.a)(this,e),this.title=void 0,this.author=void 0,this.added=void 0,this.id=void 0,this.sourceLayout=void 0,this.layout=void 0,this.layoutWidgets=void 0;var n=function(e){var t=JSON.parse(e.layout);return t.layout?t:Dt}(t),a=(n.widgets,n.layout);n.layoutSettings;this.id=t.title+"_"+t.timestamp,this.title=t.title,this.author=t.author,this.added=new Date(t.timestamp.split(" ")[0]),this.sourceLayout=JSON.parse(t.layout).sourceLayout,console.log(JSON.parse(t.layout)),JSON.parse(t.layout).layoutWidgets?this.layoutWidgets=JSON.parse(t.layout).layoutWidgets:this.layoutWidgets=[],this.layout=a}return Object(z.a)(e,[{key:"swapCard",value:function(e){for(var t=0,n=Object.entries(this.layout);t<n.length;t++){var a,o=Object(f.a)(n[t],2),r=o[0],i=o[1],c=Object(jt.a)(i.entries());try{for(c.s();!(a=c.n()).done;){var l=Object(f.a)(a.value,2),s=l[0];l[1].i==e.targetId&&(i[s].i=e.sourceId)}}catch(u){c.e(u)}finally{c.f()}this.layout[r]=i}}},{key:"removeCard",value:function(e){console.log(this.layout);for(var t=0,n=Object.entries(this.layout);t<n.length;t++){var a,o=Object(f.a)(n[t],2),r=o[0],i=o[1],c=Object(jt.a)(i.entries());try{for(c.s();!(a=c.n()).done;){var l=Object(f.a)(a.value,2);l[0],l[1];this.layout[r]=i.filter((function(t){return t.i!==e}))}}catch(s){c.e(s)}finally{c.f()}}}},{key:"clearCards",value:function(){console.log(this.layout);for(var e=0,t=Object.entries(this.layout);e<t.length;e++){var n,a=Object(f.a)(t[e],2),o=a[0],r=a[1],i=Object(jt.a)(r.entries());try{for(i.s();!(n=i.n()).done;){var c=Object(f.a)(n.value,2);c[0],c[1];this.layout[o]=[]}}catch(l){i.e(l)}finally{i.f()}}}},{key:"addCard",value:function(e,t){console.log("ADDING CARD AT LAYOUT DATA"),console.log(this.layout),Object.entries(this.layout)[0][1].map((function(e){return e.i})).includes(e.sourceId)&&console.log("ADDING SOMETHING THAT'S ALREADY PRESENT");for(var n=0,a=Object.entries(this.layout);n<a.length;n++){var o=Object(f.a)(a[n],2),r=o[0],i=(o[1],{x:t.x,y:t.y,w:1,h:1,i:e.sourceId});this.layout[r].push(i)}}},{key:"addWidget",value:function(e,t){Object.entries(this.layout)[0][1].map((function(e){return e.i})).includes(e.id)&&console.log("ADDING A WIDGET THAT'S ALREADY PRESENT"),this.layoutWidgets.push(e);for(var n=0,a=Object.entries(this.layout);n<a.length;n++){var o=Object(f.a)(a[n],2),r=o[0],i=(o[1],{x:t.x,y:t.y,w:1,h:1,i:e.id});this.layout[r].push(i)}}},{key:"resetLayout",value:function(){console.log("RESETING LAYOUT"),console.log(this.sourceLayout.layout),this.layout=Object(At.a)({},this.sourceLayout.layout)}},{key:"failCard",value:function(e){console.log("FAILING CARD AT LAYOUT DATA")}},{key:"setGridLayout",value:function(e){console.log(e),this.layout=e}},{key:"sources",value:function(){return Object.entries(this.layout)[0][1].map((function(e){return e.i}))}},{key:"widgets",value:function(){console.log("GETTING WIDGETS AT WIDGET LAYOUTDATA");var e=Object.entries(this.layout)[0][1];console.log(e);var t=e.filter((function(e){return B.widgetIds.includes(e.i)}));return console.log("just widgets",t),t.map((function(e){return e.i}))}}]),e}();var kt=[{i:"https://codepen.io/rcyou/embed/QEObEk?height=265&theme-id=light&default-tab=css,result",x:2,y:2,w:1,h:1,static:!1},{i:"https://sketchfab.com/models/e55956fee6444011b574bad021a03eae/embed?autostart=1",x:3,y:0,w:1,h:1,minW:1},{i:"https://www.lib.ncsu.edu/huntlibrary",x:3,y:1,w:1,h:1,minW:1}],Rt={layout:{lg:kt,md:kt,sm:kt,xs:kt,xxs:kt},layoutSettings:{cardSettings:[],gridSettings:{defaultBackgroundColor:"red"}},widgets:[]},Mt={title:"default static layout",author:"webb",timestamp:"1/1/2021",layout:JSON.stringify(Rt),interaction:"active"},Nt=new Tt(Mt),_t={activeLayout:void 0,externalLayouts:[],bufferLayout:Nt.layout,tempLayout:Nt.layout,onSetAppGoogleSheetData:Object(v.h)((function(e,t){return t.googleSheetsModel.setAppGoogleSheetData}),(function(e,t){t.payload.getSheetRows("LAYOUTS").then((function(t){var n,a=t.map((function(e){return new Tt(e)}));if(B.useStaticLayout)n=Nt,e.setActiveLayout(n),e.setBufferLayout(n.layout);else{var o=a.filter((function(e){return e.title===B.defaultLayoutName}))[0];o&&(console.log(o),e.setActiveLayout(o),e.setBufferLayout(o.layout))}e.setExternalLayouts(a)}))})),onToggleViewMode:Object(v.h)((function(e,t){return t.appModel.toggleAppMode}),(function(e,t,n){var o=n.getState,r=n.getStoreState,i=o().activeLayout,c=o().bufferLayout;r().appModel.appMode===a.DISPLAY&&(console.log("IT WAS IN DISPLAY MODE"),(null===i||void 0===i?void 0:i.layout)&&(i.layout=c,e.setActiveLayout(i)))})),setActiveLayout:Object(v.b)((function(e,t){e.activeLayout=t})),setExternalLayouts:Object(v.b)((function(e,t){console.log("setting external layouts"),e.externalLayouts=t})),swapCardContent:Object(v.g)((function(e,t,n){var a=n.getState,o=a().activeLayout;if(o){var r=a().bufferLayout;o.layout=r,o.swapCard(t),e.setActiveLayout(o)}})),deleteCard:Object(v.g)((function(e,t,n){var a=n.getState,o=a().activeLayout;if(o){var r=a().bufferLayout;o.layout=r,o.removeCard(t),e.setActiveLayout(o)}})),clearCards:Object(v.g)((function(e,t,n){var a=n.getState,o=a().activeLayout;if(o){var r=a().bufferLayout;o.layout=r,o.clearCards(),e.setActiveLayout(o)}})),addCard:Object(v.g)((function(e,t,n){var a=n.getState,o=(0,n.getStoreState)().appModel.availableCards,r=t.sourceId,i=t.targetPosition,c=o.find((function(e){return e.sourceId==r})),l=a().activeLayout;if(l&&c){var s=a().bufferLayout;l.setGridLayout(s),null===l||void 0===l||l.addCard(c,i),e.setActiveLayout(l)}})),addWidget:Object(v.g)((function(e,t,n){var a=n.getState,o=n.getStoreState;console.log("ADDING NEW WIDGET!!!");var r=o().appModel.availableWidgets,i=t.sourceId,c=t.targetPosition,l=r.find((function(e){return e.id==i})),s=a().activeLayout;if(s&&l){var u=a().bufferLayout;s.setGridLayout(u),null===s||void 0===s||s.addWidget(l,c),e.setActiveLayout(s)}})),registerCardLoadFailure:Object(v.g)((function(e,t,n){var a=n.getState,o=(n.getStoreState,a().activeLayout);o&&o.failCard(t)})),resetLayout:Object(v.g)((function(e,t,n){var a=n.getState;if(a().activeLayout){var o=a().activeLayout;null===o||void 0===o||o.resetLayout(),o&&e.setActiveLayout(o)}})),setBufferLayout:Object(v.b)((function(e,t){e.bufferLayout=t})),setTempLayout:Object(v.b)((function(e,t){e.tempLayout=t})),updateLayout:Object(v.b)((function(e,t){var n=e.activeLayout;n&&(n.swapCard(t),e.activeLayout=n)}))},Gt=_t,Pt={key:"181P-SDszUOj_xn1HJ1DRrO8pG-LXyXNmINcznHeoK8k",gid:0},Ut=function(){function e(t,n){Object(V.a)(this,e),this.title=void 0,this.sheetId=void 0,this.sheets=void 0,this.title=t,this.sheetId=n,this.sheets=new Map}return Object(z.a)(e,[{key:"getSheetRows",value:function(e){var t=this;return new Promise((function(n,a){var o=t.sheets.get(e);o?n(o.map((function(e){return e}))):a("sheet with title ".concat(e," did not exist"))}))}},{key:"addSheet",value:function(e,t){this.sheets.set(e,t)}}]),e}(),Wt=n(91),Bt=n.n(Wt),Vt={layoutDataGoogleSheet:null,cardDataGoogleSheet:null,appGoogleSheet:void 0,formUrl:void 0,layoutSheetUrl:void 0,cardSheetUrl:void 0,fetchTopLevelSheet:Object(v.g)((function(e){Ft("TOP_LEVEL","https://docs.google.com/spreadsheets/d/e/2PACX-1vRalMG47cvXmCbEqeIJWn5qwd9bPhHUV16_VN7LuKsv53YQdn9e8XSAzNulXCtP_BIFBTUy0Z5e6KKE/pub?output=csv").then((function(t){console.log(t);var n=t.rows[0];e.setFormUrl(n.googleForm),e.setLayoutsSheetUrl(zt(n.layoutsSheet)),e.setCardSheetUrl(zt(n.cardsSheet)),e.fetchSheet([{name:"LAYOUTS",url:zt(n.layoutsSheet)},{name:"CARDS",url:zt(n.cardsSheet)}])})),console.log("GOT HERE")})),fetchSheet:Object(v.g)(function(){var e=Object(wt.a)(Et.a.mark((function e(t,n,a){var o,r;return Et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=a.getState,console.log(o().cardSheetUrl,o().layoutSheetUrl),r=n.map((function(e){return Ft(e.name,e.url)})),Promise.allSettled(r).then((function(e){var n=new Ut("DSC App",Pt.key),a=[];e.forEach((function(e,t){console.log(e),"fulfilled"==e.status&&(a.push(e),n.addSheet(e.value.sheetTitle,e.value.rows)),"rejected"==e.status&&console.error("failed ")})),t.setAppGoogleSheetData(n),n.getSheetRows("CARDS").then((function(e){t.setCardDataGoogleSheet(e)})),n.getSheetRows("LAYOUTS").then((function(e){t.setLayoutDataGoogleSheet(e)}))}));case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),fetchAppGoogleSheet:Object(v.g)(function(){var e=Object(wt.a)(Et.a.mark((function e(t,n,a){var o,r,i;return Et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=a.getState,console.log(o().cardSheetUrl,o().layoutSheetUrl),r=Ft("CARDS",o().cardSheetUrl),i=Ft("LAYOUTS",o().layoutSheetUrl),Promise.allSettled([r,i]).then((function(e){var n=new Ut("DSC App",Pt.key),a=[];e.forEach((function(e,t){console.log(e),"fulfilled"==e.status&&(a.push(e),n.addSheet(e.value.sheetTitle,e.value.rows)),"rejected"==e.status&&console.error("failed ")})),t.setAppGoogleSheetData(n),n.getSheetRows("CARDS").then((function(e){t.setCardDataGoogleSheet(e)})),n.getSheetRows("LAYOUTS").then((function(e){t.setLayoutDataGoogleSheet(e)}))}));case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),setAppGoogleSheetData:Object(v.b)((function(e,t){e.appGoogleSheet=t})),setCardDataGoogleSheet:Object(v.b)((function(e,t){e.cardDataGoogleSheet=t})),setLayoutDataGoogleSheet:Object(v.b)((function(e,t){e.layoutDataGoogleSheet=t})),setFormUrl:Object(v.b)((function(e,t){e.formUrl=t})),setCardSheetUrl:Object(v.b)((function(e,t){e.formUrl=t})),setLayoutsSheetUrl:Object(v.b)((function(e,t){e.formUrl=t}))};function zt(e){console.log(e);var t=e.split("/")[5],n=e.split("gid=")[1];return"https://docs.google.com/spreadsheets/d/".concat(t,"/export?format=csv&gid=").concat(n)}function Ft(e,t){var n;return new Promise((function(a){console.log(t),Bt.a.parse(t,{download:!0,header:!0,delimiter:",",dynamicTyping:!0,complete:function(t){n=t.data,console.log(n),a({rows:n,sheetTitle:e})}})}))}var Yt={appModel:It,layoutsModel:Gt,googleSheetsModel:Vt},Ht=Object(v.d)(Yt,{name:"Cuboard App Store"});G.a.render(u.a.createElement(v.a,{store:Ht},u.a.createElement(yt,null)),document.querySelector("#root"))},84:function(e,t,n){},85:function(e,t,n){},95:function(e,t,n){}},[[286,1,2]]]);
//# sourceMappingURL=main.97b02537.chunk.js.map