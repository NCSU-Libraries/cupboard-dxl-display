(this.webpackJsonpcuboard=this.webpackJsonpcuboard||[]).push([[0],{110:function(e,t,n){},111:function(e,t,n){},128:function(e,t,n){},152:function(e,t,n){},173:function(e,t,n){},174:function(e,t,n){},179:function(e,t,n){},181:function(e,t,n){},194:function(e,t,n){},212:function(e,t,n){},213:function(e,t,n){},283:function(e,t,n){},284:function(e,t,n){},292:function(e,t,n){},293:function(e,t,n){},294:function(e,t,n){},295:function(e,t,n){},314:function(e,t,n){},315:function(e,t,n){},316:function(e,t,n){},317:function(e,t,n){},318:function(e,t,n){"use strict";n.r(t);var a,o,r,i,c,l,u=n(0),s=n.n(u),d=(n(173),n(174),n(167)),m=n(350),f=n(343),v=n(11);!function(e){e.DISPLAY="DISPLAY",e.EDIT="EDIT",e.CYCLE="CYCLE"}(a||(a={})),function(e){e.GRID="GRID",e.PREVIEW="PREVIEW",e.FULL_SCREEN="FULL_SCREEN"}(o||(o={})),function(e){e.CARD_TABLE_DATA="CARD_TABLE_DATA",e.DISPLAY_CARD="DISPLAY_CARD"}(r||(r={})),function(e){e.ACTIVE="ACTIVE",e.STATIC="STATIC",e.FIXED="FIXED",e.IMAGE="IMAGE"}(i||(i={})),function(e){e.PLACEHOLDER="PLACEHOLDER",e.CLOCK="CLOCK",e.IFRAME="IFRAME",e.CARD_ROW="CARD_ROW",e.LAYOUT="LAYOUT",e.WIDGET="WIDGET"}(c||(c={})),function(e){e.LAYOUT_TABLE="LAYOUT_TABLE",e.CARD_TABLE="CARD_TABLE",e.CARD_GRID="CARD_GRID",e.WIDGETS_TABLE="WIDGETS_TABLE"}(l||(l={}));var g=n(15),p=Object(g.e)(),h=p.useStoreActions,y=(p.useStoreDispatch,p.useStoreState);var b=function(){var e=h((function(e){return e.appModel.toggleAppMode}));return{appMode:y((function(e){return e.appModel.appMode})),toggleAppMode:e}},E=function(){var e=y((function(e){return e.appModel.activeCards})),t=y((function(e){return e.appModel.activeWidgets})),n=h((function(e){return e.layoutsModel.swapCardContent})),a=h((function(e){return e.layoutsModel.addWidget})),o=h((function(e){return e.layoutsModel.deleteCard})),r=h((function(e){return e.layoutsModel.addCard})),i=h((function(e){return e.layoutsModel.setBufferLayout})),c=y((function(e){return e.layoutsModel.activeLayout})),l=h((function(e){return e.layoutsModel.setRandomLayout}));return{activeCards:e,activeWidgets:t,setBufferLayout:i,activeLayout:c,deleteCard:o,addCard:r,swapCard:n,addWidget:a,setActiveLayout:h((function(e){return e.layoutsModel.setActiveLayout})),setRandomLayout:l}};function w(e,t){Object(u.useEffect)((function(){var n=function(n){var a=null===e||void 0===e?void 0:e.current;a&&!a.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}n(179);var C=n(22),x=n.n(C),S=n(33),O={uniforms:{time:{value:0}},vertexShader:"\n    vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n    vec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n    vec3 permute(vec3 x) { return mod289(((x*34.0)+1.0)*x); }\n  \n    float snoise(vec2 v) {\n        const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                            0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                            -0.577350269189626,  // -1.0 + 2.0 * C.x\n                            0.024390243902439); // 1.0 / 41.0\n        vec2 i  = floor(v + dot(v, C.yy) );\n        vec2 x0 = v -   i + dot(i, C.xx);\n        vec2 i1;\n        i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n        vec4 x12 = x0.xyxy + C.xxzz;\n        x12.xy -= i1;\n        i = mod289(i); // Avoid truncation effects in permutation\n        vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n            + i.x + vec3(0.0, i1.x, 1.0 ));\n  \n        vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n        m = m*m ;\n        m = m*m ;\n        vec3 x = 2.0 * fract(p * C.www) - 1.0;\n        vec3 h = abs(x) - 0.5;\n        vec3 ox = floor(x + 0.5);\n        vec3 a0 = x - ox;\n        m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n        vec3 g;\n        g.x  = a0.x  * x0.x  + h.x  * x0.y;\n        g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n        return 130.0 * dot(m, g);\n    }\n  \n  \n    \n  \n    uniform float u_time;\n    uniform vec2 u_randomisePosition;\n  \n    varying float vDistortion;\n    varying float xDistortion;\n    varying vec2 vUv;\n  \n    void main() {\n        vUv = uv;\n        vDistortion = snoise(vUv.xx * 3. - u_randomisePosition * 0.15);\n        xDistortion = snoise(vUv.yy * 1. - u_randomisePosition * 0.05);\n        vec3 pos = position;\n        pos.z += (vDistortion * 35.);\n        pos.x += (xDistortion * 25.);\n  \n        gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n    }\n    ",fragmentShader:"\n    vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n    vec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n    vec3 permute(vec3 x) { return mod289(((x*34.0)+1.0)*x); }\n  \n    float snoise(vec2 v) {\n        const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                            0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                            -0.577350269189626,  // -1.0 + 2.0 * C.x\n                            0.024390243902439); // 1.0 / 41.0\n        vec2 i  = floor(v + dot(v, C.yy) );\n        vec2 x0 = v -   i + dot(i, C.xx);\n        vec2 i1;\n        i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n        vec4 x12 = x0.xyxy + C.xxzz;\n        x12.xy -= i1;\n        i = mod289(i); // Avoid truncation effects in permutation\n        vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n            + i.x + vec3(0.0, i1.x, 1.0 ));\n  \n        vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n        m = m*m ;\n        m = m*m ;\n        vec3 x = 2.0 * fract(p * C.www) - 1.0;\n        vec3 h = abs(x) - 0.5;\n        vec3 ox = floor(x + 0.5);\n        vec3 a0 = x - ox;\n        m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n        vec3 g;\n        g.x  = a0.x  * x0.x  + h.x  * x0.y;\n        g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n        return 130.0 * dot(m, g);\n    }\n  \n  \n  \n  \n  \n    vec3 rgb(float r, float g, float b) {\n      return vec3(r / 255., g / 255., b / 255.);\n  }\n  \n  vec3 rgb(float c) {\n      return vec3(c / 255., c / 255., c / 255.);\n  }\n  \n  uniform vec3 u_bg;\n  uniform vec3 u_bgMain;\n  uniform vec3 u_color1;\n  uniform vec3 u_color2;\n  uniform float u_time;\n  \n  varying vec2 vUv;\n  varying float vDistortion;\n  \n  void main() {\n      vec3 bg = rgb(u_bg.r, u_bg.g, u_bg.b);\n      vec3 c1 = rgb(u_color1.r, u_color1.g, u_color1.b);\n      vec3 c2 = rgb(u_color2.r, u_color2.g, u_color2.b);\n      vec3 bgMain = rgb(u_bgMain.r, u_bgMain.g, u_bgMain.b);\n  \n      float noise1 = snoise(vUv + u_time * 0.08);\n      float noise2 = snoise(vUv * 2. + u_time * 0.1);\n  \n      vec3 color = bg;\n      color = mix(color, c1, noise1 * 0.6);\n      color = mix(color, c2, noise2 * .4);\n  \n      color = mix(color, mix(c1, c2, vUv.x), vDistortion);\n  \n      float border = smoothstep(0.1, 0.6, vUv.x);\n  \n      color = mix(color, bgMain, 1. -border);\n  \n      gl_FragColor = vec4(color, 1.0);\n  }\n    "},L=n(329),j=n(352),I=n(13);function A(e){if(e){var t=new Date(e),n=""+(t.getMonth()+1),a=""+t.getDate(),o=t.getFullYear();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),[o,n,a].join("-")}return"faulty date"}function D(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function T(e,t){return Math.random()*(t-e)+e}var R=new I.Vector2(1,2);function k(e,t,n){return new I.Vector3(e,t,n)}var M={pink:k(182,9,76),brightPink:k(241,3,66),darkPurple:k(42,8,56),orange:k(244,93,31),darkgrey:k(50,50,50),lightgrey:k(150,150,150),red:k(204,0,0)},N={u_bg:{type:"v3",value:M.lightgrey},u_bgMain:{type:"v3",value:M.lightgrey},u_color1:{type:"v3",value:M.lightgrey},u_color2:{type:"v3",value:M.lightgrey},u_time:{type:"f",value:0},u_randomisePosition:{type:"v2",value:R}},_=function(e){var t=e.position,n=Object(u.useRef)(),a=0,o=0,r=D(0,32),i=D(0,32),c=!1;return Object(S.b)((function(e){e.clock;n.current.uniforms.u_randomisePosition.value=new I.Vector2(o,o),n.current.uniforms.u_color1.value=new I.Vector3(function(e,t,n){return Math.floor(192+64*Math.cos((e*e-t*t)/300+n))}(r,i,a/2),function(e,t,n){return Math.floor(192+64*Math.sin((e*e*Math.cos(n/4)+t*t*Math.sin(n/3))/300))}(r,i,a/2),function(e,t,n){return Math.floor(192+64*Math.sin(5*Math.sin(n/9)+((e-100)*(e-100)+(t-100)*(t-100))/1100))}(r,i,a/2)),n.current.uniforms.u_time.value=a,a%.1===0&&(!1===c?(r-=1)<=0&&(c=!0):(r+=1)>=32&&(c=!1)),o+=.01,a+=.01})),s.a.createElement("mesh",{position:t,rotation:[I.MathUtils.degToRad(0),I.MathUtils.degToRad(0),I.MathUtils.degToRad(90)]},s.a.createElement("planeGeometry",{attach:"geometry",args:[400,window.innerWidth/2,45,45]}),s.a.createElement("shaderMaterial",{attach:"material",vertexShader:O.vertexShader,fragmentShader:O.fragmentShader,uniforms:N,ref:n}))},P=function(){var e=Object(u.useRef)();return s.a.createElement(S.a,{gl:{antialias:!1,alpha:!1}},s.a.createElement(L.a,{ref:e,position:[0,0,0],fov:75,aspect:window.innerWidth/window.innerHeight,near:.1,far:1e3}),s.a.createElement(_,{position:[0,0,-100],faceResolution:100}),s.a.createElement(j.a,null))},G=n(26),U=n.n(G),W=function(){var e=y((function(e){return e.appModel.appMode})),t=Object(u.useState)({x:window.innerWidth,y:window.innerHeight}),n=Object(v.a)(t,2),o=(n[0],n[1],Object(u.useState)({backgroundColor:"gray"})),r=Object(v.a)(o,2),i=r[0],c=r[1];Object(u.useEffect)((function(){var t=e==a.EDIT;c({position:"absolute",height:"100vh",width:"100vw",top:0,left:0,backgroundColor:t?"white":"gray",transition:"background-color 0.5s ease"})}),[e]);var l=x()("background-container",{"background-container-display-mode":e==a.DISPLAY,"background-container-edit-mode":e==a.EDIT});return U.a.createPortal(s.a.createElement("div",{style:i,className:l},e===a.EDIT?s.a.createElement("div",{style:{position:"absolute",height:"100vh",width:"100vw",top:0,left:0,backgroundColor:"lightgrey",transition:"background-color 0.5s ease"}}):s.a.createElement("div",{className:"background-container"},s.a.createElement("div",{className:"shader-container"},s.a.createElement(P,null)),s.a.createElement("div",{className:"particle-container"}))),document.querySelector("#background"))},B=s.a.memo(W),V=n(20),z=(n(128),n(181),n(76)),F={idleTime:1e7,sheetLink:"https://docs.google.com/spreadsheets/d/1BR1AQ5Zmt_o_0dOm9AvDht0G3Q6RXQUhX71Vi4H7tTU/edit#gid=0",defaultIframeScale:.5,defaultEmbedScale:1,defaultLayoutName:"NewStaticLayout2",formLink:"https://forms.gle/nc3UQFtFUtSaF5mu6",widgetIds:["clock","group label","info"],gridRows:6,gridCols:4,showModeSwitchButton:!1,useStaticLayout:!1,gridBottomPadding:50,rotationDuration:3e3},Y=n(1),H=n(3),q=n(4),J=n(5),K=(n(194),n(158)),X=n.n(K),Q=function(e){var t=e.card,n=e.scale,a=e.cardView,r=e.onError,i=e.onLoad,c=Object(u.useState)(!1),l=Object(v.a)(c,2),d=l[0],m=l[1],f=Object(u.useState)(!0),g=Object(v.a)(f,2),p=g[0],h=(g[1],Object(u.useState)(!1)),y=Object(v.a)(h,2),b=y[0],E=y[1],w=(x()("iframe-view-overlay",{"iframe-view-overlay-hidden":b,"iframe-view-overlay-loading":!b}),x()("iframe-container",{"iframe-container-hidden":!p})),C={border:"none",transform:"scale(".concat(n,")"),width:"".concat(1/n*100,"%"),height:"".concat(1/n*100,"%"),transformOrigin:"top left"},S=t.src,O=t.contentType;return s.a.createElement("div",{className:w,onDoubleClick:function(){m(!d)}},"video"===O?s.a.createElement($,{onReady:function(e){E(!0)},src:t.src}):"image"===O?s.a.createElement("img",{onLoad:function(e){i(e)},onError:function(e){r(e)},src:S,style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:a===o.PREVIEW?"contain":"center"}}):s.a.createElement("iframe",{onLoad:function(e){E(!0)},src:S,style:d?{width:"100%",height:"100%",border:"5px blue"}:C}))},Z=s.a.memo(Q),$=function(e){var t=e.src,n=e.onReady;return s.a.createElement("div",{className:"player-wrapper"},s.a.createElement(X.a,{className:"react-player",controls:!0,height:"100%",muted:!0,onReady:n,playing:!0,url:t,width:"100%"}))},ee=(s.a.PureComponent,n(28)),te=n(55),ne=(n(212),n(213),n(330)),ae=function(){return s.a.createElement("div",{className:"pulsar"},s.a.createElement(ne.a,{size:200}))},oe=["children","className","cardType"],re=function(e){var t=e.children,n=e.className,a=(e.cardType,Object(ee.a)(e,oe));return s.a.createElement(te.c,Object.assign({},a,{type:"DEFAULT"}),(function(e,a){return s.a.createElement("div",Object.assign({},e.innerRef,{ref:e.innerRef,className:a.isDraggingOver?"droppable-hovered "+n:"droppable "+n}),s.a.createElement("div",{className:a.isDraggingOver?"droppable-overlay droppable-overlay-visible":"droppable-overlay droppable-overlay-hidden"},s.a.createElement(ae,null)),t,e.placeholder)}))},ie=(n(283),function(){var e=Object(u.useState)(new Date),t=Object(v.a)(e,2),n=t[0],a=t[1];return Object(u.useEffect)((function(){var e=setInterval((function(){a(new Date)}),1e3);return function(){clearInterval(e)}})),s.a.createElement("div",{style:{height:"100%",padding:".25em",width:"100%",fontSize:"4vw",fontWeight:600,color:"white",boxSizing:"border-box"}},s.a.createElement("div",null,"Data Experience Lab"),s.a.createElement("div",null,n.toLocaleTimeString("en-IT",{hour12:!0,timeStyle:"short"})))}),ce=(n(284),n(345)),le=(n(163),n(346)),ue=function(e){var t=e.onClick,n=e.text,a=e.appearance,o=e.className,r=e.iconBefore,i=e.width,c=e.height,l=e.style,u=e.containerClass,d=e.fontSize,m=e.intent;return s.a.createElement("div",{className:u,onMouseUp:t,style:{width:i,height:"100%"}},s.a.createElement(le.a,{appearance:null!==a&&void 0!==a?a:"default",className:o,cursor:"pointer",fontSize:d,height:null!==c&&void 0!==c?c:void 0,iconBefore:null!==r&&void 0!==r?r:void 0,intent:null!==m&&void 0!==m?m:"none",style:l,width:null!==i&&void 0!==i?i:void 0},n))},se=(n(292),function(e){var t=e.data,n=(e.className,Object(u.useState)(!1)),a=Object(v.a)(n,2);a[0],a[1];return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"card-footer"},s.a.createElement("h2",{style:{}},t.title),s.a.createElement("p",null,"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&apos standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book"," ")))}),de=(n(293),n(331)),me=function(e){var t=e.onClick;e.action;return s.a.createElement("div",{className:"delete-button-container",onMouseUp:t,onClick:t,onTouchEnd:function(e){}},s.a.createElement("div",{style:{display:"flex"}},s.a.createElement(de.a,{size:30})))},fe=(n(294),n(332)),ve=function(e){var t=e.onClick;Object(u.useRef)();return s.a.createElement("div",{className:"settings-button-container",onMouseUp:t},s.a.createElement("div",{style:{display:"flex"}},s.a.createElement(fe.a,{size:15})))},ge=(n(295),n(333)),pe=n(334),he=function(e){var t=e.title,n=e.children;return s.a.createElement("div",{className:"menu-input-row"},t,n)},ye=function(e){var t=e.setScale,n=e.scale;return s.a.createElement("div",{className:"scale-controls-grid"},s.a.createElement(ue,{containerClass:"scale-controls-left",height:20,iconBefore:s.a.createElement(ge.a,{size:30}),onClick:function(){t(-.1)},width:20}),s.a.createElement("input",{onChange:function(e){t(parseInt(e.target.value))},style:{width:30},defaultValue:.5,type:"text",value:n.toString().slice(0,3)}),s.a.createElement(ue,{containerClass:"scale-controls-right",height:20,iconBefore:s.a.createElement(pe.a,{size:30}),onClick:function(){t(.1)},width:20}))},be=function(e){var t=e.isShown,n=e.setScale,a=e.setBackgroundColor,o=e.setShowMenu,r=e.scale,i=Object(u.useRef)(null),c=w(i,(function(){o(!1)})),l={display:t?"flex":"none"};return s.a.createElement("div",Object.assign({className:"menu-container",ref:i,style:l},c),s.a.createElement(he,{title:"Background Color:"},s.a.createElement("input",{className:"nodrag",defaultValue:"rbga(0,0,0,0)",onChange:function(e){a(e.target.value)},type:"color"})),s.a.createElement(he,{title:"Scale: "},s.a.createElement(ye,{scale:r,setScale:n})))},Ee=n(348),we=n(344),Ce=function(e){var t=e.cardType,n=e.children,r=e.cardId,i=e.data,l=e.onClick,d=Object(u.useRef)(null),m=b().appMode,f=E().deleteCard,p=Object(u.useState)(o.GRID),h=Object(v.a)(p,2),y=h[0],C=h[1],S=Object(u.useState)(!1),O=Object(v.a)(S,2),L=O[0],j=O[1],I=Object(u.useState)(!1),A=Object(v.a)(I,2),D=A[0],R=A[1],k=Object(g.i)((function(){return{cardView:o.GRID,setCardView:Object(g.b)((function(e,t){e.cardView=t})),scale:"embed"===(null===i||void 0===i?void 0:i.contentType)?F.defaultEmbedScale:F.defaultIframeScale,setScale:Object(g.b)((function(e,t){e.scale+=t})),cardBackgroundColor:"",setBackgroundColor:Object(g.b)((function(e,t){e.cardBackgroundColor=t})),setShowMenu:Object(g.b)((function(e,t){e.showMenu=t})),toggleMenu:Object(g.b)((function(e){e.showMenu=!e.showMenu})),showMenu:!1,cardType:t,cardClass:Object(g.c)([function(e){return e.cardView}],(function(e){return x()("card",{"card-edit":m===a.EDIT,"card-display":m===a.DISPLAY&&e==o.GRID,"card-preview":e===o.PREVIEW,"card-fullscreen":e===o.FULL_SCREEN,"card-empty":m===a.EDIT&&!n,"card-empty-hidden":!n&&m==a.DISPLAY,"card-locked":N.cardType===c.CLOCK&&m===a.EDIT})})),cardInfoClass:Object(g.c)((function(e){return x()("info",{"info-hidden":m===a.EDIT,"info-display":m===a.DISPLAY,"info-preview":e.cardView===o.PREVIEW})})),handleCardPress:Object(g.g)((function(e,t,n){var c,l=n.getState;if(console.log(l().cardClass),m===a.DISPLAY&&void 0!=r)switch(l().cardView){case o.GRID:var u;if("widget"!==(null===i||void 0===i?void 0:i.contentType))e.setCardView(o.PREVIEW),console.log("SETTING CARD VIEW TO PREVIEW"),document.getElementById(null!==(u=null===i||void 0===i?void 0:i.id)&&void 0!==u?u:"view_card").style.zIndex="1000";break;case o.PREVIEW:e.setCardView(o.GRID),document.getElementById(null!==(c=null===i||void 0===i?void 0:i.id)&&void 0!==c?c:"view_card").style.zIndex="0"}}))}}),[m],(function(e){return{devTools:!1}})),M=Object(v.a)(k,2),N=M[0],_=M[1],P={scale:N.scale,setScale:_.setScale,setBackgroundColor:_.setBackgroundColor,setShowMenu:_.setShowMenu},G=x()("card-modal-backdrop",{"card-modal-backdrop-active":y===o.PREVIEW||y===o.FULL_SCREEN,"card-modal-backdrop-inactive":y===o.GRID}),U=x()("card-child-container",{"card-child-container-preview":N.cardView===o.PREVIEW,"card-child-container-fullscreen":N.cardView===o.FULL_SCREEN,"card-child-container-grid":N.cardView===o.GRID}),W=function(e){var t=e.keyCode,n=e.action,a=e.disabled;s.a.useEffect((function(){return a||o(),function(){r()}}));var o=function(){document.addEventListener("keydown",i)},r=function(){document.removeEventListener("keydown",i)},i=function(e){e.keyCode===t&&(e.preventDefault(),n(e))};return{enable:o,disable:r}}({keyCode:27,action:function(){y!==o.FULL_SCREEN&&y!==o.PREVIEW||C(o.GRID)},disabled:!1}),B=(W.enable,W.disable,function(){if(m==a.EDIT&&i)return s.a.createElement(s.a.Fragment,null,s.a.createElement(me,{onClick:function(){console.log("got delete button click"),f(i.id)},action:function(){f(i.id)}}),s.a.createElement(ve,{onClick:function(e){_.toggleMenu()}}))}),V=function(){if(y===o.PREVIEW&&i&&"widget"!==i.contentType)return s.a.createElement(se,{className:N.cardInfoClass,data:i})},z=Object(u.useRef)(null);w(z,(function(e){e.preventDefault(),console.log("clicked outside"),N.cardView==o.PREVIEW&&_.setCardView(o.GRID)}));Object(u.useEffect)((function(){if(d.current){var e,t,n,a=null===(e=d.current)||void 0===e||null===(t=e.parentElement)||void 0===t?void 0:t.parentElement;if(a)a.id=null!==(n=null===i||void 0===i?void 0:i.id)&&void 0!==n?n:"view_card"}}),[]);var Y=Object(u.useMemo)((function(){if(d.current){var e=d.current.getBoundingClientRect();return console.log(xe(e)),xe(e)}}),[N.cardView]),H={active:{opacity:1,transition:{delay:T(.4,.5),duration:.5}},preview:{opacity:1,x:Y?Y[0]:0,y:Y?Y[1]:0},normal:{opacity:1},error:{opacity:[1,0],backgroundColor:"red"},loaded:{outline:["0px solid green","4px solid green","0px solid green"],opacity:[0,1,1],transition:{delay:T(.4,.5),duration:.5}}};return s.a.createElement(s.a.Fragment,null,s.a.createElement(Ee.a,null,s.a.createElement(we.a.div,{exit:{opacity:0,x:-300},ref:d,layoutId:"viewcard",className:N.cardClass,style:{transformOrigin:"center",willChange:"transform",height:"100%",backgroundColor:N.cardBackgroundColor,opacity:0},variants:H,animate:L&&N.cardView===o.GRID?"error":D&&N.cardView===o.GRID?"loaded":N.cardView===o.PREVIEW?"preview":m==a.DISPLAY?"active":"normal"},n&&s.a.createElement("div",{className:G},s.a.createElement("div",{className:U,onMouseUp:function(){_.handleCardPress(),l&&l()},ref:z},"widget"!==(null===i||void 0===i?void 0:i.contentType)?[B(),V()]:[B()],n(N.scale,N.cardView,(function(e){j(!0)}),(function(e){R(!0)})),s.a.createElement(be,Object.assign({},P,{isShown:N.showMenu}))),function(){if(y===o.FULL_SCREEN)return s.a.createElement(Se,{onClick:function(){C(o.GRID)}})}()))))},xe=function(e){var t=window.innerWidth,n=window.innerHeight,a=t/2-60*(window.innerWidth/100)/2,o=n/2-40*(window.innerWidth/100)/2,r=e.x,i=e.y,c=a-r,l=o-i;return a<r&&(c=r-a,c*=-1),o<i&&(l=i-o,l*=-1),[c,l]},Se=function(e){var t=e.onClick;return s.a.createElement("div",{className:"return-button-container"},s.a.createElement(ue,{onClick:t,text:"Return",width:300}))};var Oe=s.a.memo(Ce),Le=function(e){var t=e.gridSettings,n=Object(z.WidthProvider)(z.Responsive),a=function(e,t){for(var n=[],a=0;a<e;a++)for(var o=0;o<t;o++)n.push({x:o,y:a});var r=n.map((function(e){return{x:e.x,y:e.y,w:1,h:1,i:"empty_card_[".concat(e.x,", ").concat(e.y,"]"),minW:1,maxW:1,minH:1,maxH:1,static:!1,isDraggable:!1,isResizable:!1,resizeHandles:[]}}));return{lg:r,md:r,sm:r,xs:r,xxs:r}}(F.gridRows,F.gridCols),o=a.lg.map((function(e){return e.i}));return s.a.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:0}},s.a.createElement(n,Object.assign({},t,{className:"card-layout",layouts:a,resizeHandles:[],preventCollision:!0,isDraggable:!1,isResizable:!1}),o.map((function(e,t){return s.a.createElement("div",{key:e},s.a.createElement(re,{key:t,droppableId:e,cardType:c.PLACEHOLDER,className:"droppable-guide"},s.a.createElement(Oe,{key:e,cardId:e,cardType:c.PLACEHOLDER})))}))))},je=s.a.memo(Le);var Ie=n(351),Ae=function(){var e=b().appMode,t=E(),n=t.activeLayout,o=t.setBufferLayout,r=t.activeCards,i=t.activeWidgets;Object(u.useEffect)((function(){console.log(null===n||void 0===n?void 0:n.id)}),[null===n||void 0===n?void 0:n.id]);var l=Object(u.useState)({x:window.innerWidth,y:window.innerHeight}),d=Object(v.a)(l,2),m=d[0],f=(d[1],Object(Ie.a)(),Object(u.useRef)(null)),g=Object(u.useRef)(""),p=Object(z.WidthProvider)(z.Responsive),h={breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:F.gridCols,md:F.gridCols,sm:F.gridCols,xs:F.gridCols,xxs:F.gridCols},rowHeight:(m.y-F.gridBottomPadding)/F.gridRows,margin:[20,20],preventCollision:!0,compactType:null};return s.a.createElement("div",null,s.a.createElement("div",{className:"card-grid-container"},s.a.createElement(p,Object.assign({},h,{className:"card-layout",isDraggable:e===a.EDIT,isResizable:e===a.EDIT,layouts:n?n.layout:{lg:[]},onDragStart:function(e,t,n,a,o,r){r.style.border="2px solid cyan",r.style.border="4px solid cyan"},onLayoutChange:function(e){var t={lg:e,md:e,sm:e,xs:e,xxs:e};f.current=t,o(t)},preventCollision:!0,resizeHandles:["se"],verticalCompact:!0}),[].concat(Object(V.a)(r),Object(V.a)(i)).map((function(e,t){return s.a.createElement(we.a.div,{className:"card-container",draggable:!0,key:e.id,initial:"hidden"},s.a.createElement(re,{cardType:c.IFRAME,className:"droppable-card",droppableId:e.id,key:t},s.a.createElement(Oe,{cardId:t.toString(),cardType:c.IFRAME,data:e,onClick:function(){g.current=t.toString()}},"widget"!==e.contentType?function(t,n,a,o){var r=e;return s.a.createElement(Z,{card:r,scale:t,cardView:n,onError:a,onLoad:o})}:function(t){return function(e){var t=void 0;switch(e.id){case"clock":t=s.a.createElement(Oe,{cardType:c.CLOCK,onClick:function(){}},(function(e){return s.a.createElement(ie,null)}));break;case"info":t=s.a.createElement(Oe,{cardType:c.CLOCK},(function(e){return s.a.createElement("div",null)}))}return console.log(t),t}(e)})))})))),s.a.createElement(je,{gridSettings:h}))},De=s.a.memo(Ae),Te=function(e){var t=e.split("[")[1];return{x:Number.parseInt(t.charAt(0)),y:Number.parseInt(t.charAt(3))}},Re=function(e){var t=e.children,n=E(),a=n.addCard,o=n.swapCard,r=n.addWidget,i=n.setActiveLayout,c=y((function(e){return e.layoutsModel.externalLayouts}));return s.a.createElement(te.a,{onDragEnd:function(e){var t,n;if((null===(t=e.destination)||void 0===t?void 0:t.droppableId)!=(null===(n=e.source)||void 0===n?void 0:n.droppableId)){var u=e.source,s=e.destination,d=e.draggableId;if(console.log("dragged from ".concat(d," to ").concat(null===s||void 0===s?void 0:s.droppableId," current title: ","yes")),s)switch(u.droppableId){case l.CARD_TABLE:if(s.droppableId)if(s.droppableId.startsWith("empty")){var m=Te(s.droppableId);a({sourceId:d,targetPosition:m}),console.log("dropped onto an empty card, adding card")}else o({sourceId:d,targetId:s.droppableId});break;case l.WIDGETS_TABLE:var f=Te(s.droppableId);r({sourceId:d,targetPosition:f});break;case l.LAYOUT_TABLE:var v=c.filter((function(e){return e.id===d}))[0];i(v);break;default:console.log("got unkown drag source")}}}},t)},ke=(n(152),n(339)),Me=n(340),Ne=n(81),_e=n.n(Ne),Pe=(n(110),n(347)),Ge=n(165),Ue=n.n(Ge),We=n(166),Be=function(e){var t=e.children,n=e.padding;return s.a.createElement("div",{style:{display:"flex",flexDirection:"row",padding:n}},t)},Ve=["dndType","className","children","dragAll"],ze=function(e){e.dndType;var t=e.className,n=e.children,a=e.dragAll,o=Object(ee.a)(e,Ve);return s.a.isValidElement(n)?s.a.createElement(te.b,o,(function(e,o){var r=a?e.dragHandleProps:{};return s.a.createElement(s.a.Fragment,null,s.a.createElement("tr",Object.assign({className:t,ref:e.innerRef},e.draggableProps,r),s.a.cloneElement(n,{provided:e})),s.a.createElement("tr",{style:{display:o.isDragging?"table-row":"none",backgroundColor:o.isDragging?"green":"none"}},s.a.cloneElement(n,{provided:e})))})):s.a.createElement("div",null)};ze.defaultProps={dragAll:!0};var Fe,Ye,He=s.a.memo(ze),qe=function(e){var t=e.headerTitle,n=e.setFilter,a=e.setFilterDirection,o=e.className,r=e.activeFilter,i=Object(u.useState)(!0),c=Object(v.a)(i,2),l=c[0],d=c[1],m=t===r;return s.a.createElement("th",{className:null!==o&&void 0!==o?o:"editor-panel-table-header",onClick:function(){n(t),d(!l),a(l)}},function(e){var t=e.split(" ").map((function(e){return function(e){var t,n=/^[a-z]{0,1}|\s\w/gi;return null===(t=(e=e.toLowerCase()).match(n))||void 0===t||t.forEach((function(t){e=e.replace(t,t.toUpperCase())})),e}(e)})).join(" ");return t}(t),m&&l?"\u25b2":m&&!l?"\u25bc":"")},Je=function(e){var t=e.card;return s.a.createElement("div",{style:{display:"flex"}},s.a.createElement("img",{className:t.isActive?"row-favicon-active":"row-favicon-inactive",src:"https://s2.googleusercontent.com/s2/favicons?domain_url=".concat(t.src)}),s.a.createElement("div",{style:{marginTop:"auto",marginBottom:"auto",textAlign:"left"}},t.src))},Ke=function(){var e=y((function(e){return e.appModel.availableCards})),t=h((function(e){return e.layoutsModel.clearCards})),n=h((function(e){return e.layoutsModel.resetLayout})),a=Object(u.useState)(),o=Object(v.a)(a,2),r=o[0],i=o[1],d=Object(u.useState)(!0),m=Object(v.a)(d,2),f=m[0],g=m[1],p=Object(u.useState)(e),b=Object(v.a)(p,2),E=b[0],w=b[1],C=Object(u.useState)(""),x=Object(v.a)(C,2),S=x[0],O=x[1],L=Object(u.useState)(e),j=Object(v.a)(L,2),I=j[0],D=j[1];Object(u.useEffect)((function(){if(0<S.length){var e=Ue.a.go(S,E.map((function(e){return e.title}))).map((function(e){return e.target})),t=E.filter((function(t){return e.includes(t.title)}));D(t)}else D(E)}),[S,E]),Object(u.useEffect)((function(){var t=r,n=Object(V.a)(e).sort((function(e,n){var a=e[t],o=n[t];if(a&&o){if(a<o)return-1;if(o<a)return 1}return 0}));!f&&n.reverse(),w(n)}),[r,e,f]);return s.a.createElement("div",{className:"contents-tab-container"},s.a.createElement(Be,{padding:"0.5em"},s.a.createElement(Pe.a,{onChange:function(e){return O(e.currentTarget.value)},placeholder:"search title",width:"80%"}),s.a.createElement(ue,{appearance:"default",intent:"danger",onClick:function(e){n()},text:"Reset Layout"}),s.a.createElement(ue,{appearance:"minimal",intent:"danger",onClick:function(e){t()},text:"Clear All"})),s.a.createElement(re,{cardType:c.CLOCK,className:"table-container",droppableId:l.CARD_TABLE,isDropDisabled:!0},s.a.createElement("table",{className:"contents-tab-table"},s.a.createElement("tbody",null,s.a.createElement("tr",null,["title","added","sourceId","author","interaction"].map((function(e,t){return s.a.createElement(qe,{activeFilter:r,className:"contents-table-header",headerTitle:e,key:t,setFilter:i,setFilterDirection:g})}))))),s.a.createElement(We.Scrollbars,{autoHeight:!0,autoHeightMax:319,autoHeightMin:100,onScrollFrame:function(e){return console.log(e)}},s.a.createElement("table",{style:{padding:"2em"}},s.a.createElement("tbody",null,I.map((function(e,t){var n=e.added,a=e.src,o=e.author,r=e.interaction,i=e.sourceId,l=e.isActive;return s.a.createElement(He,{className:l?"content-row-active":"content-row-inactive",dndType:c.CARD_ROW,draggableId:i,index:t,isDragDisabled:l,key:t.toString()},s.a.createElement(s.a.Fragment,null,s.a.createElement("td",null,s.a.createElement(Je,{card:e})),s.a.createElement("td",null,A(n)),s.a.createElement("td",null,a),s.a.createElement("td",null,o),s.a.createElement("td",null,r)))})))))))},Xe=n(53),Qe=(n(313),n(314),function(e){var t,n=e.children,a=e.className,o=e.padding,r=e.flexDirection,i={padding:null!==o&&void 0!==o?o:"0em",flexDirection:null!==r&&void 0!==r?r:"column"};return s.a.createElement("div",{style:i,className:null!==(t="panel "+a)&&void 0!==t?t:""},n)}),Ze=(n(315),n(111),n(316),function(e){var t=e.children,n=e.active,a=e.containerClassName,o=e.onClose,r=e.backdropOpacity;return s.a.createElement("div",{className:"modal-container",style:{display:n?"flex":"none",width:"100vw",height:"100vh",justifyContent:"center",alignItems:"center"}},s.a.createElement($e,{onClose:o,backdropOpacity:null!==r&&void 0!==r?r:0}),s.a.createElement("div",{style:{zIndex:1e3},className:a},t))}),$e=function(e){var t=e.onClose,n=e.backdropOpacity;return s.a.createElement("div",{onMouseUp:t,style:{opacity:n,zIndex:200},className:"pop-up-background"})},et=n(336),tt=n(337),nt=n(338),at=(n(317),function(e){var t=e.visible,n=e.onCloseComplete,a=(y((function(e){return e.layoutsModel.activeLayout})),Object(u.useState)(t)),o=Object(v.a)(a,2),r=o[0],i=(o[1],Object(u.useState)(!1)),c=Object(v.a)(i,2),l=c[0],d=c[1];console.log("HELLO IM HERE");var m=y((function(e){return JSON.stringify(e.layoutsModel.activeLayout)}));console.log(m);var f=x()("copy-field-container",{"copy-field-container-closed":l});return U.a.createPortal(s.a.createElement(Ze,{onClose:n,active:r,containerClassName:"google-form-popup",backdropOpacity:.5},s.a.createElement("div",{className:"google-form-popup-inner-container"},s.a.createElement(et.a,{color:l?"green":""},"1. Press the Copy Button"),s.a.createElement(et.a,null,l?"2. Fill out the form, and paste the copied text into the Content field, then submit":""),s.a.createElement("div",{className:f},s.a.createElement(ot,{onCopy:function(e){d(!0)},onCloseComplete:n,text:m}))),l?s.a.createElement(rt,{src:"https://docs.google.com/forms/d/e/1FAIpQLSeKP2imQv_UCj4qrGNk7mT6Rzz83F30IvEl8ZFdERIdzSnvig/viewform?usp=sf_link"}):s.a.createElement(s.a.Fragment,null)),document.querySelector("#google-form-popup"))}),ot=function(e){var t=e.text,n=e.onCloseComplete,a=e.onCopy,o=(e.isCurrentClipBoardContent,Object(u.useState)(!1)),r=Object(v.a)(o,2),i=r[0],c=r[1],l=Object(u.useState)(!1),d=Object(v.a)(l,2),m=d[0],f=d[1];x()("copy-field",{"copy-field-success":m&&i,"copy-field-failure":!m&&!i});return Object(u.useEffect)((function(){navigator.clipboard.readText().then((function(e){t===e?(c(!0),f(!0)):(f(!1),c(!1))})).catch((function(e){console.error("Failed to read clipboard contents:",e)}))}),[t]),s.a.createElement("div",null,s.a.createElement(ue,{iconBefore:s.a.createElement(tt.a,null),text:"Copy Layout To Clip Board",onClick:function(e){navigator.clipboard.writeText(t),f(!0),a(e)},width:"100%",intent:"success",appearance:"primary"}),i?s.a.createElement(ce.a,{intent:"success"},"Clipboard is current"):s.a.createElement(ce.a,{intent:"warning"},"Current clipboard content is out of sync with current layout, copy the layout to clipboard again."),s.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",paddingTop:"1em"}},s.a.createElement(ue,{iconBefore:s.a.createElement(nt.a,null),text:"Return",onClick:n})))},rt=function(e){var t=e.src;return s.a.createElement("iframe",{src:t,className:"google-form-iframe",width:"100%",frameBorder:0,marginHeight:0,marginWidth:0})},it=n(349),ct=function(){var e=y((function(e){return e.layoutsModel.externalLayouts})),t=y((function(e){return e.layoutsModel.activeLayout})),n=h((function(e){return e.layoutsModel.setActiveLayout}));return s.a.createElement("div",null,s.a.createElement(re,{className:"table-container",droppableId:l.LAYOUT_TABLE,isDropDisabled:!1,cardType:c.CLOCK},s.a.createElement("table",null,s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Title"),s.a.createElement("th",null,"Date Added"),s.a.createElement("th",null,"Author")))),s.a.createElement("table",null,s.a.createElement("tbody",null,e.map((function(e,a){var o=e.id,r=e.title,i=e.author,c=e.added;return s.a.createElement("tr",{key:a,onClick:function(t){return n(e)}},s.a.createElement("td",{key:a},o===(null===t||void 0===t?void 0:t.id)?s.a.createElement(it.a,{color:"success"}):s.a.createElement(s.a.Fragment,null),r),s.a.createElement("td",null,A(c)),s.a.createElement("td",null,i))}))))))},lt=function(){var e=y((function(e){return e.layoutsModel.activeLayout})),t=y((function(e){return e.layoutsModel.bufferLayout})),n=Object(u.useState)(!1),a=Object(v.a)(n,2),o=a[0],r=a[1],i=h((function(e){return e.googleSheetsModel.fetchAppGoogleSheet})),c=Object(u.useState)(JSON.stringify(e)),l=Object(v.a)(c,2),d=(l[0],l[1]);Object(u.useEffect)((function(){d(JSON.stringify(t))}),[e,t]);return s.a.createElement(Qe,null,s.a.createElement("div",{style:{display:"flex",justifyContent:"center",width:"100%",padding:".5em"}},s.a.createElement(ue,{iconBefore:s.a.createElement(ne.a,null),onClick:function(e){r(!0)},text:"Add New Layout",width:"90%",intent:"success",appearance:"primary"})),o?s.a.createElement(at,{onCloseComplete:function(){i(),r(!1)},visible:o}):s.a.createElement(s.a.Fragment,null),s.a.createElement("div",null,s.a.createElement(ct,null)))},ut=function(e){e.dndType;var t=e.className,n=e.children,a=(e.dragAll,e.draggableId),o=e.index,r=y((function(e){return e.layoutsModel.activeLayout})),i=null===r||void 0===r?void 0:r.layout.lg.map((function(e){return e.i})).includes(a);Object(u.useEffect)((function(){i=null===r||void 0===r?void 0:r.layout.lg.map((function(e){return e.i})).includes(a)}),[r]);return s.a.isValidElement(n)?s.a.createElement("div",{style:{display:i?"none":"block"}},s.a.createElement(te.b,{draggableId:a,index:o},(function(e,a){return console.log(i),s.a.createElement("div",Object.assign({className:t,ref:e.innerRef,style:{display:i?"none":"block"}},e.draggableProps,e.dragHandleProps),s.a.cloneElement(n,{provided:e}))}))):s.a.createElement("div",null)},st=function(){y((function(e){return e.layoutsModel.activeLayout}));return s.a.createElement("div",null,s.a.createElement(re,{cardType:c.CLOCK,className:"table-container",droppableId:l.WIDGETS_TABLE,isDropDisabled:!1},s.a.createElement(ut,{className:"draggable-widget",dndType:c.WIDGET,draggableId:"clock",index:0,isDragDisabled:!1},s.a.createElement(ie,null)),s.a.createElement(ut,{className:"draggable-widget",dndType:c.WIDGET,draggableId:"info",index:1,isDragDisabled:!1},s.a.createElement("button",null,"HELLO"))))},dt=function(){return s.a.createElement(Xe.d,null,s.a.createElement(Xe.b,null,s.a.createElement(Xe.a,null,"Content"),s.a.createElement(Xe.a,null,"Widgets"),s.a.createElement(Xe.a,null,"Layouts")),s.a.createElement(Xe.c,null,s.a.createElement(Ke,null)),s.a.createElement(Xe.c,null,s.a.createElement(st,null)),s.a.createElement(Xe.c,null,s.a.createElement(lt,null)))},mt=function(){var e=y((function(e){return e.appModel.appMode})),t=Object(u.useState)(!1),n=Object(v.a)(t,2),o=n[0],r=n[1],i=x()("editor-panel",{"editor-panel-full":!o,hidden:e===a.DISPLAY,"editor-panel-minimized":o}),c=x()("editor",{"editor-visible":e===a.EDIT});return U.a.createPortal(s.a.createElement(_e.a,{bounds:{left:0,top:0,right:window.innerWidth-50,bottom:window.innerHeight-50},defaultClassName:i,defaultPosition:{x:100,y:100},handle:".editor-panel-handle"},s.a.createElement("div",{className:c},s.a.createElement(ft,null,s.a.createElement(vt,{icon:s.a.createElement(ke.a,null),onMouseUp:function(){r(!1)}}),s.a.createElement(vt,{icon:s.a.createElement(Me.a,null),onMouseUp:function(){r(!0)}})),s.a.createElement(dt,null))),document.querySelector("#editor-panel-container"))},ft=function(e){var t=e.children;return s.a.createElement("div",{className:"editor-panel-handle panel-header"},t)},vt=function(e){var t=e.icon,n=e.onMouseUp;return s.a.createElement("div",{className:"window-button",onMouseUp:n},t)},gt=n(341),pt=n(335),ht=function(e){var t=e.active,n=e.onClose;return Object(u.useEffect)((function(){console.log(t)}),[t]),U.a.createPortal(s.a.createElement(Ze,{active:t,onClose:n,backdropOpacity:0},s.a.createElement(we.a.div,{variants:{hidden:{y:100,opacity:0},visible:{opacity:1,y:0,transition:{duration:.5}}},style:{width:"30vw",height:"80vh",backgroundColor:"white",borderRadius:10,padding:"1em"},animate:t?"visible":"hidden"},s.a.createElement(Qe,null,s.a.createElement(et.a,null,"Connect Labtop"),s.a.createElement("hr",null),s.a.createElement(pt.a,null,"Connect your labtop to use this screen as a display."),s.a.createElement("img",{className:"how-to-image",src:"/cuboard/labtopdiagram.png"}),s.a.createElement(et.a,null,"Explore Content"),s.a.createElement("hr",null),s.a.createElement(pt.a,null,"Click on a card to explore data related content."),s.a.createElement("img",{className:"how-to-image",src:"/cuboard/masonary.png"})))),document.getElementById("popup-container"))},yt=function(){var e=function(e){var t=Object(u.useState)(e),n=Object(v.a)(t,2),a=n[0],o=n[1];return[a,function(){return o(!a)}]}(!1),t=Object(v.a)(e,2),n=t[0],o=t[1],r=b().appMode;return U.a.createPortal(s.a.createElement(s.a.Fragment,null,r===a.DISPLAY&&s.a.createElement(ht,{active:n,onClose:o}),r===a.DISPLAY&&s.a.createElement(ue,{appearance:"primary",className:"how-to-use-button",fontSize:"xx-large",height:"4vh",iconBefore:s.a.createElement(gt.a,null),onClick:o,text:"Learn how to use this display",width:"35vw"})),document.querySelector("#how-to-use-button"))},bt=n(342),Et=function(){var e=h((function(e){return e.appModel.toggleAppMode})),t=Object(bt.a)((function(){e()})),n={position:"absolute",width:50,height:50,border:F.showModeSwitchButton?"1px solid red":"none",bottom:0,left:0};return U.a.createPortal(s.a.createElement("div",Object.assign({style:n},t)),document.querySelector("#mode-change-button"))},wt=function(e){var t=e.children;e.padding;return s.a.createElement("div",{style:{width:"100vw",height:"100vh"}},t)},Ct=function(){var e=Object(m.a)(F.idleTime,!1),t=h((function(e){return e.googleSheetsModel.fetchTopLevelSheet})),n=E(),o=n.setRandomLayout;n.activeLayout;Object(f.a)((function(){o()}),F.rotationDuration);var r,i=b(),c=i.appMode,l=i.toggleAppMode;return Object(u.useEffect)((function(){c===a.EDIT&&l()}),[e]),r=function(){t()},Object(u.useEffect)(r,[]),s.a.createElement(s.a.Fragment,null,s.a.createElement(yt,null),s.a.createElement(B,null),s.a.createElement(Et,null),s.a.createElement(Re,null,s.a.createElement(mt,null),s.a.createElement(wt,null,s.a.createElement(d.a,null,s.a.createElement(De,null)))))},xt=n(21),St=n.n(xt),Ot=n(36);!function(e){e.CROSS_ORIGIN="CROSS_ORIGIN"}(Fe||(Fe={})),function(e){e.MALFORMED_URL="MALFORMED_URL"}(Ye||(Ye={}));var Lt=function(){function e(t){Object(Y.a)(this,e),this.url=void 0,this.errors=void 0,this.warnings=void 0,this.errors=[],this.warnings=[],this.url=t}return Object(H.a)(e,[{key:"validate",value:function(e){var t;console.log(this.errors);var n=function(e){var t=[];new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)||t.push(Ye.MALFORMED_URL);return t}(this.url);(t=this.warnings).push.apply(t,Object(V.a)(n)),console.log(n)}},{key:"isValid",value:function(){return 0==this.errors.length}},{key:"errorMessages",value:function(){var e=this,t=[];return this.errors.map((function(n){if(n===Fe.CROSS_ORIGIN)t.push("Blocked a frame with origin ".concat(e.url,"; from accessing a cross-origin frame."));else console.log("error did not match an error enum")})),t}}]),e}();var jt=function(){function e(t){var n;Object(Y.a)(this,e),this.id=void 0,this.src=void 0,this.title=void 0,this.added=void 0,this.sourceId=void 0,this.author=void 0,this.interaction=void 0,this.contentType=void 0,this.metaData=void 0,this.validator=void 0,this.isActive=void 0,this.failed=void 0,this.id=t.src,this.src=t.src,this.title=t.title,this.added=new Date(t.added),this.sourceId=t.src,this.author=t.author,this.interaction=i[t.interaction],this.contentType=function(e){return"string"===typeof e&&/[./](gif|jpg|jpeg|tiff|png)$/i.test(e)}(n=this.src)?"image":function(e){return"string"===typeof e&&/[./](mp4|webm|mov)$/i.test(e)}(n)?"video":function(e){return"string"===typeof e&&e.includes("embed")}(n)?"embed":function(e){return"string"===typeof e&&e.includes("https")}(n)?"website":"widget","widget"===this.contentType&&t.widgetType?(this.metaData={widgetType:t.widgetType},this.id=t.widgetType):(this.metaData={src:t.src,title:t.title,added:new Date(t.added),sourceId:t.src,author:t.author},this.id=t.src),this.isActive=!1,this.validator=new Lt(this.src),this.failed=!1}return Object(H.a)(e,[{key:"setActive",value:function(e){this.isActive=e}},{key:"fail",value:function(){console.log(this.validator.errors),this.failed=!0}}]),e}();var It=function(){function e(t){Object(Y.a)(this,e),this.id=void 0,this.contentType=void 0,this.isActive=void 0,this.id=t,this.isActive=!1,this.contentType="widget"}return Object(H.a)(e,[{key:"setActive",value:function(e){this.isActive=e}}]),e}(),At=F.widgetIds.map((function(e){return new It(e)})),Dt={availableCards:[],availableWidgets:At,activeWidgets:[],activeCards:[],appMode:a.DISPLAY,manageViewModeChange:Object(g.g)((function(e,t){switch(e.setAppMode(t),t){case a.EDIT:case a.DISPLAY:case a.CYCLE:break;default:console.log("reached default in set view mode thunk")}})),toggleAppMode:Object(g.g)((function(e,t,n){var o=n.getState;switch(o().appMode){case a.EDIT:e.setAppMode(a.DISPLAY);break;case a.DISPLAY:e.setAppMode(a.EDIT);break;case a.CYCLE:break;default:console.log("reached default in set view mode thunk")}console.log(o().appMode)})),setAvailableCards:Object(g.b)((function(e,t){e.availableCards=t})),setActiveCards:Object(g.b)((function(e,t){e.activeCards=t})),setActiveWidgets:Object(g.b)((function(e,t){e.activeWidgets=t})),setAppMode:Object(g.b)((function(e,t){e.appMode=t})),onCardSheetLoadSuccess:Object(g.h)((function(e,t){return t.googleSheetsModel.setAppGoogleSheetData}),function(){var e=Object(Ot.a)(St.a.mark((function e(t,n){return St.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TRIGGERD"),console.log(n.payload),n.payload.getSheetRows("CARDS").then((function(e){console.log(e);var n=e.map((function(e){return{src:e.src,title:e.title,added:e.added,sourceid:e.sourceid,author:e.author,interaction:e.interaction}})).map((function(e){return new jt(e)}));t.setAvailableCards(n)}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),onSetActiveLayout:Object(g.h)((function(e,t){return t.layoutsModel.setActiveLayout}),function(){var e=Object(Ot.a)(St.a.mark((function e(t,n,a){var o,r,i,c,l,u,s;return St.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a.getState,i=new Set(n.payload.sources()),c=new Set(null!==(o=n.payload.layoutWidgets.map((function(e){return e.id})))&&void 0!==o?o:[]),l=r().availableCards.map((function(e){return i.has(e.sourceId)?e.setActive(!0):e.setActive(!1),e})),u=r().availableCards.filter((function(e){return i.has(e.sourceId)})),s=At.filter((function(e){return c.has(e.id)})),t.setAvailableCards(l),t.setActiveCards(u),console.log(s),t.setActiveWidgets(s);case 10:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),registerCardLoadFailure:Object(g.g)((function(e,t,n){var a=n.getState;n.getStoreState;console.log("Got card Register Load Failure at Layouts Model"),console.log(t);var o=a().activeCards,r=t.sourceId,i=o.map((function(e){return e.sourceId===r&&(console.log("found failed"),e.fail()),e}));e.setActiveCards(i)})),onSwapCardContent:Object(g.h)((function(e,t){return t.layoutsModel.swapCardContent}),function(){var e=Object(Ot.a)(St.a.mark((function e(t,n,a){var o,r;return St.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=a.getState,console.log("got swap card content"),console.log(n.payload),console.log(o().activeCards),(r=o().activeCards.map((function(e){if(e.sourceId===n.payload.targetId){var t=o().availableCards.find((function(e){return e.sourceId===n.payload.sourceId}));return console.log(t),t}return e})))&&t.setActiveCards(r),console.log(Object(g.f)(n));case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}())},Tt=Dt,Rt=n(9),kt=n(30),Mt={layout:{lg:[{w:2,h:1,x:0,y:0,i:"clock",moved:!1,static:!0},{w:2,h:2,x:2,y:0,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/DuBois_Racism.png",moved:!1,static:!1},{w:1,h:2,x:0,y:1,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg",moved:!1,static:!1}],md:[{w:2,h:1,x:0,y:0,i:"clock",moved:!1,static:!0},{w:2,h:2,x:2,y:0,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/DuBois_Racism.png",moved:!1,static:!1},{w:1,h:2,x:0,y:1,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg",moved:!1,static:!1}],sm:[{w:2,h:1,x:0,y:0,i:"clock",moved:!1,static:!0},{w:2,h:2,x:2,y:0,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/DuBois_Racism.png",moved:!1,static:!1},{w:1,h:2,x:0,y:1,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg",moved:!1,static:!1}],xs:[{w:2,h:1,x:0,y:0,i:"clock",moved:!1,static:!0},{w:2,h:2,x:2,y:0,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/DuBois_Racism.png",moved:!1,static:!1},{w:1,h:2,x:0,y:1,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg",moved:!1,static:!1}],xxs:[{w:2,h:1,x:0,y:0,i:"clock",moved:!1,static:!0},{w:2,h:2,x:2,y:0,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/DuBois_Racism.png",moved:!1,static:!1},{w:1,h:2,x:0,y:1,i:"https://raw.githubusercontent.com/wyhinton/dxl_content/master/images/VideoGames.jpeg",moved:!1,static:!1}]},layoutSettings:{gridSettings:{defaultBackgroundColor:"red"},cardSettings:[]},widgets:[]},Nt=function(){function e(t){Object(Y.a)(this,e),this.title=void 0,this.author=void 0,this.added=void 0,this.id=void 0,this.sourceLayout=void 0,this.layout=void 0,this.layoutWidgets=void 0;var n=function(e){var t=JSON.parse(e.layout);return t.layout?t:Mt}(t),a=(n.widgets,n.layout);n.layoutSettings;this.id=t.title+"_"+t.timestamp,this.title=t.title,this.author=t.author,this.added=new Date(t.timestamp.split(" ")[0]),this.sourceLayout=JSON.parse(t.layout).sourceLayout,console.log(JSON.parse(t.layout)),JSON.parse(t.layout).layoutWidgets?this.layoutWidgets=JSON.parse(t.layout).layoutWidgets:this.layoutWidgets=[],this.layout=a}return Object(H.a)(e,[{key:"swapCard",value:function(e){for(var t=0,n=Object.entries(this.layout);t<n.length;t++){var a,o=Object(v.a)(n[t],2),r=o[0],i=o[1],c=Object(kt.a)(i.entries());try{for(c.s();!(a=c.n()).done;){var l=Object(v.a)(a.value,2),u=l[0];l[1].i==e.targetId&&(i[u].i=e.sourceId)}}catch(s){c.e(s)}finally{c.f()}this.layout[r]=i}}},{key:"removeCard",value:function(e){console.log(this.layout);for(var t=0,n=Object.entries(this.layout);t<n.length;t++){var a,o=Object(v.a)(n[t],2),r=o[0],i=o[1],c=Object(kt.a)(i.entries());try{for(c.s();!(a=c.n()).done;){var l=Object(v.a)(a.value,2);l[0],l[1];this.layout[r]=i.filter((function(t){return t.i!==e}))}}catch(u){c.e(u)}finally{c.f()}}}},{key:"clearCards",value:function(){console.log(this.layout);for(var e=0,t=Object.entries(this.layout);e<t.length;e++){var n,a=Object(v.a)(t[e],2),o=a[0],r=a[1],i=Object(kt.a)(r.entries());try{for(i.s();!(n=i.n()).done;){var c=Object(v.a)(n.value,2);c[0],c[1];this.layout[o]=[]}}catch(l){i.e(l)}finally{i.f()}}}},{key:"addCard",value:function(e,t){console.log("ADDING CARD AT LAYOUT DATA"),console.log(this.layout),Object.entries(this.layout)[0][1].map((function(e){return e.i})).includes(e.sourceId)&&console.log("ADDING SOMETHING THAT'S ALREADY PRESENT");for(var n=0,a=Object.entries(this.layout);n<a.length;n++){var o=Object(v.a)(a[n],2),r=o[0],i=(o[1],{x:t.x,y:t.y,w:1,h:1,i:e.sourceId});this.layout[r].push(i)}}},{key:"addWidget",value:function(e,t){Object.entries(this.layout)[0][1].map((function(e){return e.i})).includes(e.id)&&console.log("ADDING A WIDGET THAT'S ALREADY PRESENT"),this.layoutWidgets.push(e);for(var n=0,a=Object.entries(this.layout);n<a.length;n++){var o=Object(v.a)(a[n],2),r=o[0],i=(o[1],{x:t.x,y:t.y,w:1,h:1,i:e.id});this.layout[r].push(i)}}},{key:"resetLayout",value:function(){console.log("RESETING LAYOUT"),console.log(this.sourceLayout.layout),this.layout=Object(Rt.a)({},this.sourceLayout.layout)}},{key:"failCard",value:function(e){console.log("FAILING CARD AT LAYOUT DATA")}},{key:"setGridLayout",value:function(e){console.log(e),this.layout=e}},{key:"sources",value:function(){return Object.entries(this.layout)[0][1].map((function(e){return e.i}))}},{key:"widgets",value:function(){console.log("GETTING WIDGETS AT WIDGET LAYOUTDATA");var e=Object.entries(this.layout)[0][1];console.log(e);var t=e.filter((function(e){return F.widgetIds.includes(e.i)}));return console.log("just widgets",t),t.map((function(e){return e.i}))}}]),e}();var _t=[{i:"https://codepen.io/rcyou/embed/QEObEk?height=265&theme-id=light&default-tab=css,result",x:2,y:2,w:1,h:1,static:!1},{i:"https://sketchfab.com/models/e55956fee6444011b574bad021a03eae/embed?autostart=1",x:3,y:0,w:1,h:1,minW:1},{i:"https://www.lib.ncsu.edu/huntlibrary",x:3,y:1,w:1,h:1,minW:1}],Pt={layout:{lg:_t,md:_t,sm:_t,xs:_t,xxs:_t},layoutSettings:{cardSettings:[],gridSettings:{defaultBackgroundColor:"red"}},widgets:[]},Gt={title:"default static layout",author:"webb",timestamp:"1/1/2021",layout:JSON.stringify(Pt),interaction:"active"},Ut=new Nt(Gt),Wt={activeLayout:void 0,externalLayouts:[],bufferLayout:Ut.layout,tempLayout:Ut.layout,onSetAppGoogleSheetData:Object(g.h)((function(e,t){return t.googleSheetsModel.setAppGoogleSheetData}),(function(e,t){t.payload.getSheetRows("LAYOUTS").then((function(t){var n,a=t.map((function(e,t){return new Nt(e)}));if(F.useStaticLayout)n=Ut,e.setActiveLayout(n),e.setBufferLayout(n.layout);else{var o=a.filter((function(e){return e.title===F.defaultLayoutName}))[0];o&&(console.log(o),e.setActiveLayout(o),e.setBufferLayout(o.layout))}e.setExternalLayouts(a)}))})),onToggleViewMode:Object(g.h)((function(e,t){return t.appModel.toggleAppMode}),(function(e,t,n){var o=n.getState,r=n.getStoreState,i=o().activeLayout,c=o().bufferLayout;r().appModel.appMode===a.DISPLAY&&(console.log("IT WAS IN DISPLAY MODE"),(null===i||void 0===i?void 0:i.layout)&&(i.layout=c,e.setActiveLayout(i)))})),setActiveLayout:Object(g.b)((function(e,t){e.activeLayout=t})),setRandomLayout:Object(g.g)((function(e,t,n){var a=(0,n.getState)(),o=a.externalLayouts,r=a.activeLayout;if(r){var i=o.map((function(e){return e.id})).indexOf(null===r||void 0===r?void 0:r.id);console.log(i);var c=(i+1)%o.length;console.log("SETTING LAYOUT INDEX TO ".concat(c," - ").concat(o[c].id," "));var l=o[c];e.setActiveLayout(l)}})),setExternalLayouts:Object(g.b)((function(e,t){console.log("setting external layouts"),e.externalLayouts=t})),swapCardContent:Object(g.g)((function(e,t,n){var a=n.getState,o=a().activeLayout;if(o){var r=a().bufferLayout;o.layout=r,o.swapCard(t),e.setActiveLayout(o)}})),deleteCard:Object(g.g)((function(e,t,n){var a=n.getState,o=a().activeLayout;if(o){var r=a().bufferLayout;o.layout=r,o.removeCard(t),e.setActiveLayout(o)}})),clearCards:Object(g.g)((function(e,t,n){var a=n.getState,o=a().activeLayout;if(o){var r=a().bufferLayout;o.layout=r,o.clearCards(),e.setActiveLayout(o)}})),addCard:Object(g.g)((function(e,t,n){var a=n.getState,o=(0,n.getStoreState)().appModel.availableCards,r=t.sourceId,i=t.targetPosition,c=o.find((function(e){return e.sourceId==r})),l=a().activeLayout;if(l&&c){var u=a().bufferLayout;l.setGridLayout(u),null===l||void 0===l||l.addCard(c,i),e.setActiveLayout(l)}})),addWidget:Object(g.g)((function(e,t,n){var a=n.getState,o=n.getStoreState;console.log("ADDING NEW WIDGET!!!");var r=o().appModel.availableWidgets,i=t.sourceId,c=t.targetPosition,l=r.find((function(e){return e.id==i})),u=a().activeLayout;if(u&&l){var s=a().bufferLayout;u.setGridLayout(s),null===u||void 0===u||u.addWidget(l,c),e.setActiveLayout(u)}})),registerCardLoadFailure:Object(g.g)((function(e,t,n){var a=n.getState,o=(n.getStoreState,a().activeLayout);o&&o.failCard(t)})),resetLayout:Object(g.g)((function(e,t,n){var a=n.getState;if(a().activeLayout){var o=a().activeLayout;null===o||void 0===o||o.resetLayout(),o&&e.setActiveLayout(o)}})),setBufferLayout:Object(g.b)((function(e,t){e.bufferLayout=t})),setTempLayout:Object(g.b)((function(e,t){e.tempLayout=t})),updateLayout:Object(g.b)((function(e,t){var n=e.activeLayout;n&&(n.swapCard(t),e.activeLayout=n)}))},Bt=Wt,Vt={key:"181P-SDszUOj_xn1HJ1DRrO8pG-LXyXNmINcznHeoK8k",gid:0},zt=function(){function e(t,n){Object(Y.a)(this,e),this.title=void 0,this.sheetId=void 0,this.sheets=void 0,this.title=t,this.sheetId=n,this.sheets=new Map}return Object(H.a)(e,[{key:"getSheetRows",value:function(e){var t=this;return new Promise((function(n,a){var o=t.sheets.get(e);o?n(o.map((function(e){return e}))):a("sheet with title ".concat(e," did not exist"))}))}},{key:"addSheet",value:function(e,t){this.sheets.set(e,t)}}]),e}(),Ft=n(122),Yt=n.n(Ft),Ht={layoutDataGoogleSheet:null,cardDataGoogleSheet:null,appGoogleSheet:void 0,formUrl:void 0,layoutSheetUrl:void 0,cardSheetUrl:void 0,fetchTopLevelSheet:Object(g.g)((function(e){Jt("TOP_LEVEL","https://docs.google.com/spreadsheets/d/e/2PACX-1vRalMG47cvXmCbEqeIJWn5qwd9bPhHUV16_VN7LuKsv53YQdn9e8XSAzNulXCtP_BIFBTUy0Z5e6KKE/pub?output=csv").then((function(t){console.log(t);var n=t.rows[0];e.setFormUrl(n.googleForm),e.setLayoutsSheetUrl(qt(n.layoutsSheet)),e.setCardSheetUrl(qt(n.cardsSheet)),e.fetchSheet([{name:"LAYOUTS",url:qt(n.layoutsSheet)},{name:"CARDS",url:qt(n.cardsSheet)}])})),console.log("GOT HERE")})),fetchSheet:Object(g.g)(function(){var e=Object(Ot.a)(St.a.mark((function e(t,n,a){var o,r;return St.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=a.getState,console.log(o().cardSheetUrl,o().layoutSheetUrl),r=n.map((function(e){return Jt(e.name,e.url)})),Promise.allSettled(r).then((function(e){var n=new zt("DSC App",Vt.key),a=[];e.forEach((function(e,t){console.log(e),"fulfilled"==e.status&&(a.push(e),n.addSheet(e.value.sheetTitle,e.value.rows)),"rejected"==e.status&&console.error("failed ")})),t.setAppGoogleSheetData(n),n.getSheetRows("CARDS").then((function(e){t.setCardDataGoogleSheet(e)})),n.getSheetRows("LAYOUTS").then((function(e){t.setLayoutDataGoogleSheet(e)}))}));case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),fetchAppGoogleSheet:Object(g.g)(function(){var e=Object(Ot.a)(St.a.mark((function e(t,n,a){var o,r,i;return St.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=a.getState,console.log(o().cardSheetUrl,o().layoutSheetUrl),r=Jt("CARDS",o().cardSheetUrl),i=Jt("LAYOUTS",o().layoutSheetUrl),Promise.allSettled([r,i]).then((function(e){var n=new zt("DSC App",Vt.key),a=[];e.forEach((function(e,t){console.log(e),"fulfilled"==e.status&&(a.push(e),n.addSheet(e.value.sheetTitle,e.value.rows)),"rejected"==e.status&&console.error("failed ")})),t.setAppGoogleSheetData(n),n.getSheetRows("CARDS").then((function(e){t.setCardDataGoogleSheet(e)})),n.getSheetRows("LAYOUTS").then((function(e){t.setLayoutDataGoogleSheet(e)}))}));case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),setAppGoogleSheetData:Object(g.b)((function(e,t){e.appGoogleSheet=t})),setCardDataGoogleSheet:Object(g.b)((function(e,t){e.cardDataGoogleSheet=t})),setLayoutDataGoogleSheet:Object(g.b)((function(e,t){e.layoutDataGoogleSheet=t})),setFormUrl:Object(g.b)((function(e,t){e.formUrl=t})),setCardSheetUrl:Object(g.b)((function(e,t){e.formUrl=t})),setLayoutsSheetUrl:Object(g.b)((function(e,t){e.formUrl=t}))};function qt(e){console.log(e);var t=e.split("/")[5],n=e.split("gid=")[1];return"https://docs.google.com/spreadsheets/d/".concat(t,"/export?format=csv&gid=").concat(n)}function Jt(e,t){var n;return new Promise((function(a){console.log(t),Yt.a.parse(t,{download:!0,header:!0,delimiter:",",dynamicTyping:!0,complete:function(t){n=t.data,console.log(n),a({rows:n,sheetTitle:e})}})}))}var Kt={appModel:Tt,layoutsModel:Bt,googleSheetsModel:Ht},Xt=Object(g.d)(Kt,{name:"Cuboard App Store"});U.a.render(s.a.createElement(g.a,{store:Xt},s.a.createElement(Ct,null)),document.querySelector("#root"))}},[[318,1,2]]]);
//# sourceMappingURL=main.e07dd664.chunk.js.map